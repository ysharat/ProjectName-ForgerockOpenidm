/*!
 * Copyright 2018 ForgeRock AS. All Rights Reserved 
 *  Use of this code requires a commercial software license with ForgeRock AS. or with one of its affiliates. All use shall be exclusively subject to such license between the licensee and ForgeRock AS.
 */
webpackJsonp([1],{"+jrL":function(e,t){},"302j":function(e,t){},"4U4B":function(e,t){},"4WAc":function(e,t){},"5kHC":function(e,t){},"81rF":function(e,t){},A7As:function(e,t){e.exports={baseColor:"#007bff"}},AdZP:function(e,t){},DX21:function(e,t){},EwgO:function(e,t){},Gql0:function(e,t){},M5OL:function(e,t){},N1mL:function(e,t){},NHnr:function(e,t,s){"use strict";function a(e){s("AdZP")}function i(e){s("A7As")}function r(e){s("81rF")}function o(e){s("Zwlf")}function n(e){s("Pm6F")}function l(e){s("Gql0")}function c(e){s("wGgA")}function u(e){s("WbnT")}function d(e){s("bPQa")}function f(e){s("un7B")}function p(e){s("nUOa")}function m(e){s("uiDc")}function h(e){s("rOwt")}function v(e){s("WyKF")}function g(e){s("sQ5Y")}function b(e){s("4WAc")}function y(e){s("jlhQ")}function _(e){s("N1mL")}function w(e){s("Xik2")}function k(e){s("5kHC")}function C(e){s("fqPU")}function S(e){s("302j")}function $(e){s("weCJ")}function D(e){s("wntQ")}function x(e){s("OdVq")}function P(e){s("g26s")}function R(e){s("cQcz")}function A(e){s("EwgO")}function q(e){s("M5OL")}function N(e){s("pw9W")}function T(e){s("DX21")}function F(e){s("lC5l")}function E(e){s("xIO3")}function I(e){s("OQCq")}function U(e){s("4U4B")}function M(e){s("WBI6")}function V(e){s("sHWB")}function j(e){s("+jrL")}Object.defineProperty(t,"__esModule",{value:!0});var O=s("//Fk"),L=s.n(O),z=s("M4fF"),B=s.n(z),H=s("PJh5"),X=s.n(H),G={name:"Toolbar-Notification",data:function(){return{notifications:[],timeoutId:null}},mounted:function(){this.loadData()},filters:{cleanDate:function(e){return X.a.utc(e).format("LLL")+" UTC"}},methods:{resetPolling:function(){B.a.isNull(this.timeoutId)||(clearTimeout(this.timeoutId),this.timeoutId=null)},startPolling:function(){var e=this;this.timeoutId=B.a.delay(function(){e.loadData()},3e3)},clearAll:function(){var e=this;this.notifications=[];var t=this.$root.userStore.state.internalUser,s=t?"internal/user/openidm-admin":this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId;this.resetPolling(),this.getRequestService().post("/notification?_action=deleteNotificationsForTarget&target="+s).then(function(){e.displayNotification("success",e.$t("pages.app.notifications.removedAll")),B.a.isNull(e.timeoutId)&&e.startPolling()}).catch(function(){e.displayNotification("error",e.$t("pages.app.notifications.failedToClear"))})},clearOne:function(e){var t=this,s=this.notifications[e]._id;this.resetPolling(),this.notifications.splice(e,1),this.getRequestService().delete("/internal/notification/"+s).then(function(){t.displayNotification("success",t.$t("pages.app.notifications.removed")),B.a.isNull(t.timeoutId)&&t.startPolling()}).catch(function(){t.displayNotification("error",t.$t("pages.app.notifications.failedToRemove"))})},loadData:function(){var e=this;B.a.isNull(this.$root.userStore.state.userId)||this.getRequestService().get("/"+this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId+"?_fields=_notifications/*").then(function(t){var s=t.data;s._notifications?e.notifications=s._notifications:e.notifications=[],e.startPolling()}).catch(function(){})}}},W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-nav-item-dropdown",{staticClass:"fr-notification-icon align-self-center mr-4",attrs:{right:""}},[s("template",{slot:"button-content"},[s("i",{staticClass:"fa fa-bell mr-2"}),e._v(" "),e.notifications.length>0?s("span",{staticClass:"badge badge-pill badge-danger"},[e._v(e._s(e.notifications.length))]):e._e()]),e._v(" "),s("b-dropdown-header",{staticClass:"border-bottom py-3"},[s("div",{staticClass:"fr-notification-header"},[s("span",[e._v(e._s(e.$t("pages.app.notifications.title"))+" ("+e._s(e.notifications.length)+")")]),e._v(" "),e.notifications.length>0?s("a",{staticClass:"pull-right",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clearAll()}}},[e._v(e._s(e.$t("pages.app.notifications.clearAll")))]):e._e()])]),e._v(" "),e.notifications.length>0?[s("transition-group",{tag:"div",staticClass:"scrollbox",attrs:{name:"notification-list"}},e._l(e.notifications,function(t,a){return s("div",{key:t._id,class:[{"border-bottom":a+1<e.notifications.length},"dropdown-item","py-3","fr-notification-item"]},[s("div",{staticClass:"media"},[s("div",{staticClass:"media-body"},[s("h6",{staticClass:"my-0"},[e._v(e._s(t.message))]),e._v(" "),s("small",{staticClass:"text-muted"},[e._v(e._s(e._f("cleanDate")(t.createDate)))])]),e._v(" "),s("b-button",{staticClass:"btn btn-link my-auto",attrs:{variant:"sm",type:"button"},on:{click:function(t){return t.preventDefault(),e.clearOne(a)}}},[s("i",{staticClass:"fa fa-trash text-muted"})])],1)])}),0)]:[s("div",{staticClass:"mt-4 mb-3 fr-no-notifications fr-notification-item"},[s("div",{staticClass:"media"},[s("div",{staticClass:"media-body align-self-center"},[s("h6",{staticClass:"text-center"},[e._v(e._s(e.$t("pages.app.notifications.noNotifications")))])])])])]],2)},Q=[],Y={render:W,staticRenderFns:Q},K=Y,J=s("VU/8"),Z=a,ee=J(G,K,!1,Z,null,null),te=ee.exports,se={name:"App",components:{"fr-notification":te},data:function(){return{toggled:!1}},methods:{onToggle:function(){this.toggled=!this.toggled},accessIcon:function(e){var t="fa fa-fw mr-3 ";return e.length?t+=e:t+="fa-cube",t}},filters:{capitalize:function(e){return B.a.capitalize(e)}}},ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{class:[{toggled:e.toggled&&!this.$route.meta.hideToolbar}],attrs:{id:"wrapper"}},[this.$route.meta.hideToolbar||null===this.$root.userStore.state.userId?e._e():s("div",{attrs:{id:"appSidebarWrapper"}},[s("ul",{staticClass:"sidebar-nav"},[s("li",{staticClass:"sidebar-brand"},[s("router-link",{staticClass:"d-flex",attrs:{"active-class":"",to:{name:"Dashboard"}}},[s("img",{staticClass:"align-self-center sidebar-brand-logo",staticStyle:{width:"131px"},attrs:{src:"static/images/horizontal-logo-white.svg",alt:e.$t("common.form.logo")}}),e._v(" "),s("img",{staticClass:"align-self-center sidebar-brand-mark",staticStyle:{height:"28px"},attrs:{src:"static/images/vertical-logo-white.svg",alt:e.$t("common.form.logo")}})])],1),e._v(" "),s("li",[s("router-link",{attrs:{to:{name:"Dashboard"}}},[s("i",{staticClass:"fa fa-fw mr-3 fa-tachometer"}),s("span",{staticClass:"sidebar-item-text"},[e._v(e._s(e.$t("pages.app.dashboard")))])])],1),e._v(" "),s("li",[s("router-link",{attrs:{to:{name:"Profile"}}},[s("i",{staticClass:"fa fa-fw mr-3 fa-street-view"}),s("span",{staticClass:"sidebar-item-text"},[e._v(e._s(e.$t("pages.app.profile")))])])],1),e._v(" "),e.$root.applicationStore.state.amDataEndpoints&&!1===this.$root.userStore.state.internalUser?s("li",[s("router-link",{attrs:{to:{name:"Sharing"}}},[s("i",{staticClass:"fa fa-fw mr-3 fa-share"}),s("span",{staticClass:"sidebar-item-text"},[e._v(e._s(e.$t("pages.app.sharing")))])])],1):e._e(),e._v(" "),e._l(this.$root.userStore.state.access,function(t,a){return[s("li",{key:"accessResource"+a},[s("router-link",{attrs:{to:{name:"ListResource",meta:{title:"User"},params:{resourceType:t.privilegePath.split("/")[0],resourceName:t.privilegePath.split("/")[1]}}}},[s("i",{class:e.accessIcon(t.icon)}),s("span",{staticClass:"sidebar-item-text"},[e._v(e._s(t.title))])])],1)]})],2)]),e._v(" "),s("div",{class:[{"fr-no-toolbar":this.$route.meta.hideToolbar}],attrs:{id:"appContentWrapper"}},[this.$route.meta.hideToolbar||null===this.$root.userStore.state.userId?e._e():s("b-navbar",{staticClass:"fr-main-navbar"},[s("b-nav-form",[s("b-button",{staticClass:"my-2 my-sm-0 p-0 fr-main-nav-toggle",attrs:{variant:"link",type:"button"},on:{click:e.onToggle}},[s("i",{staticClass:"fa fa-bars fa-lg m-0"})])],1),e._v(" "),this.$route.params.resourceName?s("b-navbar-brand",{staticClass:"ml-4"},[e._v(e._s(e._f("capitalize")(this.$route.params.resourceName)))]):e._e(),e._v(" "),s("b-navbar-nav",{staticClass:"ml-auto flex-row"},[s("fr-notification"),e._v(" "),s("b-nav-item-dropdown",{staticClass:"fr-main-dropdown",attrs:{right:""}},[s("template",{slot:"button-content"},[e._v("\n                            "+e._s(e.$t("pages.app.user"))+" "),s("b-img",{staticClass:"m-1",attrs:{src:"static/images/profile-default.png",rounded:"circle",width:"24",height:"24",alt:"img"}})],1),e._v(" "),s("b-dropdown-item",{attrs:{"active-class":"fr-no-active","exact-active-class":"fr-no-active",to:{name:"Profile"}}},[e._v(e._s(e.$t("pages.app.profile")))]),e._v(" "),this.$root.userStore.state.adminUser?s("b-dropdown-item",{attrs:{href:"/admin/"}},[e._v(e._s(e.$t("pages.app.admin")))]):e._e(),e._v(" "),s("b-dropdown-divider",{staticClass:"m-0"}),e._v(" "),s("b-dropdown-item",{on:{click:function(t){return t.preventDefault(),e.logoutUser()}}},[e._v(e._s(e.$t("pages.app.signOut")))])],2)],1)],1),e._v(" "),s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view",{key:this.$route.fullPath})],1)],1)]),e._v(" "),s("notifications",{attrs:{group:"IDMMessages",position:"bottom left",width:"320",duration:4e3},scopedSlots:e._u([{key:"body",fn:function(t){return[s("div",{class:[{"alert-success":"success"==t.item.type,"alert-warning":"warning"==t.item.type,"alert-danger":"error"==t.item.type,"alert-info":"info"==t.item.type},"alert","alert-dismissible","d-flex","p-3","pr-5","position-relative"],attrs:{role:"alert"}},[s("div",{class:[{"text-success":"success"==t.item.type,"text-warning":"warning"==t.item.type,"text-danger":"error"==t.item.type,"text-info":"info"==t.item.type},"alert-icon","mr-3","align-self-top"]},[s("i",{class:[{"fa-check-circle-o":"success"==t.item.type,"fa-exclamation-triangle":"warning"==t.item.type,"fa-times-circle":"error"==t.item.type,"fa-info-circle":"info"==t.item.type},"fa","fa-lg"]})]),e._v(" "),s("div",{staticClass:"fr-alert-content align-self-center"},[s("p",{staticClass:"mb-0 text-left",domProps:{innerHTML:e._s(t.item.text)}})]),e._v(" "),s("a",{staticClass:"close",on:{click:t.close}},[s("i",{staticClass:"fa fa-times"})])])]}}])})],1)},ie=[],re={render:ae,staticRenderFns:ie},oe=re,ne=s("VU/8"),le=i,ce=ne(se,oe,!1,le,null,null),ue=ce.exports,de=s("mtWM"),fe=s.n(de),pe=s("Tqaz"),me=s("CLX7"),he=s.n(me),ve=s("/ocq"),ge=s("YKmE"),be={name:"Center-Card",props:{showLogo:{type:Boolean,default:!1}}},ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"px-0 h-100 d-flex",attrs:{fluid:""}},[s("div",{staticClass:"fr-m-auto fr-center-card align-self-center"},[s("b-card",{staticClass:"border-xs-0 border-sm d-flex fr-stretch-card",attrs:{"no-body":"","header-tag":"header","footer-tag":"footer"}},[s("b-card-header",{staticClass:"d-flex align-items-center flex-fill"},[s("div",{staticClass:"d-flex flex-fill flex-column justify-content-center"},[e.showLogo?s("b-img",{staticClass:"fr-logo mb-3 mt-2",attrs:{src:"static/images/vertical-logo.svg",fluid:"",alt:e.$t("common.form.logo")}}):e._e(),e._v(" "),e._t("center-card-header")],2)]),e._v(" "),e._t("center-card-body"),e._v(" "),e._t("center-card-footer")],2)],1)])},_e=[],we={render:ye,staticRenderFns:_e},ke=we,Ce=s("VU/8"),Se=r,$e=Ce(be,ke,!1,Se,"data-v-20c2fe30",null),De=$e.exports,xe={name:"Validation-Error",props:["validatorErrors","fieldName"]},Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.validatorErrors.has(e.fieldName),expression:"validatorErrors.has(fieldName)"}],staticClass:"fr-validation-requirements text-left"},[s("span",{staticClass:"text-danger"},[e._v(e._s(e.validatorErrors.first(e.fieldName)))])])},Re=[],Ae={render:Pe,staticRenderFns:Re},qe=Ae,Ne=s("VU/8"),Te=o,Fe=Ne(xe,qe,!1,Te,"data-v-2ab1f6f4",null),Ee=Fe.exports,Ie={name:"Floating-Label-Input",components:{"fr-validation-error":Ee},props:{label:String,type:String,autofocus:String,fieldName:String,validateRules:[String,Object],reveal:Boolean,showErrorState:{type:Boolean,default:!0},defaultValue:{required:!1}},inject:["$validator"],data:function(){return{inputValue:"",id:null,floatLabels:!1,hideLabel:!0,inputType:this.type,show:!0}},beforeMount:function(){this.id="floatingLabelInput"+this._uid},mounted:function(){var e=this;B.a.delay(B.a.bind(function(){navigator.userAgent.indexOf("Edge")>=0?document.getElementById(""+e.id).value.length&&(e.floatLabels=!0,e.inputValue=document.getElementById(""+e.id).value):navigator.userAgent.indexOf("Chrome")>=0&&document.querySelectorAll("#"+e.id+":-webkit-autofill").length>0&&(e.floatLabels=!0),e.hideLabel=!1},this),400),this.defaultValue&&(this.inputValue=this.defaultValue),"true"===this.autofocus&&this.$refs.input.focus()},methods:{revealText:function(){"password"===this.inputType?(this.inputType="text",this.show=!1):(this.inputType="password",this.show=!0)}},watch:{inputValue:function(e){this.floatLabels=e.length>0,this.$emit("input",e)}}},Ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mb-3"},[s("div",{ref:"floatingLabelGroup",class:[{"form-label-password":e.reveal},"form-label-group","mb-0"]},["checkbox"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"},{name:"validate",rawName:"v-validate",value:e.validateRules,expression:"validateRules"}],ref:"input",class:[{polyfillPlaceholder:e.floatLabels,"is-invalid":e.errors.has(e.fieldName)&&e.showErrorState},"form-control"],attrs:{id:e.id,autofocus:e.autofocus,placeholder:e.label,"data-vv-as":e.label,"data-vv-validate-on":"submit",name:e.fieldName,type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{change:function(t){var s=e.inputValue,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=e._i(s,null);a.checked?r<0&&(e.inputValue=s.concat([null])):r>-1&&(e.inputValue=s.slice(0,r).concat(s.slice(r+1)))}else e.inputValue=i}}}):"radio"===e.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"},{name:"validate",rawName:"v-validate",value:e.validateRules,expression:"validateRules"}],ref:"input",class:[{polyfillPlaceholder:e.floatLabels,"is-invalid":e.errors.has(e.fieldName)&&e.showErrorState},"form-control"],attrs:{id:e.id,autofocus:e.autofocus,placeholder:e.label,"data-vv-as":e.label,"data-vv-validate-on":"submit",name:e.fieldName,type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{change:function(t){e.inputValue=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"},{name:"validate",rawName:"v-validate",value:e.validateRules,expression:"validateRules"}],ref:"input",class:[{polyfillPlaceholder:e.floatLabels,"is-invalid":e.errors.has(e.fieldName)&&e.showErrorState},"form-control"],attrs:{id:e.id,autofocus:e.autofocus,placeholder:e.label,"data-vv-as":e.label,"data-vv-validate-on":"submit",name:e.fieldName,type:e.inputType},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}}),e._v(" "),e.reveal?s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.revealText}},[s("i",{class:[{"fa-eye-slash":!e.show},{"fa-eye":e.show},"fa"]})])]):e._e(),e._v(" "),s("label",{attrs:{hidden:e.hideLabel,for:e.id}},[e._v(e._s(e.label))])]),e._v(" "),e._t("validationError",[s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:e.fieldName}})])],2)},Me=[],Ve={render:Ue,staticRenderFns:Me},je=Ve,Oe=s("VU/8"),Le=n,ze=Oe(Ie,je,!1,Le,"data-v-50a9a487",null),Be=ze.exports,He={name:"Selfservice-API",methods:{loadData:function(){var e=this;this.getRequestService({headers:this.getAnonymousHeaders()}).get("/selfservice/"+this.apiType).then(function(t){e.setChildComponent(t.data.type,t.data)}).catch(function(t){B.a.has(e.$router.currentRoute,"params.profileProcess")?e.$router.push("/login"):e.displayNotification("error",t.response.data.message)})},advanceStage:function(e,t){var s=this,a=this.getAnonymousHeaders();t&&!this.$root.applicationStore.state.authHeaders&&(a={"X-OpenIDM-NoSession":!1,"X-OpenIDM-Password":null,"X-OpenIDM-Username":null});var i=this.getRequestService({headers:B.a.extend(a,{"X-Requested-With":"XMLHttpRequest"})}),r={input:{}};this.selfServiceDetails&&this.selfServiceDetails.token&&(r.token=this.selfServiceDetails.token),e.token&&e.code&&(r.token=e.token),r.input=e,this.showSelfService&&(this.showSelfService=!1),i.post("/selfservice/"+this.apiType+"?_action=submitRequirements",r).then(function(e){s.setChildComponent(e.data.type,e.data)}).catch(function(e){B.a.isUndefined(s.apiErrorCallback)||s.apiErrorCallback(e)})},parseQueryParams:function(e){return e.match("returnParams")?{returnParams:B.a.last(decodeURIComponent(e).split("returnParams="))}:JSON.parse("{\n                        "+decodeURI('"'+e.slice(1).replace(/&/g,'","').replace(/=/g,'":"'))+'"\n                    }')}}},Xe=s("VU/8"),Ge=Xe(He,null,!1,null,null,null),We=Ge.exports,Qe={name:"Social-Buttons",props:{signin:{type:Boolean,default:!1},filterProviders:{type:Array,default:function(){return[]}},filterProvidersObjects:{type:Array,default:function(){return[]}}},data:function(){return{providers:[],socialButtonStyles:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;this.getRequestService({headers:this.getAnonymousHeaders()}).get("/authentication").then(function(t){e.providers=B.a.filter(t.data.providers||[],function(t,s){if(0===e.filterProviders.length||B.a.includes(e.filterProviders,t.provider))return!0}),e.providers.length?B.a.each(e.providers,function(t,s){"OPENAM"===t.provider&&1===e.providers.length?window.location.search||!0!==e.signin?e.providers.splice(s-1,1):e.goToIDP("OPENAM"):e.$set(e.socialButtonStyles,s,t.uiConfig.buttonCustomStyle),"salesforce"===t.provider&&(t.uiConfig.iconClass="fa-salesforce")}):e.filterProvidersObjects.length&&(e.providers=e.filterProvidersObjects)}).catch(function(t){e.displayNotification("error",t.response.data.message)})},hover:function(e,t){this.$set(this.socialButtonStyles,e,t)},goToIDP:function(e){var t=this,s=this.getRequestService({headers:this.getAnonymousHeaders()});s.post("/authentication?_action=logout").then(function(){s.post("/identityProviders?_action=getAuthRedirect",{provider:e,landingPage:window.location.protocol+"/"+window.location.host+"/#/login?_oauthReturn=true&provider="+e+"&gotoURL=%23"}).then(function(e){localStorage.setItem("dataStoreToken",e.data.token),window.location.href=e.data.redirect}).catch(function(e){t.displayNotification("error",e.response.data.message)})}).catch(function(e){t.displayNotification("error",e.response.data.message)})}}},Ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.providers.length?s("div",[e._l(e.providers,function(t,a){return t.uiConfig?s("button",{key:a,staticClass:"btn btn-lg btn-light btn-block fr-btn-social mb-3",style:e.socialButtonStyles[a],attrs:{type:"button"},on:{click:function(s){return e.goToIDP(t.provider)},mouseover:function(s){return e.hover(a,t.uiConfig.buttonCustomStyleHover)},mouseout:function(s){return e.hover(a,t.uiConfig.buttonCustomStyle)}}},[t.uiConfig.buttonImage?s("img",{attrs:{src:"static/"+t.uiConfig.buttonImage}}):s("i",{class:["fa fa-lg",t.uiConfig.iconClass]}),e._v(" "),e.signin?s("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("pages.selfservice.social.signIn"))+" "+e._s(t.uiConfig.buttonDisplayName))]):s("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("pages.selfservice.social.signUp"))+" "+e._s(t.uiConfig.buttonDisplayName))])]):e._e()}),e._v(" "),0===this.filterProviders.length?s("div",{staticClass:"fr-form-break text-muted mb-3"},[s("div"),e._v(" "),s("div",[e._v(e._s(e.$t("pages.selfservice.social.or")))]),e._v(" "),s("div")]):e._e()],2):e._e()},Ke=[],Je={render:Ye,staticRenderFns:Ke},Ze=Je,et=s("VU/8"),tt=l,st=et(Qe,Ze,!1,tt,null,null),at=st.exports,it=s("hvFc"),rt=s.n(it),ot={components:{BounceLoader:ge.BounceLoader,"fr-center-card":De,"fr-floating-label-input":Be,"fr-social-buttons":at},data:function(){return{apiType:"socialUserClaim",loadingColor:rt.a.baseColor,selfServiceDetails:{},password:"",passwordVerification:!1,socialVerification:!1,providers:[],providersObjects:[],mail:""}},mixins:[We],name:"Account-Claiming",props:["clientToken","originalToken","returnParams"],mounted:function(){if(localStorage.getItem("accountClaimingToken")){var e=localStorage.getItem("accountClaimingToken");localStorage.removeItem("accountClaimingToken"),this.claimAccount(e)}else this.loadData()},computed:{socialDescription:function(){var e=this,t=this.providers.length,s="";return B.a.each(this.providers,function(a,i){s+=1===t?B.a.upperFirst(a):i<t-2?B.a.upperFirst(a)+", ":i<t-1?B.a.upperFirst(a)+" ":" "+e.$t("pages.selfservice.social.or")+" "+B.a.upperFirst(a)}),this.$t("pages.selfservice.accountClaiming.socialDesc",{providers:s})}},methods:{claimAccount:function(e){var t=this.clientToken;B.a.isString(e)&&(t=e),this.advanceStage({clientToken:t,password:this.password})},apiErrorCallback:function(e){this.$router.push("/login"),this.displayNotification("error",e.response.data.message)},setChildComponent:function(e,t){var s=this;if(this.selfServiceDetails=t,"parameters"===e)this.returnParams?this.advanceStage({returnParams:this.returnParams}):this.advanceStage({});else if("socialUserClaim"===e&&"initial"===t.tag)this.advanceStage({clientToken:this.clientToken});else if("socialUserClaim"===e&&"verifyProfile"===t.tag)this.mail=B.a.has(t,"requirements.mail")?t.requirements.mail:"",t.requirements.error?this.displayNotification("error",t.requirements.error.message):-1!==t.requirements.required.indexOf("password")?this.passwordVerification=!0:this.clientToken&&this.originalToken?this.advanceStage({clientToken:this.originalToken}):(localStorage.setItem("accountClaimingToken",this.clientToken),this.providers=B.a.map(t.requirements.definitions.providers.items.oneOf,"provider"),this.providersObjects=t.requirements.definitions.providers.items.oneOf,this.socialVerification=!0);else if("localAutoLogin"!==e&&"openAMAutoLogin"!==e||!B.a.isUndefined(t.additions.claimedProfile))if("end"===t.tag&&t.status.success){var a=this.getRequestService({headers:{"X-OpenIDM-NoSession":"false","X-OpenIDM-OAuth-Login":"true","X-OpenIDM-DataStoreToken":sessionStorage.getItem("amSocialToken")||this.clientToken,"X-Requested-With":"XMLHttpRequest"}});sessionStorage.removeItem("amSocialToken"),a.post("/authentication?_action=login").then(function(e){s.progressiveProfileCheck(e,function(){B.a.has(t,"additions.successUrl")&&!B.a.isEmpty(t.additions.successUrl)?window.location=t.additions.successUrl:s.$router.push("/"),s.displayNotification("success",s.$t("pages.selfservice.accountClaiming.linked"))})}).catch(function(e){s.$router.push("/login"),s.displayNotification("error",e.response.data.message)})}else this.$router.push("/login"),this.displayNotification("error",this.$t("pages.selfservice.accountClaiming.error"));else if(sessionStorage.getItem("amSocialToken")){var i=sessionStorage.getItem("amSocialToken");this.$router.push({name:"Registration",params:{clientToken:i}})}else this.$router.push({name:"Registration",params:{clientToken:this.clientToken}})}}},nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.passwordVerification||e.socialVerification?s("fr-center-card",{attrs:{showLogo:!0}},[s("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[s("h2",{staticClass:"h2"},[e._v(e._s(e.$t("pages.selfservice.accountClaiming.title")))]),e._v(" "),e.passwordVerification?s("span",{domProps:{innerHTML:e._s(e.$t("pages.selfservice.accountClaiming.passwordDesc",{account:e.mail}))}}):e._e(),e._v(" "),e.socialVerification?s("span",[e._v(e._s(e.socialDescription))]):e._e()]),e._v(" "),s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[e.passwordVerification?s("fr-floating-label-input",{attrs:{label:e.$t("pages.login.password"),reveal:!0,type:"password",fieldName:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e(),e._v(" "),e.socialVerification?s("fr-social-buttons",{attrs:{filterProviders:e.providers,filterProvidersObjects:e.providersObjects,signin:""}}):e._e(),e._v(" "),e.passwordVerification?s("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"button"},on:{click:e.claimAccount}},[e._v(e._s(e.$t("pages.login.signIn")))]):e._e()],1),e._v(" "),s("b-card-footer",{attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[s("router-link",{attrs:{action:"",to:"login"}},[e._v(e._s(e.$t("pages.selfservice.accountClaiming.return")))])],1)],1):s("b-container",{staticClass:"h-100 px-0",attrs:{fluid:""}},[s("div",{staticClass:"h-100 d-flex"},[s("div",{staticClass:"m-auto fr-center-card"},[s("bounce-loader",{attrs:{color:e.loadingColor}})],1)])])},lt=[],ct={render:nt,staticRenderFns:lt},ut=ct,dt=s("VU/8"),ft=c,pt=dt(ot,ut,!1,ft,"data-v-3f1cd250",null),mt=pt.exports,ht={name:"Welcome-Widget",props:["userDetails","widgetDetails"],data:function(){return{}},mounted:function(){},methods:{openProfile:function(){this.$router.push({name:"Profile",params:{openProfile:!this.$root.userStore.state.internalUser}})}},computed:{fullName:function(){var e="";return e=this.userDetails.givenName.length>0||this.userDetails.sn.length>0?B.a.startCase(this.userDetails.givenName+" "+this.userDetails.sn):this.userDetails.userId,e}}},vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-jumbotron",{staticClass:"text-center"},[s("template",{slot:"header"},[s("b-img",{staticClass:"m-1 mb-3",attrs:{src:"static/images/profile-default.png",rounded:"circle",width:"112",height:"112",alt:"img"}}),e._v(" "),s("div",[e._v(e._s(e.$t("pages.dashboard.widgets.welcome.greeting"))+", "+e._s(e.fullName))])],1),e._v(" "),s("template",{slot:"lead"},[s("div",[e._v("\n            "+e._s(e.$t("pages.dashboard.widgets.welcome.welcomeMessage"))+"\n        ")]),e._v(" "),s("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:function(t){return e.openProfile()}}},[e._v("\n            "+e._s(e.$t("pages.dashboard.widgets.welcome.editProfile"))+"\n        ")])],1)],2)},gt=[],bt={render:vt,staticRenderFns:gt},yt=bt,_t=s("VU/8"),wt=u,kt=_t(ht,yt,!1,wt,"data-v-1a93642e",null),Ct=kt.exports,St=s("d7EF"),$t=s.n(St),Dt={name:"List-Group",props:{title:{type:String},subtitle:{type:String}},data:function(){return{}}},xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-card",{staticClass:"mb-3",attrs:{"no-body":""}},[e._t("list-group-header",[s("b-card-body",{staticClass:"py-4"},[s("h5",{class:[{"mb-4":e.subtitle,"mb-0":!e.subtitle},"card-title"]},[e._v(e._s(e.title))]),e._v(" "),e.subtitle?s("h6",{staticClass:"card-subtitle mb-0 text-muted"},[e._v(e._s(e.subtitle))]):e._e()])]),e._v(" "),s("b-list-group",{attrs:{flush:""}},[e._t("default")],2)],2)},Pt=[],Rt={render:xt,staticRenderFns:Pt},At=Rt,qt=s("VU/8"),Nt=d,Tt=qt(Dt,At,!1,Nt,"data-v-4ca45726",null),Ft=Tt.exports,Et={name:"List-Item",props:{collapsible:{type:Boolean,default:!1},panelShown:{type:Boolean,default:!1},hoverItem:{type:Boolean,default:!1}},data:function(){return{id:null}},beforeMount:function(){this.id="listItem"+this._uid},computed:{toggleId:function(){if(this.collapsible)return this.id}}},It=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.collapsible?s("div",{staticClass:"collapsible"},[s("b-list-group-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.toggleId,expression:"toggleId"}],class:[{"list-item-cursor":!1===e.collapsible}],attrs:{href:"#"}},[s("div",{staticClass:"media"},[e._t("list-item-header")],2)]),e._v(" "),s("b-collapse",{attrs:{id:e.id,visible:e.panelShown},on:{hide:function(t){return e.$emit("hide")},show:function(t){return e.$emit("show")},hidden:function(t){return e.$emit("hidden")},shown:function(t){return e.$emit("shown")}}},[s("b-card-body",{staticClass:"pt-3"},[e._t("list-item-collapse-body")],2)],1)],1):s("div",{class:[{"fr-hover-item":e.hoverItem}],on:{click:function(t){return e.$emit("row-click")}}},[s("b-list-group-item",{staticClass:"noncollapse"},[s("div",{staticClass:"media"},[e._t("list-item-header")],2)]),e._v(" "),e.panelShown?s("b-card-body",{staticClass:"pt-3"},[e._t("list-item-collapse-body")],2):e._e()],1)},Ut=[],Mt={render:It,staticRenderFns:Ut},Vt=Mt,jt=s("VU/8"),Ot=f,Lt=jt(Et,Vt,!1,Ot,"data-v-5bf5f8bc",null),zt=Lt.exports,Bt=s("fZjL"),Ht=s.n(Bt),Xt={name:"Generic-Task",props:["variables","taskFields","processFields"],data:function(){var e=this,t=[],s={},a=B.a.omit(B.a.clone(this.variables),["approverId","initiatorId","openidmObjectId"]);return B.a.each(this.taskFields.formPropertyHandlers,function(i,r){var o={key:i._id,name:i.name,value:e.variables[i._id],type:i.type.name,readOnly:!i.writable};"enum"===i.type.name&&(o.options=i.type.values,B.a.isUndefined(o.value)&&i.type.values&&(o.value=Ht()(i.type.values)[0],s[i._id]=o.value)),B.a.isUndefined(s[i._id])&&(s[i._id]=e.variables[i._id]),t.push(o),delete a[i._id]}),{formFields:t,readOnlyFields:a,formValues:s}},filters:{capitalize:function(e){return B.a.capitalize(e)}}},Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-row",[s("b-col",[e._l(e.readOnlyFields,function(t,a){return[s("b-form-group",{key:a,attrs:{label:e._f("capitalize")(a),"label-for":"field",horizontal:""}},[s("b-form-input",{attrs:{horizontal:"",type:"text",readonly:!0,plaintext:!0,value:t}})],1)]}),e._v(" "),e._l(e.formFields,function(t,a){return["string"===t.type||"number"===t.type?s("b-form-group",{key:t.name+a,attrs:{label:t.name,"label-for":"field.key",horizontal:""}},[s("b-form-input",{attrs:{horizontal:"",type:"text",plaintext:t.readOnly,name:t.key,value:e.formValues[t.key]},model:{value:e.formValues[t.key],callback:function(s){e.$set(e.formValues,t.key,s)},expression:"formValues[field.key]"}})],1):"boolean"===t.type?s("b-form-group",{key:t.name+a},[s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.name}},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,disabled:t.readOnly,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formValues[t.key],callback:function(s){e.$set(e.formValues,t.key,s)},expression:"formValues[field.key]"}})],1)])]):"enum"===t.type?s("b-form-group",{key:t.name+a},[s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.name}},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("b-form-select",{staticClass:"mb-3",attrs:{options:t.options},model:{value:e.formValues[t.key],callback:function(s){e.$set(e.formValues,t.key,s)},expression:"formValues[field.key]"}})],1)])]):e._e()]})],2)],1),e._v(" "),s("div",{staticClass:"float-right mt-4"},[s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(t){return e.$emit("submit",e.formValues)}}},[e._v(e._s(e.$t("common.form.save")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.$t("common.form.cancel")))])],1)],1)},Wt=[],Qt={render:Gt,staticRenderFns:Wt},Yt=Qt,Kt=s("VU/8"),Jt=Kt(Xt,Yt,!1,null,null,null),Zt=Jt.exports,es={name:"Task",props:["taskInstance"],data:function(){return{showGenericTask:!1,loadingColor:rt.a.baseColor}},components:{"clip-loader":ge.ClipLoader,GenericTask:Zt},computed:{process:function(){return this.taskInstance.process},processDefinition:function(){return null===this.process.processDefinition&&this.$emit("loadProcess",this.process),this.process.processDefinition},formProperties:function(){return this.processDefinition?this.processDefinition.formProperties:[]},task:function(){return this.taskInstance.task},taskDetails:function(){var e=this;return this.formProperties.reduce(function(t,s){return t.concat({_id:s._id,name:s.name,value:e.task.variables[s._id]})},[])},variables:function(){return B.a.get(this,"task.variables")},taskForm:function(){var e=this.task.taskDefinition.formGenerationTemplate,t=e?Function("return "+e):null;return B.a.isNull(t)?(this.showGenericTask=!0,null):t()}},methods:{submit:function(e){this.$emit("completeTask",{id:this.task._id,formData:e})},cancel:function(){this.$emit("cancel",this.task._id)}}},ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade",mode:"out-in",duration:"250"}},[null!==e.processDefinition&&!1===e.showGenericTask?s(e.taskForm,{tag:"component",attrs:{processDefinition:e.processDefinition,taskDefinition:e.task,variables:e.variables},on:{submit:e.submit,cancel:e.cancel}}):!0===e.showGenericTask&&null!==e.processDefinition?s("GenericTask",{attrs:{variables:e.taskInstance.task.variables,"task-fields":e.taskInstance.task.taskDefinition.formProperties,"process-fields":e.taskInstance.task.formProperties},on:{submit:e.submit,cancel:e.cancel}}):s("clip-loader",{staticClass:"m-auto",attrs:{color:e.loadingColor}})],1)},ss=[],as={render:ts,staticRenderFns:ss},is=as,rs=s("VU/8"),os=rs(es,is,!1,null,null,null),ns=os.exports,ls={name:"My-Tasks",props:{tasks:Object},data:function(){return{panelShown:{},onHidden:null}},components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-task":ns},methods:{setShown:function(e){this.$set(this.panelShown,e,!0)},setHidden:function(e){this.$set(this.panelShown,e,!1),B.a.isFunction(this.onHidden)&&(this.onHidden(),this.onHidden=null)},cancel:function(e){B.a.first(this.$refs["cancel-"+e]).click()},requeue:function(e){var t=this.tasks[e].task,s={id:e,task:t,assignee:null};this.update(e,"updateAssignment",s)},completeTask:function(e){this.update(e.id,"completeTask",e)},update:function(e,t,s){var a=this,i=function(){a.$emit(t,s)};this.panelShown[e]?(this.onHidden=i,this.cancel(e)):i()},isEmpty:B.a.isEmpty,first:B.a.first},watch:{tasks:{handler:function(e,t){var s=this,a=B.a.difference(B.a.keys(e),B.a.keys(t));B.a.isUndefined(this.panelShown)&&(this.panelShown={}),a.forEach(function(e){s.$set(s.panelShown,e,!1)})},deep:!0}}},cs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fr-list-group",{attrs:{title:this.$t("pages.workflow.myTasks")}},[e.isEmpty(e.tasks)?s("fr-list-item",[s("div",{staticClass:"text-muted text-center w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[e._v("\n                "+e._s(e.$t("pages.workflow.noAssignedTasks"))+"\n            ")])]):[s("transition-group",{attrs:{name:"fade",mode:"out-in"}},e._l(e.tasks,function(t,a){return s("fr-list-item",{key:"myTask_"+a,ref:"collapse-"+a,refInFor:!0,attrs:{collapsible:!0},on:{shown:function(t){return e.setShown(a)},hidden:function(t){return e.setHidden(a)}}},[s("div",{staticClass:"d-inline-flex w-100 media",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"media-body align-self-center"},[s("h6",[e._v(e._s(t.name))])]),e._v(" "),e.isEmpty(t.task.candidates.candidateGroups)?e._e():s("div",{staticClass:"btn btn-sm btn-link float-right",on:{click:function(t){return t.stopPropagation(),e.requeue(a)}}},[e._v(e._s(e.$t("pages.workflow.requeue")))]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center"},[s("div",{ref:"cancel-"+a,refInFor:!0,staticClass:"btn btn-sm btn-link float-right btn-cancel"},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("div",{staticClass:"btn btn-sm btn-link float-right btn-edit"},[e._v(e._s(e.$t("common.form.edit")))])])]),e._v(" "),s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("fr-task",{ref:a,refInFor:!0,attrs:{taskInstance:t},on:{loadProcess:function(t){return e.$emit("loadProcess",t)},cancel:e.cancel,completeTask:e.completeTask}})],1)])}),1)]],2)],1)},us=[],ds={render:cs,staticRenderFns:us},fs=ds,ps=s("VU/8"),ms=p,hs=ps(ls,fs,!1,ms,"data-v-6417540c",null),vs=hs.exports,gs={name:"Assign-Task",props:["taskDefinition"],data:function(){return{workflowService:null,selected:this.$root.userStore.state.userName}},computed:{process:function(){return this.taskDefinition.process},processDefinition:function(){return null===this.process.processDefinition&&this.$emit("loadProcess",this.process),this.process.processDefinition},formProperties:function(){return this.processDefinition&&this.processDefinition.formProperties?this.processDefinition.formProperties:[]},task:function(){return this.taskDefinition.task},id:function(){return this.task._id},taskDetails:function(){var e=this;return this.formProperties?this.formProperties.reduce(function(t,s){return t.concat({_id:s._id,name:s.name,value:e.task.variables[s._id]})},[]):[]},assigneeOptions:function(){var e=this,t=this.$root.userStore.state.userName;return B.a.isEmpty(this.task.usersToAssign)?[{value:t,text:this.$t("pages.workflow.me")}]:this.task.usersToAssign.map(function(s){var a=s.username,i=s.displayableName;return{value:a,text:a===t?e.$t("pages.workflow.me"):i}})}},methods:{assignTask:function(){this.$emit("assignTask",{id:this.id,assignee:this.selected})}}},bs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-card-body",{staticClass:"pt-3"},[s("b-row",[s("b-col",{attrs:{lg:"8","offset-lg":"1"}},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-2 col-form-label"},[e._v(e._s(e.$t("pages.workflow.assignTo")))]),e._v(" "),s("div",{staticClass:"col-sm-10"},[s("div",{staticClass:"d-flex"},[s("b-form-select",{staticClass:"mb-3 mr-2",attrs:{options:e.assigneeOptions},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),s("b-button",{staticClass:"mb-3 d-flex align-self-end",attrs:{type:"button",variant:"primary"},on:{click:e.assignTask}},[e._v(e._s(e.$t("pages.workflow.assign")))])],1)])]),e._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-2 col-form-label"},[e._v("Details")]),e._v(" "),s("div",{staticClass:"col-sm-10"},[s("b-card",[s("dl",{staticClass:"row m-0"},[e._l(e.taskDetails,function(t){return[s("dt",{staticClass:"col-6"},[e._v(e._s(t.name))]),e._v(" "),s("dd",{staticClass:"col-6"},[e._v(e._s(t.value)+" ")])]})],2)])],1)])])],1)],1)},ys=[],_s={render:bs,staticRenderFns:ys},ws=_s,ks=s("VU/8"),Cs=ks(gs,ws,!1,null,null,null),Ss=Cs.exports,$s={name:"Group-Tasks",props:{tasks:Object},data:function(){return{panelShown:{},onHidden:null}},components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-assign-task":Ss},methods:{isEmpty:B.a.isEmpty,first:B.a.first,setShown:function(e){this.$set(this.panelShown,e,!0)},setHidden:function(e){this.$set(this.panelShown,e,!1),B.a.isFunction(this.onHidden)&&(this.onHidden(),this.onHidden=null)},cancel:function(e){B.a.first(this.$refs["cancel-"+e]).click()},assignTask:function(e){var t=this,s=e.id,a=e.assignee,i=this.tasks[s].task;this.onHidden=function(){t.$emit("updateAssignment",{assignee:a,id:s,task:i})},this.cancel(s)}},watch:{tasks:{handler:function(e,t){var s=this,a=B.a.difference(B.a.keys(e),B.a.keys(t));B.a.isUndefined(this.panelShown)&&(this.panelShown={}),a.forEach(function(e){s.$set(s.panelShown,e,!1)})},deep:!0}}},Ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fr-list-group",{attrs:{title:this.$t("pages.workflow.unassignedTasks")}},[e.isEmpty(e.tasks)?s("fr-list-item",[s("div",{staticClass:"text-muted text-center w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[e._v("\n                "+e._s(e.$t("pages.workflow.noGroupTasks"))+"\n            ")])]):[s("transition-group",{attrs:{name:"fade",mode:"out-in"}},e._l(e.tasks,function(t,a){return s("fr-list-item",{key:"groupTask_"+a,ref:"collapse-"+a,refInFor:!0,attrs:{collapsible:!0},on:{shown:function(t){return e.setShown(a)},hidden:function(t){return e.setHidden(a)}}},[s("div",{staticClass:"d-inline-flex w-100 media",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"media-body align-self-center"},[s("h6",{staticClass:"mb-1 mt-2"},[e._v(e._s(t.name))]),e._v(" "),s("small",{staticClass:"text-muted d-block mb-2"},[e._v(e._s(e.$t("pages.workflow.notAssigned")))])]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center"},[s("div",{ref:"cancel-"+a,refInFor:!0,staticClass:"btn btn-sm btn-link float-right btn-cancel"},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("div",{staticClass:"btn btn-sm btn-link float-right btn-edit"},[e._v(e._s(e.$t("pages.workflow.assign")))])])]),e._v(" "),s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("fr-assign-task",{attrs:{taskDefinition:t},on:{loadProcess:function(t){return e.$emit("loadProcess",t)},assignTask:e.assignTask}})],1)])}),1)]],2)],1)},xs=[],Ps={render:Ds,staticRenderFns:xs},Rs=Ps,As=s("VU/8"),qs=m,Ns=As($s,Rs,!1,qs,"data-v-77b18047",null),Ts=Ns.exports,Fs={name:"Generic-Process",props:["workflowDetails","id"],data:function(){var e=[],t={_processDefinitionId:this.id};return B.a.each(this.workflowDetails,function(s){var a=B.a.lowerCase(s.name);e.push({name:s.name,key:a,type:s.type.name,value:s.type.value}),"boolean"===s.type.name?t[a]=!1:"number"===s.type.name?t[a]=0:"string"===s.type.name&&(t[a]="")}),{formFields:e,formValues:t}},methods:{resetForm:function(){var e=this;B.a.each(this.formValues,function(t,s){B.a.isNumber(t)?e.formValues[s]=0:B.a.isBoolean(t)?e.formValues[s]=!1:e.formValues[s]=""})}}},Es=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-row",[s("b-col",[e._l(e.formFields,function(t,a){return["string"===t.type||"number"===t.type?s("b-form-group",{key:t.name+a,attrs:{label:t.name,"label-for":"field.key",horizontal:""}},[s("b-form-input",{attrs:{horizontal:"",type:"text",name:t.key},model:{value:e.formValues[t.key],callback:function(s){e.$set(e.formValues,t.key,s)},expression:"formValues[field.key]"}})],1):e._e(),e._v(" "),"boolean"===t.type?s("b-form-group",{key:t.name+a},[s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.name}},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formValues[t.key],callback:function(s){e.$set(e.formValues,t.key,s)},expression:"formValues[field.key]"}})],1)])]):e._e()]})],2)],1),e._v(" "),s("div",{staticClass:"float-right mt-4"},[s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(t){return e.$emit("submit",e.formValues)}}},[e._v(e._s(e.$t("common.form.save")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.$t("common.form.cancel")))])],1)],1)},Is=[],Us={render:Es,staticRenderFns:Is},Ms=Us,Vs=s("VU/8"),js=Vs(Fs,Ms,!1,null,null,null),Os=js.exports,Ls={name:"Workflow-Process",components:{"clip-loader":ge.ClipLoader,GenericProcess:Os},props:{processDefinition:{types:[Object,null],required:!0},task:Object},data:function(){return{genericWorkflow:!1,loadingColor:rt.a.baseColor}},computed:{startForm:function(){return this.processDefinition.formGenerationTemplate?Function('"use strict"; return '+this.processDefinition.formGenerationTemplate)():(this.genericWorkflow=!0,null)}},methods:{cancel:function(){this.reset(),this.$emit("cancel",this.processDefinition._id)},reset:function(e){this.$refs.startFormComponent.resetForm()},submit:function(e){this.$emit("startProcess",e)}}},zs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade",mode:"out-in",duration:"250"}},[null!==e.processDefinition&&!1===e.genericWorkflow?s(e.startForm,{ref:"startFormComponent",tag:"component",attrs:{processDefinition:e.processDefinition,isTask:e.task},on:{submit:e.submit,cancel:e.cancel}}):null!==e.processDefinition&&!0===e.genericWorkflow?s("GenericProcess",{ref:"startFormComponent",attrs:{id:e.processDefinition._id,"workflow-details":e.processDefinition.formProperties},on:{submit:e.submit,cancel:e.cancel}}):s("clip-loader",{staticClass:"m-auto",attrs:{color:e.loadingColor}})],1)},Bs=[],Hs={render:zs,staticRenderFns:Bs},Xs=Hs,Gs=s("VU/8"),Ws=Gs(Ls,Xs,!1,null,null,null),Qs=Ws.exports,Ys={name:"Processes",props:{processes:{type:Object,default:function(){return{}}}},data:function(){return{loadingColor:rt.a.baseColor}},components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-process":Qs,BounceLoader:ge.BounceLoader},methods:{isEmpty:z.isEmpty,reset:function(e){var t=Object(z.first)(this.$refs[e]);t&&t.reset()},cancel:function(e){var t=Object(z.first)(this.$refs["cancel-"+e]);t&&(this.reset(e),t.click())}}},Ks=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fr-list-group",{attrs:{title:this.$t("pages.workflow.startProcess")}},[e.isEmpty(e.processes)?s("fr-list-item",[s("div",{staticClass:"text-muted text-center w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[e._v("\n                "+e._s(e.$t("pages.workflow.noProcess"))+"\n            ")])]):e._l(e.processes,function(t,a){return s("fr-list-item",{key:a,attrs:{collapsible:!0},on:{hide:function(t){return e.reset(a)},show:function(s){return e.$emit("loadProcess",t)}}},[s("div",{staticClass:"d-inline-flex w-100 media",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"media-body align-self-center"},[s("h6",[e._v(e._s(t.name))])]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center"},[s("div",{ref:"cancel-"+a,refInFor:!0,staticClass:"btn btn-sm btn-link float-right btn-cancel"},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("div",{staticClass:"btn btn-sm btn-link float-right btn-edit"},[e._v(e._s(e.$t("pages.workflow.start")))])])]),e._v(" "),s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("fr-process",{ref:a,refInFor:!0,attrs:{processDefinition:t.processDefinition},on:{cancel:e.cancel,startProcess:function(t){return e.$emit("startProcess",t)}}})],1)])})],2)],1)},Js=[],Zs={render:Ks,staticRenderFns:Js},ea=Zs,ta=s("VU/8"),sa=h,aa=ta(Ys,ea,!1,sa,"data-v-551caad6",null),ia=aa.exports,ra={name:"Workflow-Control-Widget",components:{MyTasks:vs,GroupTasks:Ts,Processes:ia},props:["userDetails","widgetDetails"],data:function(){return{workflowService:null,assignedTasks:{},availableTasks:{},processes:{}}},created:function(){this.workflowService=this.getRequestService(),this.loadData()},methods:{completeTask:function(e){var t=this,s=e.id,a=e.formData;return this.workflowService.post("/workflow/taskinstance/"+s+"?_action=complete",a,{headers:{Accept:"application/json, text/javascript, */*; q=0.01"}}).then(function(e){t.displayNotification("success",t.$t("pages.workflow.taskSuccessfullyCompleted")),t.$delete(t.assignedTasks,s)}).then(this.loadData).catch(function(e){403===e.response.data.code?(t.displayNotification("error",t.$t("pages.workflow.taskNoLongerAvailable",{taskName:t.assignedTasks[s].name})),t.$delete(t.assignedTasks,s),t.loadTasks()):t.displayNotification("error",e.response.data.message)})},updateAssignment:function(e){var t=this,s=e.id,a=e.task,i=e.assignee;return this.workflowService.put("/workflow/taskinstance/"+a._id,{assignee:i},{headers:{"If-Match":'"*"'}}).then(function(e){t.displayNotification("success",t.$t("pages.workflow.assignmentSuccess",{taskName:a.name,assignee:i})),t.$delete(t.assignedTasks,s),t.$delete(t.availableTasks,s)}).then(this.loadData).catch(function(e){403===e.response.data.code?(t.displayNotification("error",t.$t("pages.workflow.taskNoLongerAvailable",{taskName:t.availableTasks[s].name})),t.$delete(t.availableTasks,s),t.loadTasks()):t.displayNotification("error",e.response.data.message)})},startProcess:function(e){var t=this;return this.workflowService.post("/workflow/processinstance/?_action=create",e).then(function(s){t.displayNotification("success",t.$t("pages.workflow.processStartSuccessMessage")),t.$refs.processes.cancel(e._processDefinitionId)}).then(this.loadData).catch(function(e){t.displayNotification("error",e.response.data.message)})},loadProcessDefinition:function(e){var t=this;e.fetchProcessDefinition().then(function(s){var a=s.data;t.$set(e,"processDefinition",a)}).catch(function(e){t.displayNotification("error",e.reponse.data.message)})},loadProcesses:function(){var e=this;return this.workflowService.get("/endpoint/getprocessesforuser").then(function(e){return e.data.processes}).then(function(t){return fe.a.all(t.map(function(t){var s=function(){return e.workflowService.get("/workflow/processdefinition/"+t._id)};return B.a.merge(t,{fetchProcessDefinition:s,processDefinition:null})}))}).then(function(t){t.forEach(function(t){e.$set(e.processes,t._id,t)})})},getTaskParams:function(e,t){var s={_queryId:"gettasksview",userId:e};return"assignedTasks"===t&&(s.viewType="assignee"),s},getTaskGroup:function(e){return this[e]},toTasks:function(e,t){var s=this,a=t.data,i=B.a.reject(a.result,B.a.isEmpty),r=$t()(i,1),o=r[0];B.a.each(o,function(t,a){var i=t.name,r=B.a.first(t.tasks),o=s.processes[r.processDefinitionId],n=function(){return s.workflowService.get("/workflow/processdefinition/"+r.processDefinitionId)};B.a.isUndefined(o)&&(o={fetchProcessDefinition:n}),s.$set(e,a,{name:i,task:r,process:o})})},loadTasks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{groupName:"availableTasks"};return this.workflowService.get("/endpoint/gettasksview",{params:this.getTaskParams(this.userDetails.userId,t.groupName)}).then(function(s){e.toTasks(e.getTaskGroup(t.groupName),s)})},loadData:function(){var e=this;this.loadProcesses().then(function(){return fe.a.all([e.loadTasks({groupName:"assignedTasks"}),e.loadTasks({groupName:"availableTasks"})])}).catch(function(t){e.displayNotification("error",t.response.data.message)})}}},oa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Processes",{ref:"processes",attrs:{processes:e.processes},on:{startProcess:e.startProcess,loadProcess:e.loadProcessDefinition}}),e._v(" "),s("MyTasks",{attrs:{tasks:e.assignedTasks},on:{updateAssignment:e.updateAssignment,completeTask:e.completeTask,loadProcess:e.loadProcessDefinition}}),e._v(" "),s("GroupTasks",{attrs:{tasks:e.availableTasks},on:{updateAssignment:e.updateAssignment,loadProcess:e.loadProcessDefinition}})],1)},na=[],la={render:oa,staticRenderFns:na},ca=la,ua=s("VU/8"),da=v,fa=ua(ra,ca,!1,da,"data-v-3196de6a",null),pa=fa.exports,ma={name:"Dashboard",components:{Welcome:Ct,Workflow:pa},data:function(){return{widgets:[],userDetails:this.$root.userStore.getUserState()}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;this.getRequestService().get("config/ui/dashboard").then(function(t){var s=t.data;e.widgets=s.dashboard.widgets,e.$root.applicationStore.state.workflow&&e.widgets.push({type:"Workflow",size:"large"})}).catch(function(t){e.displayNotification("error",t.response.data.message)})}}},ha=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{attrs:{fluid:""}},[e.widgets.length?s("b-row",e._l(e.widgets,function(t,a){return s("div",{key:t.type+a,class:{"col-sm-4":"small"===t.size,"col-sm-6":"medium"===t.size,"col-sm-12":"large"===t.size,"mt-4":!0}},[s(t.type,{tag:"component",attrs:{userDetails:e.userDetails,details:t.details}})],1)}),0):s("b-jumbotron",{staticClass:"mt-4 text-center"},[s("div",{staticClass:"d-flex justify-content-center mt-3"},[s("i",{staticClass:"fa fa-binoculars align-self-center flex-fow-1 mr-4 mb-3",staticStyle:{"font-size":"52px"}}),e._v(" "),s("div",{staticClass:"flex-fow-1"},[s("h2",[e._v(e._s(e.$t("pages.dashboard.noWidget")))]),e._v(" "),s("p",{domProps:{innerHTML:e._s(e.$t("pages.dashboard.noWidgetSubText"))}})])])])],1)},va=[],ga={render:ha,staticRenderFns:va},ba=ga,ya=s("VU/8"),_a=ya(ma,ba,!1,null,null,null),wa=_a.exports,ka=s("woOf"),Ca=s.n(ka),Sa={name:"PolicyPanel",props:["policies","policyFailures"],data:function(){return{}},computed:{isValid:function(){return B.a.isArray(this.policyFailures)&&B.a.isEmpty(this.policyFailures)},isLoading:function(){return"loading"===this.policyFailures||!1===this.policyFailures}},methods:{translate:function(e){var t="common.policyValidationMessages."+e.name;return this.$t(t,e.params)},includes:B.a.includes},watch:{policyFailures:function(e){this.policyFailures=e}}},$a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card border-0 mt-3"},[s("transition",{attrs:{name:"fade",mode:"out-in",duration:150}},[e.isLoading?e._e():[e.isValid?s("div",{staticClass:"alert alert-success mt-1",attrs:{role:"alert"}},[s("i",{staticClass:"fa fa-check-circle"}),e._v(" "+e._s(e.$t("common.policyValidationMessages.successMessages.password"))+"\n            ")]):s("ul",{staticClass:"text-left pl-3"},e._l(e.policies,function(t){return s("li",{key:t.policyId,class:[{"fr-valid":!e.includes(e.policyFailures,t.name)},"text-primary fr-policy-list-item"]},[s("small",{staticClass:"text-body"},[e._v(e._s(e.translate(t)))])])}),0)]],2)],1)},Da=[],xa={render:$a,staticRenderFns:Da},Pa=xa,Ra=s("VU/8"),Aa=g,qa=Ra(Sa,Pa,!1,Aa,"data-v-65da22d7",null),Na=qa.exports,Ta={name:"PolicyPasswordInput",inject:["$validator"],components:{"fr-floating-label-input":Be,"fr-policy-panel":Na},props:{policyApi:{required:!0,type:String},defaultPolicyFailures:{required:!1,type:Array},value:String,label:String,exclude:{required:!1,type:Array,default:function(){var e=this.policyApi;return[{name:"REQUIRED",predicate:function(e){return B.a.includes(e,"REQUIRED")&&B.a.includes(e,"MIN_LENGTH")}},{name:"IS_NEW",predicate:function(t){return"selfservice/registration"===e}},"VALID_TYPE","CANNOT_CONTAIN_OTHERS"]}}},data:function(){return{policies:[],password:this.value,failedExcludedPolicies:[],showDefaultPolicyFailures:!1}},watch:{failedExcludedPolicies:function(e){var t=e[0];if(t){var s=this.$t("common.policyValidationMessages."+t.policyRequirements[0].policyRequirement,t.policyRequirements[0].params),a=this.$t("common.policyValidationMessages.policyValidationFailed",{property:t.property})+": "+s;this.displayNotification("error",a),this.failedExcludedPolicies=[]}},defaultPolicyFailures:function(e){this.showDefaultPolicyFailures=!0}},computed:{policyFailures:function(){var e=this.errors.firstByRule("password","policy");return B.a.isUndefined(this.fields.password)?"loading":B.a.isNull(e)&&this.fields.password.valid?[]:e},customInput:function(){return!B.a.isUndefined(this.$slots["custom-input"])}},methods:{isPasswordPolicyItem:B.a.curry(function(e,t){return!B.a.isEmpty(t[e].match("password"))}),toSimplePolicyObject:function(e){var t=e.policyRequirements,s=e.params,a=B.a.first(t);return B.a.isUndefined(a)?{}:{name:a,params:s}},toPolicyNames:function(e){var t=e.failedPolicyRequirements||[],s=t.filter(this.isPasswordPolicyItem("property")).map(function(e){return B.a.at(e,["policyRequirements[0].policyRequirement"])});return B.a.flatten(s)},makeExclusions:function(e){var t=void 0,s=void 0;t=e&&e.policyRequirements?e.policyRequirements:[],s=e&&e.policies?e.policies:[];var a=function(e){return B.a.reject(s,function(t){return B.a.first(t.policyRequirements)===e})};return this.exclude.forEach(function(e){B.a.isObject(e)?e.predicate(t)&&(s=a(e.name)):B.a.isString(e)&&B.a.includes(t,e)&&(s=a(e))}),Ca()({},e,{policyRequirements:t,policies:s})},formatPayload:function(e){return this.policyApi.match("registration")?{user:{password:e}}:{password:e}},getAction:function(){return this.policyApi.match("selfservice")?"validateObject":"validateProperty"}},created:function(){var e=this,t=this.getAnonymousHeaders(),s=this.getRequestService({headers:t}),a=this.formatPayload.bind(this),i=function(e){var t=this,i=a(e);return s.post("/policy/"+this.policyApi+"/?_action="+this.getAction(),i).then(function(e){var s=e.data;return s.failedPolicyRequirements&&B.a.map(s.failedPolicyRequirements,function(e){"password"===e.property&&(t.showDefaultPolicyFailures=!1,B.a.includes(t.exclude,e.policyRequirements[0].policyRequirement)&&t.failedExcludedPolicies.push(e))}),t.toPolicyNames(s)}).catch(function(){t.displayNotification("error",t.$t("common.policyValidationMessages.policyServiceError"))})}.bind(this);this.$validator.extend("policy",{validate:function(e,t){return i(e).then(function(e){return{valid:B.a.isEmpty(e),data:e}})},getMessage:function(e,t,s){return s}}),s.get("/policy/"+this.policyApi).then(function(t){var s=t.data;return B.a.head(s.properties.filter(e.isPasswordPolicyItem("name")))}).then(function(t){return e.makeExclusions(t)}).then(function(t){var s=t.policies;e.policies=s.map(e.toSimplePolicyObject).filter(function(e){return!B.a.isEmpty(e)})}).catch(function(){e.displayNotification("error",e.$t("common.policyValidationMessages.policyServiceError."+e.policyApi)),e.$router.push("/login")})}},Fa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form-group",{staticClass:"mb-0"},[e.customInput?[e._t("custom-input"),e._v(" "),s("fr-policy-panel",{attrs:{policies:e.policies,policyFailures:e.showDefaultPolicyFailures?e.defaultPolicyFailures:e.policyFailures}})]:e._t("input-with-validation-panel",[s("fr-floating-label-input",{directives:[{name:"validate",rawName:"v-validate.initial",value:"required|policy",expression:"'required|policy'",modifiers:{initial:!0}}],attrs:{name:"password",fieldName:"password",type:"password",label:e.label||e.$t("common.placeholders.password"),reveal:!0,showErrorState:!1},on:{input:function(t){return e.$emit("input",t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[s("fr-policy-panel",{attrs:{slot:"validationError",policies:e.policies,policyFailures:e.showDefaultPolicyFailures?e.defaultPolicyFailures:e.policyFailures},slot:"validationError"})],1)])],2)},Ea=[],Ia={render:Fa,staticRenderFns:Ea},Ua=Ia,Ma=s("VU/8"),Va=Ma(Ta,Ua,!1,null,null,null),ja=Va.exports,Oa={name:"Resource-Mixin",methods:{generateUpdatePatch:function(e,t){var s=B.a.cloneDeep(e),a=B.a.cloneDeep(t),i=void 0;return B.a.isArray(a)?i=B.a.filter(a,function(e,t){return e.value!==s[t].value}):(i=[],B.a.each(a,function(e,t){s[t]!==a[t]&&i.push({value:a[t],name:t})})),B.a.map(i,function(e){return""===e.value||null===e.value?{operation:"remove",field:"/"+e.name}:{operation:"add",field:"/"+e.name,value:e.value}})},findPolicyError:function(e,t){var s=this,a=[];return B.a.has(e,"data.detail.failedPolicyRequirements")&&B.a.each(e.data.detail.failedPolicyRequirements,function(e){if(e.policyRequirements.length>0){var i="",r=B.a.find(t,function(t){return t.key===e.property}),o=e.policyRequirements[0].params||{};r&&(i=r.title?r.title:r.key,o.property=i),a.push({exists:i.length>0,field:e.property,msg:s.$t("common.policyValidationMessages."+e.policyRequirements[0].policyRequirement,o)})}}),a}}},La=s("VU/8"),za=La(Oa,null,!1,null,null,null),Ba=za.exports,Ha={name:"Edit-Resource",components:{"fr-validation-error":Ee,"fr-password-policy-input":ja},mixins:[Ba],data:function(){return{name:this.$route.params.resourceName,resource:this.$route.params.resourceType,id:this.$route.params.resourceId,displayProperties:[],canDelete:!1,canChangePassword:!1,passwordInputType:"password",showPassword:!0,disableSaveButton:!1,icon:"",displayNameField:"",displaySecondaryTitleField:"",formFields:{},oldFormFields:{}}},mounted:function(){this.loadData()},$_veeValidate:{validator:"new"},methods:{loadData:function(){var e=this,t=this.getRequestService();fe.a.all([t.get("schema/"+this.resource+"/"+this.name),t.get("privilege/"+this.resource+"/"+this.name+"/"+this.id),t.get(this.resource+"/"+this.name+"/"+this.id)]).then(fe.a.spread(function(t,s,a){e.generateDisplay(t.data,s.data,a.data)})).catch(function(t){e.displayNotification("error",t.response.data.message)})},generateDisplay:function(e,t,s){var a=this;this.oldFormFields=B.a.pick(s,t.VIEW.properties),t.DELETE.allowed&&(this.canDelete=!0),e.icon?this.icon=e.icon:this.icon="",B.a.each(this.oldFormFields,function(e,t){a.$set(a.formFields,t,e)}),t.VIEW.allowed&&(0===t.UPDATE.properties.length&&(this.disableSaveButton=!0),B.a.each(this.mergePrivilegeProperties(t,e),function(t){var s=e.properties[t.attribute];-1!==B.a.indexOf(e.required,t.attribute)&&(s.required=!0),"password"!==t.attribute||t.readOnly||(a.canChangePassword=!0),s.key=t.attribute,"username"!==B.a.toLower(t.attribute)&&"name"!==B.a.toLower(t.attribute)||0!==a.displayNameField.length||(a.displayNameField=t.attribute),"title"!==B.a.toLower(t.attribute)&&"email"!==B.a.toLower(t.attribute)&&"type"!==B.a.toLower(t.attribute)&&"mail"!==B.a.toLower(t.attribute)||0!==a.displaySecondaryTitleField.length||(a.displaySecondaryTitleField=t.attribute),B.a.isUndefined(a.formFields[t.attribute])&&("boolean"===s.type?(a.$set(a.formFields,t.attribute,!1),a.oldFormFields[t.attribute]=!1):(a.$set(a.formFields,t.attribute,""),a.oldFormFields[t.attribute]="")),t.readOnly&&(s.isReadOnly=!0),a.displayProperties.push(s)}))},deleteResource:function(){var e=this,t=this.getRequestService();this.$refs.deleteModal.hide(),t.delete(this.resource+"/"+this.name+"/"+this.id).then(function(){e.displayNotification("success",e.$t("pages.access.deleteResource")),e.$router.push({name:"ListResource",params:{resourceType:e.resource,resourceName:e.name}})}).catch(function(t){e.displayNotification("error",t.response.data.message)})},revealNew:function(){"password"===this.passwordInputType?(this.passwordInputType="text",this.showPassword=!1):(this.passwordInputType="password",this.showPassword=!0)},saveResource:function(){var e=this,t=this.getRequestService();this.errors.clear("mainEdit"),this.$validator.validate("mainEdit.*").then(function(s){if(s){var a=e.generateUpdatePatch(B.a.clone(e.oldFormFields),B.a.clone(e.formFields));t.patch(e.resource+"/"+e.name+"/"+e.id,a).then(function(){e.displayNotification("success",e.$t("pages.access.successEdited",{resource:B.a.capitalize(e.name)}))},function(t){var s=e.findPolicyError(t.response,e.displayProperties);e.errors.clear(),s.length>0?B.a.each(s,function(t){t.exists&&(t.scope="mainEdit",e.errors.add(t))}):e.displayNotification("error",e.$t("pages.access.invalidEdit"))})}else e.displayNotification("error",e.$t("pages.access.invalidEdit"))})},savePassword:function(){var e=this,t=this.getRequestService();this.$validator.validate("*").then(function(s){if(s){var a=[{operation:"add",field:"/password",value:e.formFields.password}];e.$refs.resetModal.hide(),e.formFields.password="",t.patch(e.resource+"/"+e.name+"/"+e.id,a).then(function(){e.displayNotification("success",e.$t("pages.access.successSavePassword"))},function(){e.displayNotification("error",e.$t("pages.access.failedSavePassword"))})}else e.displayNotification("error",e.$t("pages.access.invalidEdit"))})},mergePrivilegeProperties:function(e,t){var s=[];return B.a.each(t.order,function(t){var a=B.a.indexOf(e.VIEW.properties,t)>-1,i=B.a.indexOf(e.UPDATE.properties,t)>-1,r={attribute:t};i?s.push(r):a&&(r.readOnly=!0,s.push(r))}),s}},computed:{secondaryTitle:function(){var e=this.resource+" - "+this.name;return this.displaySecondaryTitleField.length>0&&(e=this.formFields[this.displaySecondaryTitleField]),e},displayName:function(){var e=this.id;return this.displayNameField.length>0&&(e=this.formFields[this.displayNameField]),e},setIcon:function(){return 0===this.icon.length&&(this.icon="fa-cube"),"fa fa-3x "+this.icon}}},Xa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-row",[s("b-col",[s("div",{staticClass:"d-sm-flex my-4"},[s("div",{staticClass:"media"},[s("div",{staticClass:"rounded-circle fr-resource-circle text-light bg-primary mr-4"},[s("i",{class:e.setIcon})]),e._v(" "),s("div",{staticClass:"media-body"},[s("h1",[e._v(e._s(e.displayName))]),e._v(" "),s("h6",{staticClass:"text-muted"},[e._v(e._s(e.secondaryTitle))])])]),e._v(" "),e.canChangePassword||e.canDelete?s("div",{staticClass:"ml-auto my-4 my-sm-0 align-self-center align-self-end"},[s("b-dropdown",{staticClass:"m-md-2",attrs:{id:"resourceActions",text:"Actions",right:"",variant:"primary"}},[e.canChangePassword?s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.resetModal",modifiers:{resetModal:!0}}]},[e._v(e._s(e.$t("pages.access.resetPassword")))]):e._e(),e._v(" "),e.canDelete?s("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.deleteModal",modifiers:{deleteModal:!0}}]},[e._v(e._s(e.$t("common.form.delete"))+" "+e._s(this.name))]):e._e()],1)],1):e._e()])])],1),e._v(" "),s("b-tabs",{attrs:{"flex-column":"","flex-sm-row":""}},[s("b-tab",{attrs:{title:this.$t("pages.access.details"),active:""}},[s("b-card",[e.displayProperties.length>0?[e._l(e.displayProperties,function(t,a){return[t.isReadOnly?["string"!==t.type&&"number"!==t.type||void 0!==t.encryption?e._e():s("b-form-group",{key:"readResource"+a,attrs:{label:t.title,"label-for":"field.key",horizontal:""}},[s("b-form-input",{attrs:{horizontal:"",type:"text",plaintext:""},model:{value:e.formFields[t.key],callback:function(s){e.$set(e.formFields,t.key,s)},expression:"formFields[field.key]"}})],1),e._v(" "),"boolean"===t.type?s("b-form-group",{key:"readResource"+a},[s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.title}},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,disabled:!0,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formFields[t.key],callback:function(s){e.$set(e.formFields,t.key,s)},expression:"formFields[field.key]"}})],1)])]):e._e()]:["string"!==t.type&&"number"!==t.type||void 0!==t.encryption?e._e():s("b-form-group",{key:"editResource"+a,attrs:{label:t.title,"label-for":"field.key",horizontal:""}},["string"===t.type?s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:t.required?"required":"",expression:"field.required ? 'required' : ''"}],ref:0===a?"focusInput":"",refInFor:!0,class:[{"is-invalid":e.errors.has("mainEdit."+t.key)}],attrs:{"data-vv-validate-on":"submit",name:t.key,type:"text","data-vv-as":t.title,"data-vv-scope":"mainEdit",autocomplete:t.key},model:{value:e.formFields[t.key],callback:function(s){e.$set(e.formFields,t.key,"string"==typeof s?s.trim():s)},expression:"formFields[field.key]"}}):s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:t.required?"required":"",expression:"field.required ? 'required' : ''"}],ref:0===a?"focusInput":"",refInFor:!0,class:[{"is-invalid":e.errors.has("mainEdit."+t.key)}],attrs:{horizontal:"","data-vv-validate-on":"submit",name:t.key,type:"number","data-vv-as":t.title,"data-vv-scope":"mainEdit",autocomplete:t.key},model:{value:e.formFields[t.key],callback:function(s){e.$set(e.formFields,t.key,e._n(s))},expression:"formFields[field.key]"}}),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:"mainEdit."+t.key}})],1),e._v(" "),"boolean"===t.type?s("b-form-group",{key:"createResource"+a},[s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.title}},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formFields[t.key],callback:function(s){e.$set(e.formFields,t.key,s)},expression:"formFields[field.key]"}})],1)])]):e._e()]]}),e._v(" "),e.disableSaveButton?e._e():s("div",{staticClass:"float-right mt-4"},[s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:e.saveResource}},[e._v(e._s(e.$t("common.form.save")))])],1)]:s("span",[e._v("\n                    "+e._s(e.$t("pages.access.noAvailableProperties"))+"\n                ")])],2)],1)],1),e._v(" "),e.canDelete?s("b-modal",{ref:"deleteModal",attrs:{id:"deleteModal",title:this.$t("pages.access.deleteModalTitle")}},[s("div",[e._v("\n            "+e._s(e.$t("pages.access.deleteConfirm"))+" "+e._s(this.name)+"?\n        ")]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:e.deleteResource}},[e._v(e._s(e.$t("common.form.delete")))])],1)])]):e._e(),e._v(" "),e.canChangePassword?s("b-modal",{ref:"resetModal",attrs:{id:"resetModal",title:this.$t("pages.access.resetPassword")}},[s("fr-password-policy-input",{attrs:{policyApi:e.resource+"/"+e.name+"/policyTest"},model:{value:e.formFields.password,callback:function(t){e.$set(e.formFields,"password",t)},expression:"formFields['password']"}},[s("b-form-group",{staticClass:"mb-3",attrs:{slot:"custom-input"},slot:"custom-input"},[s("label",{attrs:{for:"updatePassword"}},[e._v(e._s(e.$t("pages.access.password")))]),e._v(" "),s("div",{staticClass:"form-label-password form-label-group mb-0"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate.initial",value:"required|policy",expression:"'required|policy'",modifiers:{initial:!0}}],attrs:{id:"updatePassword",autocomplete:"password",type:e.passwordInputType,name:"password"},model:{value:e.formFields.password,callback:function(t){e.$set(e.formFields,"password",t)},expression:"formFields['password']"}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.revealNew}},[s("i",{class:[{"fa-eye-slash":!e.showPassword},{"fa-eye":e.showPassword},"fa"]})])])],1)])],1),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:e.savePassword}},[e._v(e._s(e.$t("common.form.save")))])],1)])],1):e._e()],1)},Ga=[],Wa={render:Xa,staticRenderFns:Ga},Qa=Wa,Ya=s("VU/8"),Ka=Ya(Ha,Qa,!1,null,null,null),Ja=Ka.exports,Za={name:"Captcha",props:{advanceStage:{required:!1},selfServiceDetails:{required:!0},apiType:{required:!1}},created:function(){var e=document.createElement("script");e.setAttribute("src","https://www.google.com/recaptcha/api.js"),document.head.appendChild(e)},mounted:function(){this.loadRecaptcha()},methods:{loadRecaptcha:function(){var e=this;B.a.isUndefined(this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey)||0===this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey.length?this.displayNotification("error",this.$t("pages.selfservice.captchaError")):setTimeout(function(){void 0===window.grecaptcha?e.loadRecaptcha():window.grecaptcha.render("recaptchaContainer",{sitekey:e.selfServiceDetails.requirements.properties.response.recaptchaSiteKey,callback:e.handleCaptchaCallback})},500)},handleCaptchaCallback:function(e){this.recaptchaResponse=e,this.$listeners.advanceStage&&this.$emit("advanceStage",this.getData())},getData:function(){return{response:this.recaptchaResponse,"g-recaptcha-response":this.recaptchaResponse}}}},ei=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mb-4",attrs:{id:"captchaBody"}},[e.apiType?s("p",{staticClass:"text-center mb-4"},[e._v("\n        "+e._s(e.$t("pages.selfservice.headers."+e.apiType+".description"))+"\n    ")]):e._e(),e._v(" "),e._m(0)])},ti=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"recaptcha-wrapper "},[s("div",{staticClass:"recaptcha-bound"},[s("div",{attrs:{id:"recaptchaContainer"}})])])}],si={render:ei,staticRenderFns:ti},ai=si,ii=s("VU/8"),ri=ii(Za,ai,!1,null,null,null),oi=ri.exports,ni={name:"Email-Username"},li=function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-alert",{attrs:{variant:"success",show:""}},[e._v("\n    "+e._s(e.$t("pages.selfservice.forgotUsername.emailSent"))+"\n")])},ci=[],ui={render:li,staticRenderFns:ci},di=ui,fi=s("VU/8"),pi=fi(ni,di,!1,null,null,null),mi=pi.exports,hi={name:"Retrieve-Username",props:{selfServiceDetails:{required:!0}}},vi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"string"!=typeof e.selfServiceDetails.error?s("div",[s("b-alert",{attrs:{variant:"success",show:""}},[e._v("\n        "+e._s(e.$t("pages.selfservice.forgotUsername.yourUsername"))+" "),s("b",[e._v(e._s(e.selfServiceDetails.additions.userName))])])],1):s("div",[s("b-alert",{attrs:{variant:"danger",show:""}},[s("b",[e._v(e._s(e.$t("pages.selfservice.forgotUsername.unableToRetrieve")))]),e._v(" "),s("p",[e._v(e._s(e.selfServiceDetails.error))])]),e._v(" "),s("div",{staticClass:"mt-2"},[s("b-link",{attrs:{href:"#/forgotUsername"},on:{click:function(t){return e.$router.go(e.$router.currentRoute)}}},[e._v("\n            "+e._s(e.$t("pages.selfservice.forgotUsername.tryAgain"))+"\n        ")])],1)],1)},gi=[],bi={render:vi,staticRenderFns:gi},yi=bi,_i=s("VU/8"),wi=_i(hi,yi,!1,null,null,null),ki=wi.exports,Ci={name:"User-Query",components:{"fr-floating-label-input":Be},props:{apiType:{required:!0}},data:function(){return{mail:""}},methods:{getData:function(){return{queryFilter:'mail eq "'+this.mail+'"'}},save:function(){this.$emit("advanceStage",this.getData())}}},Si=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)},submit:function(e){e.preventDefault()}}},[s("p",{staticClass:"text-center mb-4"},[e._v("\n        "+e._s(e.$t("pages.selfservice.passwordReset.userQuery"))+"\n    ")]),e._v(" "),s("b-form-group",[s("fr-floating-label-input",{attrs:{fieldName:"mail",label:e.$t("common.placeholders.emailAddress"),type:"text",autofocus:"true"},model:{value:e.mail,callback:function(t){e.mail=t},expression:"mail"}})],1),e._v(" "),s("b-button",{attrs:{size:"lg",block:!0,variant:"primary"},on:{click:e.save}},["username"===e.apiType?s("div",[e._v("\n            "+e._s(e.$t("pages.selfservice.forgotUsername.advanceStageButtonText"))+"\n        ")]):s("div",[e._v("\n            "+e._s(e.$t("pages.selfservice.passwordReset.advanceStageButtonText"))+"\n        ")])])],1)},$i=[],Di={render:Si,staticRenderFns:$i},xi=Di,Pi=s("VU/8"),Ri=Pi(Ci,xi,!1,null,null,null),Ai=Ri.exports,qi={name:"Generic-Self-Service",props:{selfServiceDetails:{required:!0}},data:function(){var e={},t=[];return this.selfServiceDetails&&this.selfServiceDetails.requirements&&this.selfServiceDetails.requirements.properties&&B.a.each(this.selfServiceDetails.requirements.properties,function(s,a){t.push({type:s.type,text:s.description,key:a}),"string"===s.type?e[a]="":"boolean"===s.type?e[a]=!1:e[a]=null}),{saveFields:e,displayDetails:t}},methods:{getData:function(){return this.saveFields},save:function(){this.$emit("advanceStage",this.getData())},isValid:function(){return L.a.resolve(!0)}},filters:{startCase:function(e){return B.a.startCase(e)}}},Ni=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.displayDetails,function(t,a){return["string"===t.type||"number"===t.type?s("b-form-group",{key:"genericField"+a,attrs:{label:e._f("startCase")(t.key),"label-for":"field.key",horizontal:""}},["string"===t.type?s("b-form-input",{ref:0===a?"focusInput":"",refInFor:!0,attrs:{name:t.key,placeholder:t.text,type:"text",autocomplete:t.key},model:{value:e.saveFields[t.key],callback:function(s){e.$set(e.saveFields,t.key,"string"==typeof s?s.trim():s)},expression:"saveFields[field.key]"}}):e._e(),e._v(" "),"number"===t.type?s("b-form-input",{ref:0===a?"focusInput":"",refInFor:!0,attrs:{horizontal:"",name:t.key,type:"number",autocomplete:t.key},model:{value:e.saveFields[t.key],callback:function(s){e.$set(e.saveFields,t.key,e._n(s))},expression:"saveFields[field.key]"}}):e._e()],1):e._e(),e._v(" "),"boolean"===t.type?s("b-form-group",{key:"genericField"+a},[s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.key}},[e._v(e._s(e._f("startCase")(t.key)))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,sync:!0,cssColors:!0},model:{value:e.saveFields[t.key],callback:function(s){e.$set(e.saveFields,t.key,s)},expression:"saveFields[field.key]"}})],1)])]):e._e()]}),e._v(" "),s("b-button",{staticClass:"mt-4",attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("common.form.submit"))+"\n    ")])],2)},Ti=[],Fi={render:Ni,staticRenderFns:Ti},Ei=Fi,Ii=s("VU/8"),Ui=b,Mi=Ii(qi,Ei,!1,Ui,"data-v-24242773",null),Vi=Mi.exports,ji={name:"Forgot-Username",components:{Captcha:oi,EmailUsername:mi,RetrieveUsername:ki,UserQuery:Ai,GenericSelfService:Vi,"bounce-loader":ge.BounceLoader,"fr-center-card":De},data:function(){return{selfServiceType:null,selfServiceDetails:null,loadingColor:rt.a.baseColor,apiType:"username"}},mounted:function(){this.loadData()},methods:{setChildComponent:function(e,t){this.selfServiceDetails=t;var s=!1;B.a.each(this.$options.components,function(t,a){B.a.toLower(a)===B.a.toLower(e)&&(s=!0)}),this.selfServiceType=s?e:"GenericSelfService"},apiErrorCallback:function(e){this.setChildComponent("retrieveUsername",{error:e.response.data.message})}},mixins:[We]},Oi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!==e.selfServiceType?s("fr-center-card",{attrs:{showLogo:!0}},[s("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[s("h2",{staticClass:"h2"},[e._v(e._s(e.$t("pages.selfservice.headers.username.title")))])]),e._v(" "),s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[s(e.selfServiceType,{ref:"selfServiceStage",tag:"component",attrs:{selfServiceDetails:e.selfServiceDetails,apiType:e.apiType},on:{advanceStage:e.advanceStage}})],1),e._v(" "),s("b-card-footer",{attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[s("b-link",{attrs:{href:"#/login"}},[e._v(e._s(e.$t("pages.selfservice.signIn")))])],1)],1):s("b-container",{staticClass:"h-100 px-0",attrs:{fluid:""}},[s("div",{staticClass:"h-100 d-flex"},[s("div",{staticClass:"m-auto fr-center-card"},[s("bounce-loader",{attrs:{color:e.loadingColor}})],1)])])},Li=[],zi={render:Oi,staticRenderFns:Li},Bi=zi,Hi=s("VU/8"),Xi=Hi(ji,Bi,!1,null,null,null),Gi=Xi.exports,Wi={name:"Create-Resource",components:{"fr-validation-error":Ee,"fr-password-policy-input":ja},mixins:[Ba],props:{createProperties:{type:Array,required:!0,default:function(){return[]}},resourceName:{type:String,required:!0},resourceType:{type:String,required:!0}},$_veeValidate:{validator:"new"},data:function(){var e={},t=!1;return B.a.each(this.createProperties,function(s){"string"===s.type||"number"===s.type?e[s.key]="":e[s.key]=!1,"password"===s.key&&(t=!0)}),{formFields:e,passwordCheck:t,passwordInputType:"password",showPassword:!0}},methods:{saveForm:function(){var e=this,t=this.getRequestService();this.$validator.validateAll().then(function(s){if(s){var a=e.cleanData(B.a.clone(e.formFields));t.post(e.resourceType+"/"+e.resourceName+"?_action=create",a).then(function(){e.$emit("refreshGrid"),e.errors.clear(),e.hideModal(),e.displayNotification("success",e.$t("pages.access.successCreate",{resource:B.a.capitalize(e.resourceName)}))},function(t){var s=e.findPolicyError(t.response,e.createProperties);e.errors.clear(),s.length>0?B.a.each(s,function(t){t.exists&&e.errors.add(t)}):e.displayNotification("error",e.$t("pages.access.invalidCreate"))})}else e.displayNotification("error",e.$t("pages.access.invalidCreate"))})},hideModal:function(){this.resetDialog(),this.$refs.createModal.hide()},resetDialog:function(){var e=this;this.errors.clear(),this.passwordInputType="password",this.showPassword=!0,B.a.each(this.formFields,function(t,s){B.a.isString(t)||B.a.isNumber(t)?e.formFields[s]="":e.formFields[s]=!1})},revealNew:function(){"password"===this.passwordInputType?(this.passwordInputType="text",this.showPassword=!1):(this.passwordInputType="password",this.showPassword=!0)},cleanData:function(e){return B.a.each(e,function(t,s){B.a.isString(t)&&0===t.length&&delete e[s]}),e},focusField:function(){B.a.isArray(this.$refs.focusInput)&&this.$refs.focusInput[0].focus()}}},Qi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"createModal",attrs:{id:"createResourceModal","cancel-variant":"outline-secondary"},on:{shown:e.focusField},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveForm(t))}}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title align-self-center text-center"},[e._v(e._s(e.$t("common.form.new"))+" "+e._s(e.resourceName))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.hideModal}},[s("i",{staticClass:"fa fa-times"})])]),e._v(" "),s("b-row",[s("b-col",[e.createProperties.length>0?s("b-form",{staticClass:"mb-3",attrs:{name:"edit-personal-form"}},[e._l(e.createProperties,function(t,a){return["string"!==t.type&&"number"!==t.type||void 0!==t.encryption?e._e():s("b-form-group",{key:"createResource"+a},[t.title?s("label",{staticClass:"float-left",attrs:{for:t.title}},[e._v(e._s(t.title))]):s("label",{staticClass:"float-left",attrs:{for:t.key}},[e._v(e._s(t.key))]),e._v(" "),"string"===t.type?s("input",{directives:[{name:"validate",rawName:"v-validate",value:t.required?"required":"",expression:"field.required ? 'required' : ''"},{name:"model",rawName:"v-model.trim",value:e.formFields[t.key],expression:"formFields[field.key]",modifiers:{trim:!0}}],ref:0===a?"focusInput":"",refInFor:!0,class:[{"is-invalid":e.errors.has(t.key)},"form-control"],attrs:{"data-vv-validate-on":"submit",name:t.key,type:"text","data-vv-as":t.title,autocomplete:t.key},domProps:{value:e.formFields[t.key]},on:{input:function(s){s.target.composing||e.$set(e.formFields,t.key,s.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}):s("input",{directives:[{name:"validate",rawName:"v-validate",value:t.required?"required":"",expression:"field.required ? 'required' : ''"},{name:"model",rawName:"v-model.number",value:e.formFields[t.key],expression:"formFields[field.key]",modifiers:{number:!0}}],ref:0===a?"focusInput":"",refInFor:!0,class:[{"is-invalid":e.errors.has(t.key)},"form-control"],attrs:{"data-vv-validate-on":"submit",name:t.key,type:"number","data-vv-as":t.title,autocomplete:t.key},domProps:{value:e.formFields[t.key]},on:{input:function(s){s.target.composing||e.$set(e.formFields,t.key,e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:t.key}})],1),e._v(" "),"boolean"===t.type?s("b-form-group",{key:"createResource"+a},[s("div",{staticClass:"d-flex flex-column"},[s("label",{staticClass:"mr-auto",attrs:{for:t.title}},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formFields[t.key],callback:function(s){e.$set(e.formFields,t.key,s)},expression:"formFields[field.key]"}})],1)])]):e._e()]}),e._v(" "),e.passwordCheck?s("fr-password-policy-input",{attrs:{policyApi:e.resourceType+"/"+e.resourceName+"/policyTest"},model:{value:e.formFields.password,callback:function(t){e.$set(e.formFields,"password",t)},expression:"formFields['password']"}},[s("b-form-group",{staticClass:"mb-3",attrs:{slot:"custom-input"},slot:"custom-input"},[s("label",{attrs:{for:"createPassword"}},[e._v(e._s(e.$t("pages.access.password")))]),e._v(" "),s("div",{staticClass:"form-label-password form-label-group mb-0"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate.initial",value:"required|policy",expression:"'required|policy'",modifiers:{initial:!0}}],attrs:{id:"createPassword",autocomplete:"password",type:e.passwordInputType,name:"password"},model:{value:e.formFields.password,callback:function(t){e.$set(e.formFields,"password",t)},expression:"formFields['password']"}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.revealNew}},[s("i",{class:[{"fa-eye-slash":!e.showPassword},{"fa-eye":e.showPassword},"fa"]})])])],1)])],1):e._e()],2):[s("h3",{staticClass:"text-center"},[e._v(e._s(e.$t("pages.access.noFields")))])]],2)],1),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"primary",disabled:0===e.formFields.length},on:{click:e.saveForm}},[e._v(e._s(e.$t("common.form.save")))])],1)])],1)},Yi=[],Ki={render:Qi,staticRenderFns:Yi},Ji=Ki,Zi=s("VU/8"),er=Zi(Wi,Ji,!1,null,null,null),tr=er.exports,sr={name:"Access",components:{"fr-create-resource":tr},data:function(){return{name:this.$route.params.resourceName,resource:this.$route.params.resourceType,schemaProperties:{},isRowSelected:!1,tableHover:!0,gridData:[],columns:[],displayFields:[],currentPage:1,lastPage:!1,sortBy:null,sortDesc:!1,sortDirection:"asc",filter:"",createProperties:[],userCanUpdate:!1}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this,t=this.getRequestService();fe.a.all([t.get("schema/"+this.resource+"/"+this.name),t.get("privilege/"+this.resource+"/"+this.name)]).then(fe.a.spread(function(t,s){s.data.VIEW.allowed&&B.a.each(s.data.VIEW.properties,function(s){e.columns.length<=3&&B.a.isUndefined(t.data.properties[s].encryption)&&(e.columns.push({key:s,label:t.data.properties[s].title,sortable:!0,sortDirection:"desc"}),e.displayFields.push(s))}),s.data.UPDATE&&(e.userCanUpdate=!0),e.schemaProperties=t.data.properties,s.data.CREATE.allowed&&B.a.each(s.data.CREATE.properties,function(s){"string"!==t.data.properties[s].type&&"number"!==t.data.properties[s].type&&"boolean"!==t.data.properties[s].type||(t.data.properties[s].key=s,B.a.each(t.data.required,function(e){e===t.data.properties[s].key&&(t.data.properties[s].required=!0)}),e.createProperties.push(t.data.properties[s]))}),e.loadGrid("true",e.displayFields,e.displayFields[0],1)})).catch(function(t){e.displayNotification("error",t.response.data.message)})},loadGrid:function(e,t,s,a){var i=this;this.getRequestService().get(this.buildGridUrl(e,t,s,a)).then(function(e){e.data.pagedResultsCookie?i.lastPage=!1:i.lastPage=!0,i.gridData=e.data.result})},buildGridUrl:function(e,t,s,a){var i=this.resource+"/"+this.name+"?_queryFilter="+e+"&_pageSize=10&_totalPagedResultsPolicy=EXACT";if(B.a.isNull(s)&&(s=t[0]),i=i+"&_sortKeys="+s,t.length&&(i=i+"&_fields="+t.join(",")),a>1){i=i+"&_pagedResultsOffset="+10*(a-1)}return i},calculateSort:function(e,t){var s=null;return B.a.isNull(t)||(s=e?""+t:"-"+t),s},sortingChanged:function(e){this.currentPage=1,this.lastPage=!1,this.loadGrid(this.generateSearch(this.filter,this.displayFields,this.schemaProperties),this.displayFields,this.calculateSort(e.sortDesc,e.sortBy),1)},paginationChange:function(e){this.currentPage=e,this.loadGrid(this.generateSearch(this.filter,this.displayFields,this.schemaProperties),this.displayFields,this.calculateSort(this.sortDesc,this.sortBy),e)},search:function(){this.sortBy=null,this.sortDesc=!1,this.currentPage=1,this.lastPage=!1,this.loadGrid(this.generateSearch(this.filter,this.displayFields,this.schemaProperties),this.displayFields,null,1)},generateSearch:function(e,t,s){var a="";return e.length>0?(e=encodeURIComponent(e),B.a.each(t,function(i,r){var o="string";B.a.isUndefined(s)||(o=s[i].type),a=("number"!==o||B.a.isNaN(B.a.toNumber(e)))&&("boolean"!==o||"true"!==e&&"false"!==e)?r+1<t.length?""+a+i+'+sw+"'+e+'"+OR+':""+a+i+'+sw+"'+e+'"':r+1<t.length?""+a+i+"+eq+ "+e+"+OR+":""+a+i+"+eq+ "+e})):a="true",a},clear:function(){this.filter="",this.sortBy=null,this.sortDesc=!1,this.currentPage=1,this.loadGrid("true",this.displayFields,null,1)},resourceClicked:function(e){this.userCanUpdate?this.$router.push({name:"EditResource",params:{resourceType:this.resource,resourceName:this.name,resourceId:e._id}}):this.displayNotification("error",this.$t("pages.access.unableToEditResource",{resource:this.name}))}}},ar=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("div",{staticClass:"card mt-4"},[s("div",{staticClass:"card-header py-2"},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"7"}},[e.createProperties.length>0?s("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.createResourceModal",modifiers:{createResourceModal:!0}}],attrs:{type:"button",variant:"primary"}},[s("i",{staticClass:"fa fa-plus mr-3"}),e._v(e._s(e.$t("common.form.new"))+" "+e._s(this.name))]):e._e()],1),e._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"5"}},[s("div",{staticClass:"d-flex"},[s("b-input-group",[s("b-input-group-prepend",[s("div",{staticClass:"input-group-text inset"},[s("i",{staticClass:"fa fa-search"})])]),e._v(" "),s("b-form-input",{staticClass:"inset-left inset-right",attrs:{placeholder:this.$t("pages.access.typeSearch")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),s("b-input-group-append",[s("b-btn",{staticClass:"inset clear",attrs:{variant:"outline-default",disabled:!e.filter},on:{click:e.clear}},[s("i",{staticClass:"fa fa-times-circle"})])],1)],1)],1)])],1)],1),e._v(" "),s("b-table",{staticClass:"mb-0",attrs:{"show-empty":"","table-responsive":"",stacked:"lg",items:e.gridData,fields:e.columns,"per-page":0,hover:e.tableHover,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"no-local-sorting":!0,"sort-direction":e.sortDirection},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"row-clicked":e.resourceClicked,"sort-changed":e.sortingChanged}}),e._v(" "),s("div",{staticClass:"card-footer py-2"},[s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center mb-0"},[s("li",{class:[{disabled:1===e.currentPage},"page-item"],on:{click:function(t){t.preventDefault(),1===e.currentPage||e.paginationChange(1)}}},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-angle-double-left"})])]),e._v(" "),s("li",{class:[{disabled:1===e.currentPage},"page-item"],on:{click:function(t){t.preventDefault(),1===e.currentPage||e.paginationChange(e.currentPage-1)}}},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-angle-left"})])]),e._v(" "),s("li",{class:[{disabled:e.lastPage},"page-item"],on:{click:function(t){t.preventDefault(),e.lastPage||e.paginationChange(e.currentPage+1)}}},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-angle-right"})])])])])])],1),e._v(" "),e.createProperties.length>0?s("fr-create-resource",{attrs:{resourceName:e.name,resourceType:e.resource,createProperties:e.createProperties},on:{refreshGrid:e.clear}}):e._e()],1)},ir=[],rr={render:ar,staticRenderFns:ir},or=rr,nr=s("VU/8"),lr=y,cr=nr(sr,or,!1,lr,"data-v-454e89d4",null),ur=cr.exports,dr={name:"Login",components:{"fr-floating-label-input":Be,"fr-center-card":De,"fr-social-buttons":at},data:function(){return{username:"",password:"",wrongPasswordSubmitted:!1}},mounted:function(){localStorage.removeItem("accountClaimingToken"),B.a.has(this.$root,"userStore.state.userId")&&this.$router.push("/")},methods:{submit:function(){var e=this,t=this.getRequestService({headers:{"X-OpenIDM-NoSession":!1,"X-OpenIDM-Password":this.password,"X-OpenIDM-Username":this.username}});return this.getRequestService({headers:this.getAnonymousHeaders()}).post("/authentication?_action=logout").then(function(){t.post("/authentication?_action=login").then(function(s){e.$root.userStore.clearStoreAction(),e.$root.userStore.setUserIdAction(s.data.authorization.id),e.$root.userStore.setManagedResourceAction(s.data.authorization.component),e.$root.userStore.setRolesAction(s.data.authorization.roles),e.progressiveProfileCheck(s,function(){fe.a.all([t.get(s.data.authorization.component+"/"+s.data.authorization.id),t.post("privilege?_action=listPrivileges"),t.get("schema/"+s.data.authorization.component)]).then(fe.a.spread(function(t,s,a){e.$root.userStore.setProfileAction(t.data),e.$root.userStore.setSchemaAction(a.data),e.$root.userStore.setAccess(s.data),window.history.pushState("","",window.location.pathname),e.completeLogin()})).catch(function(t){e.displayNotification("error",t.response.data.message)})})}).catch(function(){e.wrongPasswordSubmitted=!0})}),!1}}},fr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-center-card",{attrs:{showLogo:!0}},[s("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[s("h2",{staticClass:"h2"},[e._v(e._s(e.$t("pages.login.signIn")))])]),e._v(" "),s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[s("transition",{attrs:{name:"slide-fade"}},[e.wrongPasswordSubmitted?s("div",{staticClass:"alert alert-danger mb-4 text-left",attrs:{role:"alert"}},[e._v("\n                "+e._s(e.$t("pages.login.badPassword"))+"\n                "),this.$root.applicationStore.state.passwordReset?s("span",[s("br"),e._v(e._s(e.$t("pages.login.weCanHelp"))+" "),this.$root.applicationStore.state.passwordReset?s("router-link",{attrs:{action:"",to:{name:"PasswordReset"}}},[e._v(e._s(e.$t("pages.login.recoverPassword")))]):e._e()],1):e._e(),e._v(" "),this.$root.applicationStore.state.usernameRecovery?s("span",[s("br"),e._v(e._s(e.$t("pages.login.weCanHelp"))+" "),s("router-link",{attrs:{action:"",to:{name:"ForgotUsername"}}},[e._v(e._s(e.$t("pages.login.recoverUsername")))])],1):e._e()]):e._e()]),e._v(" "),s("fr-social-buttons",{attrs:{signin:!0}}),e._v(" "),s("b-form",{staticClass:"form-signin mb-3",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[s("fr-floating-label-input",{attrs:{fieldName:"username",label:e.$t("pages.login.username"),type:"text",autofocus:"true"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("fr-floating-label-input",{attrs:{fieldName:"password",label:e.$t("pages.login.password"),reveal:!0,type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("b-button",{staticClass:"btn btn-block btn-lg",attrs:{type:"submit",variant:"primary"}},[e._v("\n                "+e._s(e.$t("pages.login.signIn"))+"\n            ")])],1),e._v(" "),s("p",{staticClass:"text-center"},[this.$root.applicationStore.state.usernameRecovery?s("router-link",{attrs:{action:"",to:"forgotusername"}},[e._v(e._s(e.$t("pages.login.forgotUsername")))]):e._e(),e._v(" "),this.$root.applicationStore.state.usernameRecovery&&this.$root.applicationStore.state.passwordReset?s("span",[e._v("")]):e._e(),e._v(" "),this.$root.applicationStore.state.passwordReset?s("router-link",{attrs:{to:"passwordreset"}},[e._v(e._s(e.$t("pages.login.forgotPassword")))]):e._e()],1)],1),e._v(" "),this.$root.applicationStore.state.registration?[s("b-card-footer",{staticClass:"fr-footer-bottom",attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[e._v("\n            "+e._s(e.$t("pages.login.newHere"))+"\n            "),s("router-link",{attrs:{action:"",to:{name:"Registration"}}},[e._v(e._s(e.$t("pages.login.createAccount")))])],1)]:e._e()],2)},pr=[],mr={render:fr,staticRenderFns:pr},hr=mr,vr=s("VU/8"),gr=vr(dr,hr,!1,null,null,null),br=gr.exports,yr={name:"NotFound"},_r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"h-100 d-flex",attrs:{id:"notFoundContainer",fluid:""}},[s("div",{staticClass:"m-auto align-self-center text-center",staticStyle:{width:"350px"}},[s("b-img",{staticClass:"fr-ghost mb-2",attrs:{src:"static/images/ghost.svg",width:"112",height:"112",alt:"img"}}),e._v(" "),s("div",{staticClass:"fr-code"},[e._v("404")]),e._v(" "),s("p",{staticClass:"text-centered"},[e._v(e._s(e.$t("pages.notFound.couldNotFind")))]),e._v(" "),s("router-link",{attrs:{to:"/"}},[s("b-button",{staticClass:"mt-2 mb-2",staticStyle:{width:"250px"},attrs:{variant:"primary"}},[e._v("\n                "+e._s(e.$t("pages.notFound.returnToDashboard"))+"\n            ")])],1),e._v(" "),s("b-img",{staticClass:"fr-shadow",attrs:{src:"static/images/ghost-shadow.svg",width:"112",height:"112",alt:"img"}})],1)])},wr=[],kr={render:_r,staticRenderFns:wr},Cr=kr,Sr=s("VU/8"),$r=_,Dr=Sr(yr,Cr,!1,$r,null,null),xr=Dr.exports,Pr={name:"OAuth-Return",components:{"bounce-loader":ge.BounceLoader},data:function(){return{loadingColor:rt.a.baseColor}},created:function(){var e=this,t=void 0;if(this.$route.params.amData)t={},B.a.each(this.$route.params.amData.replace("?","").split("&"),function(e){if(e.length>0){var s=e.split("=");t[s[0]]=s[1]}}),window.history.pushState("","",window.location.pathname),this.$router.push({name:"AccountClaiming",params:{clientToken:t.clientToken,returnParams:t.returnParams}});else{t=window.location.search.replace("?","").split("&").reduce(function(e,t){var s=t.split("="),a=[decodeURIComponent(s[1])];return e[s[0]]=e[s[0]]?e[s[0]].concat(a):a,e},{}),window.history.pushState("","",window.location.pathname),this.$root.applicationStore.clearAuthHeadersAction();var s=this.getRequestService({headers:B.a.extend(this.getAnonymousHeaders(),{"X-OpenIDM-NoSession":"true","X-OpenIDM-DataStoreToken":localStorage.getItem("dataStoreToken")})}),a=localStorage.getItem("linkedProvider");localStorage.removeItem("dataStoreToken"),localStorage.removeItem("linkedProvider"),s.post("/identityProviders?_action=handlePostAuth",t).then(function(t){var s=t.data.token,i=localStorage.getItem("accountClaimingToken");localStorage.removeItem("accountClaimingToken"),e.getRequestService({headers:{"X-OpenIDM-NoSession":"false","X-OpenIDM-OAuth-Login":"true","X-OpenIDM-DataStoreToken":s,"X-Requested-With":"XMLHttpRequest"}}).post("/authentication?_action=login").then(function(t){B.a.has(e.$root.applicationStore.state,"amDataEndpoints")&&null!==e.$root.applicationStore.state.amDataEndpoints&&(e.$root.applicationStore.setAuthHeadersAction({"X-OpenIDM-OAuth-Login":"true","X-OpenIDM-DataStoreToken":s,"X-Requested-With":"XMLHttpRequest"}),sessionStorage.setItem("amToken",s),sessionStorage.setItem("resubmitDataStoreToken","true")),e.progressiveProfileCheck(t,function(){a?e.$router.push({name:"Profile",params:{clientToken:s,linkedProvider:a}}):B.a.isNull(i)?e.$router.push("/"):e.$router.push({name:"AccountClaiming",params:{clientToken:s,originalToken:i}})})}).catch(function(){e.$router.push({name:"AccountClaiming",params:{clientToken:s,originalToken:i}})})}).catch(function(t){e.$router.push("/login"),e.displayNotification("error",t.response.data.message)})}}},Rr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"h-100 px-0",attrs:{fluid:""}},[s("div",{staticClass:"h-100 d-flex"},[s("div",{staticClass:"m-auto fr-center-card"},[s("bounce-loader",{attrs:{color:e.loadingColor}})],1)])])},Ar=[],qr={render:Rr,staticRenderFns:Ar},Nr=qr,Tr=s("VU/8"),Fr=Tr(Pr,Nr,!1,null,null,null),Er=Fr.exports,Ir={name:"Email-Validation",props:{apiType:{required:!0}}},Ur=function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-alert",{attrs:{show:""}},[e._v("\n    "+e._s(e.$t("pages.selfservice.headers."+e.apiType+".emailSent"))+"\n")])},Mr=[],Vr={render:Ur,staticRenderFns:Mr},jr=Vr,Or=s("VU/8"),Lr=Or(Ir,jr,!1,null,null,null),zr=Lr.exports,Br={name:"Reset-Stage",components:{"fr-policy-password-input":ja},props:{selfServiceDetails:{required:!0}},data:function(){return{password:"",defaultPolicyFailures:null}},methods:{getData:function(){return{password:this.password}},save:function(){this.$emit("advanceStage",this.getData())},reloadPage:function(e){e.preventDefault(),Object(z.has)(this.$route,"params.queryParams")?(delete this.$route.params.queryParams,this.$router.push("/passwordreset")):window.location.reload()}},watch:{selfServiceDetails:{handler:function(e){if(Object(z.has)(e,"requirements.error.detail.failedPolicyRequirements")){var t=Object(z.find)(e.requirements.error.detail.failedPolicyRequirements,{property:"password"});if(t&&t.policyRequirements){var s=this.$t("common.policyValidationMessages."+t.policyRequirements[0].policyRequirement,t.policyRequirements[0].params),a=this.$t("common.policyValidationMessages.policyValidationFailed",{property:t.property})+": "+s;this.displayNotification("error",a),this.defaultPolicyFailures=Object(z.map)(t.policyRequirements,"policyRequirement")}}},deep:!0}}},Hr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"end"===e.selfServiceDetails.tag?s("div",[s("b-alert",{attrs:{show:""}},[s("p",[e._v(e._s(e.$t("pages.selfservice.passwordReset.successMessage")))])])],1):"string"!=typeof e.selfServiceDetails.error?s("div",[s("b-form",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)},submit:function(e){e.preventDefault()}}},[s("fr-policy-password-input",{attrs:{defaultPolicyFailures:e.defaultPolicyFailures,policyApi:"selfservice/reset",name:"password",label:e.$t("pages.selfservice.passwordReset.newPassword")},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("b-button",{attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v("\n            "+e._s(e.$t("pages.selfservice.passwordReset.changePassword"))+"\n        ")])],1)],1):s("div",[s("b-alert",{attrs:{variant:"danger",show:""}},[s("b",[e._v(e._s(e.$t("pages.selfservice.passwordReset.errorMessage")))]),e._v(" "),s("p",[e._v(e._s(e.selfServiceDetails.error))])]),e._v(" "),s("div",{staticClass:"mt-2"},[s("a",{attrs:{href:"#/passwordreset"},on:{click:e.reloadPage}},[e._v(e._s(e.$t("pages.selfservice.passwordReset.tryAgain")))])])],1)},Xr=[],Gr={render:Hr,staticRenderFns:Xr},Wr=Gr,Qr=s("VU/8"),Yr=Qr(Br,Wr,!1,null,null,null),Kr=Yr.exports,Jr={name:"Kba-Verification",inject:["$validator"],components:{"fr-validation-error":Ee},props:{selfServiceDetails:{required:!0}},data:function(){var e=this.$i18n,t=e.locale,s=e.fallbackLocale,a=this.selfServiceDetails.requirements,i=a.properties,r=a.required;return{questionText:B.a.mapValues(i,function(e){if(B.a.has(e,"systemQuestion")){return e.systemQuestion[t]||e.systemQuestion[s]}if(B.a.has(e,"userQuestion"))return e.userQuestion}),answers:r.reduce(function(e,t){return B.a.set(e,t,"")},{})}},mounted:function(){this.$refs&&this.$refs.answer1&&this.$refs.answer1[0].focus()},methods:{emitData:function(){this.$emit("advanceStage",this.getData())},getData:function(){return this.answers},isValid:function(){return this.$validator.validateAll()},save:function(){var e=this;this.isValid().then(function(t){t&&e.emitData()})}}},Zr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)},submit:function(e){e.preventDefault()}}},[s("p",{staticClass:"text-center mb-4"},[e._v("\n        "+e._s(e.$t("pages.selfservice.passwordReset.kbaVerificationStageDescription"))+"\n    ")]),e._v(" "),e._l(e.answers,function(t,a){return s("div",{key:a,staticClass:"form-group text-left"},[s("label",{staticClass:"col-form-label pt-0 pb-2",attrs:{for:a}},[e._v(e._s(e.questionText[a]))]),e._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:e.answers[a],expression:"answers[key]",modifiers:{trim:!0}}],key:a,ref:a,refInFor:!0,class:{"form-control":!0,"is-invalid":e.errors.has(a)},attrs:{"data-vv-as":e.$t("common.user.kba.answer"),autofocus:"true",name:a,id:a},domProps:{value:e.answers[a]},on:{input:function(t){t.target.composing||e.$set(e.answers,a,t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:a}})],1)}),e._v(" "),s("b-button",{attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.$tc("common.user.kba.submitAnswers",e.selfServiceDetails.requirements.required.length))+"\n    ")])],2)},eo=[],to={render:Zr,staticRenderFns:eo},so=to,ao=s("VU/8"),io=ao(Jr,so,!1,null,null,null),ro=io.exports,oo={name:"Password-Reset",components:{Captcha:oi,EmailValidation:zr,UserQuery:Ai,ResetStage:Kr,kbaSecurityAnswerVerificationStage:ro,GenericSelfService:Vi,"bounce-loader":ge.BounceLoader,"fr-center-card":De},data:function(){return{selfServiceType:null,selfServiceDetails:null,loadingColor:rt.a.baseColor,apiType:"reset"}},mounted:function(){if(this.$route.params.queryParams){var e=this.parseQueryParams(this.$route.params.queryParams);this.advanceStage(e)}else this.loadData()},methods:{setChildComponent:function(e,t){if(this.selfServiceDetails=t,"parameters"===e)this.selfServiceType=null,this.advanceStage({});else{var s=!1;B.a.each(this.$options.components,function(t,a){B.a.toLower(a)===B.a.toLower(e)&&(s=!0)}),this.selfServiceType=s?e:"GenericSelfService"}},apiErrorCallback:function(e){this.setChildComponent("resetStage",{error:e.response.data.message})}},mixins:[We]},no=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!==e.selfServiceType&&"parameters"!==e.selfServiceType?s("fr-center-card",{attrs:{showLogo:!0}},[s("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[s("h2",{staticClass:"h2"},[e._v(e._s(e.$t("pages.selfservice.headers.reset.title")))])]),e._v(" "),s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[s(e.selfServiceType,{ref:"selfServiceStage",tag:"component",attrs:{selfServiceDetails:e.selfServiceDetails,apiType:e.apiType},on:{advanceStage:e.advanceStage}})],1),e._v(" "),s("b-card-footer",{attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[s("b-link",{attrs:{href:"#/login"}},[e._v(e._s(e.$t("pages.selfservice.signIn")))])],1)],1):s("b-container",{staticClass:"h-100 px-0",attrs:{fluid:""}},[s("div",{staticClass:"h-100 d-flex"},[s("div",{staticClass:"m-auto fr-center-card"},[s("bounce-loader",{attrs:{color:e.loadingColor}})],1)])])},lo=[],co={render:no,staticRenderFns:lo},uo=co,fo=s("VU/8"),po=fo(oo,uo,!1,null,null,null),mo=po.exports,ho=s("mvHQ"),vo=s.n(ho),go={name:"Account-Controls",components:{"fr-list-group":Ft,"fr-list-item":zt},data:function(){return{confirmDelete:!1}},mounted:function(){},methods:{deleteAccount:function(){var e=this;this.getRequestService().delete("/"+this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId).then(function(){e.$refs.deleteModal.hide(),e.displayNotification("success",e.$t("pages.profile.accountControls.deleteAccountSuccessful")),e.logoutUser()})},downloadAccount:function(){this.getRequestService().get("/"+this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId+"?_fields=*,idps/*,_meta/createDate,_meta/lastChanged,_meta/termsAccepted,_meta/loginCount",[]).then(function(e){var t=void 0;if(e.data._meta&&B.a.each(e._meta,function(t,s){s.match("_")&&delete e._meta[s]}),e.data.idps&&B.a.each(e.idps,function(e){B.a.each(e,function(t,s){s.match("_")&&B.a.isNull(s.match("_meta"))&&delete e[s]})}),delete e.data._rev,delete e.data.kbaInfo,t=vo()(e.data,null,4),navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([t],{type:"data:application/json"}),"");var s=new Blob([t],{type:"data:application/json"}),a=document.createEvent("MouseEvents"),i=document.createElement("a");i.download="userProfile.json",i.href=window.URL.createObjectURL(s),i.dataset.downloadurl=["data:application/json",i.download,i.href].join(":"),a.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(a)})},hideModal:function(){this.$refs.deleteModal.hide()}}},bo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fr-list-group",{attrs:{title:e.$t("pages.profile.accountControls.title"),subtitle:e.$t("pages.profile.accountControls.subtitle")}},[s("fr-list-item",{attrs:{collapsible:!1,panelShown:!1,hoverItem:!0},on:{"row-click":e.downloadAccount}},[s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"flex-grow-1"},[s("div",[e._v("\n                        "+e._s(e.$t("pages.profile.accountControls.downloadTitle"))+"\n                    ")]),e._v(" "),s("small",{staticClass:"text-muted subtext"},[e._v(e._s(e.$t("pages.profile.accountControls.downloadSubtitle")))])]),e._v(" "),s("a",{staticClass:"align-self-center flex-grow-2 text-right",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(e.$t("pages.profile.accountControls.downloadLink")))])])]),e._v(" "),s("fr-list-item",{directives:[{name:"b-modal",rawName:"v-b-modal.deleteAccountModal",modifiers:{deleteAccountModal:!0}}],attrs:{collapsible:!1,panelShown:!1,hoverItem:!0}},[s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"flex-grow-1"},[s("div",[e._v("\n                        "+e._s(e.$t("pages.profile.accountControls.deleteTitle"))+"\n                    ")]),e._v(" "),s("small",{staticClass:"text-muted subtext"},[e._v(e._s(e.$t("pages.profile.accountControls.deleteSubtitle")))])]),e._v(" "),s("a",{staticClass:"align-self-center flex-grow-2 text-right",attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(e.$t("pages.profile.accountControls.deleteAccount")))])])])],1),e._v(" "),s("b-modal",{ref:"deleteModal",attrs:{id:"deleteAccountModal","modal-class":"fr-full-screen","cancel-variant":"outline-secondary"}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title align-self-center text-center"},[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalTitle")))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.hideModal}},[s("i",{staticClass:"fa fa-times"})])]),e._v(" "),s("b-container",[s("h1",{staticClass:"mb-4"},[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalHeader")))]),e._v(" "),s("p",[e._v("\n                "+e._s(e.$t("pages.profile.accountControls.deleteModalDetails"))+"\n            ")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("\n                "+e._s(e.$t("pages.profile.accountControls.deleteModalDownload1"))+" "),s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadAccount(t)}}},[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalDownload2")))]),e._v(" "+e._s(e.$t("pages.profile.accountControls.deleteModalDownload3"))+"\n            ")]),e._v(" "),s("hr"),e._v(" "),s("h5",[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalContentList")))]),e._v(" "),s("ul",[s("li",[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalContentListItem")))])]),e._v(" "),s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmDelete,expression:"confirmDelete"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"confirmDeleteCheck"},domProps:{checked:Array.isArray(e.confirmDelete)?e._i(e.confirmDelete,null)>-1:e.confirmDelete},on:{change:function(t){var s=e.confirmDelete,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=e._i(s,null);a.checked?r<0&&(e.confirmDelete=s.concat([null])):r>-1&&(e.confirmDelete=s.slice(0,r).concat(s.slice(r+1)))}else e.confirmDelete=i}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"confirmDeleteCheck"}},[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalAcceptMessage")))])])]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("b-btn",{attrs:{disabled:!e.confirmDelete,type:"button",variant:"danger"},on:{click:e.deleteAccount}},[e._v(e._s(e.$t("pages.profile.accountControls.deleteModalButton")))])],1)])],1)],1)},yo=[],_o={render:bo,staticRenderFns:yo},wo=_o,ko=s("VU/8"),Co=w,So=ko(go,wo,!1,Co,"data-v-7a9983c0",null),$o=So.exports,Do={name:"LoadingButton",components:{ClipLoader:ge.ClipLoader},props:{label:String,loading:{type:Boolean,default:!1},large:{type:Boolean,default:!1}}},xo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:["btn btn-primary d-flex align-items-center",{disabled:e.loading}],attrs:{type:"button"},on:{click:function(t){return e.$emit("click")}}},[s("span",{class:[{"align-self-start":!e.large,"m-auto":e.large}]},[e._v("\n        "+e._s(e.label)+"\n    ")]),e._v(" "),s("span",{class:["fr-grow",{"fr-grow-in":e.loading}]},[s("transition",{attrs:{name:"fr-fade"}},[e.loading?s("clip-loader",{staticClass:"position-relative fr-clip-loader ml-3",attrs:{color:"white",size:"1rem"}}):e._e()],1)],1)])},Po=[],Ro={render:xo,staticRenderFns:Po},Ao=Ro,qo=s("VU/8"),No=k,To=qo(Do,Ao,!1,No,"data-v-17270933",null),Fo=To.exports,Eo={name:"Edit-KBA",components:{"fr-list-item":zt,"fr-loading-button":Fo,"fr-validation-error":Ee},$_veeValidate:{validator:"new"},props:["kbaData"],data:function(){return{questions:{},selectOptions:[],selected:[],customIndex:null,loading:!1,showCancelButton:!1}},mounted:function(){this.questions=this.kbaData.questions,this.initializeForm(this.kbaData.minimumAnswersToDefine)},methods:{initializeForm:function(e){var t=this,s=this.$i18n,a=s.locale,i=s.fallbackLocale;B.a.times(e,function(e){t.selected.push({selected:null,index:e+1,answer:"",custom:""})}),this.selectOptions=B.a.map(this.questions,function(e,t){return{value:t,text:e[a]||e[i],disabled:!0}}),this.customIndex=this.selectOptions.length+1,this.selectOptions.unshift({value:null,text:this.$t("common.user.kba.selectQuestion"),disabled:!0}),this.selectOptions.push({value:this.customIndex,text:this.$t("common.user.kba.custom"),disabled:!1})},generatePatch:function(){return[{operation:"replace",field:"/kbaInfo",value:B.a.map(this.selected,function(e){return e.custom?{answer:e.answer,customQuestion:e.custom}:{answer:e.answer,questionId:e.selected}})}]},clearComponent:function(){this.loading=!1,this.questions={},this.selectOptions=[],this.selected=[],this.customIndex=null,this.showCancelButton=!1,this.questions=this.kbaData.questions,this.initializeForm(this.kbaData.minimumAnswersToDefine),this.errors.clear()},onSaveKBA:function(){var e=this;this.isValid().then(function(t){t&&(e.loading=!0,e.$emit("updateKBA",e.generatePatch(),{onSuccess:function(){e.$refs.cancel.click()}}))})},isValid:function(){return this.$validator.validateAll()}},watch:{selected:{handler:function(e){var t=this,s=B.a.map(this.selected,function(e){if(null!==e.selected&&e.selected!==t.customIndex)return e.selected});B.a.each(this.selectOptions,function(e){B.a.includes(s,e.value)||null===e.value?e.disabled=!0:e.disabled=!1})},deep:!0},kbaData:{deep:!0,handler:B.a.noop}}},Io=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-item",{attrs:{collapsible:!0,panelShown:!1}},[s("div",{staticClass:"d-inline-flex w-100 media",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"media-body align-self-center"},[s("h6",{staticClass:"my-0"},[e._v(e._s(e.$t("pages.profile.accountSecurity.securityQuestions")))])]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showCancelButton,expression:"showCancelButton"}],ref:"cancel",staticClass:"btn btn-sm btn-link float-right btn-cancel",on:{click:function(t){return e.clearComponent()}}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showCancelButton,expression:"!showCancelButton"}],staticClass:"btn btn-sm btn-link float-right btn-edit",on:{click:function(t){e.showCancelButton=!0}}},[e._v(e._s(e.$t("common.form.reset")))])])]),e._v(" "),e.selected.length?s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("b-form",{staticClass:"w-100"},[s("b-row",[s("b-col",{attrs:{sm:"8"}},[e._l(e.selected,function(t,a){return s("fieldset",{key:a,staticClass:"pb-3"},[s("label",[e._v(e._s(e.$t("common.user.kba.question"))+" "+e._s(t.index))]),e._v(" "),s("b-form-select",{staticClass:"mb-3",attrs:{options:e.selectOptions},model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"select.selected"}}),e._v(" "),t&&t.selected===e.customIndex?s("div",{staticClass:"pb-3"},[s("label",[e._v(e._s(e.$t("pages.profile.accountSecurity.custom")))]),e._v(" "),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":e.errors.has(e.$t("pages.profile.accountSecurity.custom")+t.index)},"form-control"],attrs:{type:"text","data-vv-validate-on":"submit",name:e.$t("pages.profile.accountSecurity.custom")+t.index},model:{value:t.custom,callback:function(s){e.$set(t,"custom","string"==typeof s?s.trim():s)},expression:"select.custom"}}),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:e.$t("pages.profile.accountSecurity.custom")+t.index}})],1):e._e(),e._v(" "),s("div",{staticClass:"form-group mb-0"},[s("label",[e._v(e._s(e.$t("common.user.kba.answer")))]),e._v(" "),s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":e.errors.has(e.$t("common.user.kba.answer")+t.index)},"form-control"],attrs:{type:"text","data-vv-validate-on":"submit","data-vv-as":e.$t("common.user.kba.answer"),name:e.$t("common.user.kba.answer")+t.index},model:{value:t.answer,callback:function(s){e.$set(t,"answer","string"==typeof s?s.trim():s)},expression:"select.answer"}}),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:e.$t("common.user.kba.answer")+t.index}})],1),e._v(" "),a!==e.selected.length-1?s("hr",{staticClass:"mb-3 mt-4"}):e._e()],1)}),e._v(" "),s("fr-loading-button",{staticClass:"ld-ext-right mb-3",attrs:{type:"button",variant:"primary",label:e.$t("common.user.kba.saveQuestions"),loading:e.loading},on:{click:e.onSaveKBA}})],2)],1)],1)],1):e._e()])},Uo=[],Mo={render:Io,staticRenderFns:Uo},Vo=Mo,jo=s("VU/8"),Oo=jo(Eo,Vo,!1,null,null,null),Lo=Oo.exports,zo={$_veeValidate:{validator:"new"},name:"Edit-Password",components:{"fr-list-item":zt,"fr-loading-button":Fo,"fr-password-policy-input":ja,"fr-validation-error":Ee},data:function(){return{currentPassword:"",newPassword:"",loading:!1,showNew:!0,showCurrent:!0,inputCurrent:"password",inputNew:"password",userId:this.$root.userStore.getUserState().userId,showCancelButton:!1}},methods:{clearComponent:function(){this.currentPassword="",this.newPassword="",this.errors.clear(),this.showCancelButton=!1},resetComponent:function(){this.loading=!1,this.currentPassword="",this.newPassword="",this.$refs.cancel.click()},displayError:function(e){403===e.response.status&&this.errors.add({field:"currentPassword",msg:"Incorrect password provided"})},onSavePassword:function(){var e=this,t={"X-Requested-With":"XMLHttpRequest","X-OpenIDM-Reauth-Password":this.currentPassword},s=[{operation:"add",field:"/password",value:this.newPassword}],a=this.resetComponent.bind(this),i=this.displayError.bind(this);this.errors.clear(),this.$validator.validateAll().then(function(r){r?e.$emit("updateProfile",s,{headers:t,onSuccess:a,onError:i}):e.displayNotification("error",e.$t("pages.profile.accountSecurity.invalidPassword"))})},validate:function(){return this.$validator.validateAll()},revealNew:function(){"password"===this.inputNew?(this.inputNew="text",this.showNew=!1):(this.inputNew="password",this.showNew=!0)},revealCurrent:function(){"password"===this.inputCurrent?(this.inputCurrent="text",this.showCurrent=!1):(this.inputCurrent="password",this.showCurrent=!0)}}},Bo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-item",{attrs:{collapsible:!0,panelShown:!1}},[s("div",{staticClass:"d-inline-flex w-100 media",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"media-body align-self-center"},[s("h6",[e._v(e._s(e.$t("pages.profile.accountSecurity.password")))])]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showCancelButton,expression:"showCancelButton"}],ref:"cancel",staticClass:"btn btn-sm btn-link float-right btn-cancel",on:{click:function(t){return e.clearComponent()}}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showCancelButton,expression:"!showCancelButton"}],staticClass:"btn btn-sm btn-link float-right btn-edit",on:{click:function(t){e.showCancelButton=!0}}},[e._v(e._s(e.$t("common.form.reset")))])])]),e._v(" "),s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("b-form",{staticClass:"w-100"},[s("b-row",[s("b-col",{attrs:{sm:"8"}},[s("b-form-group",[s("label",{attrs:{for:"currentPassword"}},[e._v(e._s(e.$t("pages.profile.accountSecurity.currentPassword")))]),e._v(" "),s("div",{staticClass:"form-label-password form-label-group mb-0"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":e.errors.has("currentPassword")},"form-control"],attrs:{id:"currentPassword",name:"currentPassword","data-vv-validate-on":"submit","data-vv-as":e.$t("pages.profile.accountSecurity.currentPassword"),type:e.inputCurrent},model:{value:e.currentPassword,callback:function(t){e.currentPassword=t},expression:"currentPassword"}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("b-btn",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.revealCurrent}},[s("i",{class:[{"fa-eye-slash":!e.showCurrent},{"fa-eye":e.showCurrent},"fa"]})])],1)],1),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:"currentPassword"}})],1),e._v(" "),s("fr-password-policy-input",{attrs:{policyApi:this.$root.userStore.state.managedResource+"/"+e.userId},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}},[s("b-form-group",{staticClass:"mb-3",attrs:{slot:"custom-input"},slot:"custom-input"},[s("label",{attrs:{for:"newPassword"}},[e._v(e._s(e.$t("pages.profile.accountSecurity.newPassword")))]),e._v(" "),s("div",{staticClass:"form-label-password form-label-group mb-0"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate.initial",value:"required|policy",expression:"'required|policy'",modifiers:{initial:!0}}],attrs:{id:"newPassword",type:e.inputNew,name:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.revealNew}},[s("i",{class:[{"fa-eye-slash":!e.showNew},{"fa-eye":e.showNew},"fa"]})])])],1)])],1),e._v(" "),s("fr-loading-button",{staticClass:"ld-ext-right mb-3",attrs:{type:"button",variant:"primary",label:e.$t("pages.profile.accountSecurity.savePassword"),loading:e.loading},on:{click:e.onSavePassword}}),e._v(" "),this.$root.applicationStore.state.passwordReset?s("div",{staticClass:"text-nowrap pb-2"},[e._v(e._s(e.$t("pages.profile.accountSecurity.rememberPassword"))+" "),s("router-link",{attrs:{to:"PasswordReset"}},[e._v(e._s(e.$t("pages.profile.accountSecurity.resetPassword")))])],1):e._e()],1)],1)],1)],1)])},Ho=[],Xo={render:Bo,staticRenderFns:Ho},Go=Xo,Wo=s("VU/8"),Qo=Wo(zo,Go,!1,null,null,null),Yo=Qo.exports,Ko={name:"Account-Security",data:function(){return{isOnKBA:!1,kbaData:{}}},components:{"fr-list-group":Ft,"fr-edit-kba":Lo,"fr-edit-password":Yo},methods:{sendUpdateKBA:function(e,t){this.$emit("updateKBA",e,t)},sendUpdateProfile:function(e,t){this.$emit("updateProfile",e,t)}},mounted:function(){var e=this;this.getRequestService({headers:this.getAnonymousHeaders()}).get("selfservice/kba").then(function(t){e.isOnKBA=!0,e.kbaData=t.data}).catch(function(){e.isOnKBA=!1})}},Jo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-group",{attrs:{title:e.$t("pages.profile.accountSecurity.title"),subtitle:e.$t("pages.profile.accountSecurity.subtitle")}},[s("fr-edit-password",{on:{updateProfile:e.sendUpdateProfile}}),e._v(" "),e.isOnKBA&&!1===e.$root.userStore.state.internalUser?s("fr-edit-kba",{attrs:{kbaData:e.kbaData},on:{updateKBA:e.sendUpdateKBA}}):e._e()],1)},Zo=[],en={render:Jo,staticRenderFns:Zo},tn=en,sn=s("VU/8"),an=sn(Ko,tn,!1,null,null,null),rn=an.exports,on={name:"Edit-Personal-Info",mixins:[Ba],components:{"fr-validation-error":Ee},$_veeValidate:{validator:"new"},props:{schema:{type:Object,required:!0},profile:{type:Object,required:!0}},data:function(){return{formFields:[],originalFormFields:[],title:this.$t("pages.profile.editProfile.userDetailsTitle")}},methods:{generateFormFields:function(){var e=this,t=this.schema,s=t.order,a=t.properties,i=t.required,r=B.a.filter(s,function(e){return a[e].viewable&&a[e].userEditable&&"array"!==a[e].type&&"object"!==a[e].type});return B.a.map(r,function(t){return{name:t,key:t,title:a[t].title,value:e.profile[t]||null,type:a[t].type,required:B.a.includes(i,t)}})},hideModal:function(){this.$refs.fsModal.hide()},setModal:function(){var e=this.generateFormFields();this.formFields=e,this.originalFormFields=B.a.cloneDeep(e)},saveForm:function(){var e=this;this.isValid().then(function(t){if(t){var s=e.getRequestService(),a={};B.a.each(e.formFields,function(e){null!==e.value&&(a[e.name]=e.value)}),s.post("policy/"+e.$root.userStore.state.managedResource+"/"+e.$root.userStore.state.userId+"?_action=validateObject",a).then(function(t){if(0===t.data.failedPolicyRequirements.length)e.$emit("updateProfile",e.generateUpdatePatch(e.originalFormFields,e.formFields)),e.errors.clear(),e.hideModal();else{var s=e.findPolicyError({data:{detail:{failedPolicyRequirements:t.data.failedPolicyRequirements}}},e.formFields);e.errors.clear(),s.length>0?B.a.each(s,function(t){t.exists&&e.errors.add(t)}):e.displayNotification("error",e.$t("pages.profile.editProfile.failedProfileSave"))}})}})},isValid:function(){return this.$validator.validateAll()}}},nn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"fsModal",attrs:{id:"userDetailsModal","modal-class":"fr-full-screen","cancel-variant":"outline-secondary"},on:{show:e.setModal},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveForm(t))}}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title align-self-center text-center"},[e._v(e._s(e.title))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.hideModal}},[s("i",{staticClass:"fa fa-times"})])]),e._v(" "),s("b-container",[s("b-row",[s("b-col",{attrs:{sm:"8","offset-sm":"2"}},[e.formFields.length>0?s("b-form",{staticClass:"mb-3 fr-edit-personal-form",staticStyle:{"flex-direction":"column"},attrs:{name:"edit-personal-form"}},[e._l(e.formFields,function(t,a){return["string"===t.type||"number"===t.type?s("b-form-group",{key:a,staticStyle:{"min-width":"200px"}},[s("label",{attrs:{for:t.title}},[e._v(e._s(t.title))]),e._v(" "),t.required?e._e():s("small",{staticClass:"text-muted ml-1"},[e._v(e._s(e.$t("pages.profile.editProfile.optional")))]),e._v(" "),"string"===t.type?s("input",{directives:[{name:"validate",rawName:"v-validate",value:t.required?"required":"",expression:"field.required ? 'required' : ''"},{name:"model",rawName:"v-model.trim",value:e.formFields[a].value,expression:"formFields[index].value",modifiers:{trim:!0}}],class:[{"is-invalid":e.errors.has(t.name)},"form-control"],attrs:{"data-vv-validate-on":"submit",name:t.name,type:t.type,"data-vv-as":t.title},domProps:{value:e.formFields[a].value},on:{input:function(t){t.target.composing||e.$set(e.formFields[a],"value",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}):s("input",{directives:[{name:"validate",rawName:"v-validate",value:t.required?"required":"",expression:"field.required ? 'required' : ''"},{name:"model",rawName:"v-model.number",value:e.formFields[a].value,expression:"formFields[index].value",modifiers:{number:!0}}],class:[{"is-invalid":e.errors.has(t.name)},"form-control"],attrs:{"data-vv-validate-on":"submit",name:t.name,type:t.type,"data-vv-as":t.title},domProps:{value:e.formFields[a].value},on:{input:function(t){t.target.composing||e.$set(e.formFields[a],"value",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("fr-validation-error",{attrs:{validatorErrors:e.errors,fieldName:t.name}})],1):e._e(),e._v(" "),"boolean"===t.type?s("b-form-group",{key:a},[s("div",{staticClass:"d-flex flex-column"},[s("label",{staticClass:"mr-auto",attrs:{for:t.title}},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"mr-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")},value:e.formFields[a].value},on:{change:function(t){e.formFields[a].value=!e.formFields[a].value}}})],1)])]):e._e()]})],2):[s("h3",{staticClass:"text-center"},[e._v(e._s(e.$t("pages.profile.editProfile.noFields")))])]],2)],1)],1),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"primary",disabled:e.$root.userStore.state.internalUser},on:{click:e.saveForm}},[e._v(e._s(e.$t("common.form.saveChanges")))])],1)])],1)},ln=[],cn={render:nn,staticRenderFns:ln},un=cn,dn=s("VU/8"),fn=C,pn=dn(on,un,!1,fn,null,null),mn=pn.exports,hn={name:"Preferences",components:{"fr-list-group":Ft,"fr-list-item":zt},data:function(){return{preferences:{}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this,t=B.a.keys(this.$root.userStore.state.profile.preferences),s=B.a.cloneDeep(this.$root.userStore.state.schema.properties.preferences.properties);B.a.each(t,function(t){s[t].value=e.$root.userStore.state.profile.preferences[t],delete s[t].type}),this.preferences=s},generatePatch:function(e,t){return[{operation:"replace",field:"/preferences/"+e,value:t}]},savePreferences:function(e,t){this.$emit("updateProfile",this.generatePatch(e,t))}}},vn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-group",{attrs:{title:e.$t("pages.profile.preferences.title"),subtitle:e.$t("pages.profile.preferences.subtitle")}},e._l(e.preferences,function(t,a){return s("fr-list-item",{key:a,attrs:{collapsible:!1,panelShown:!1}},[s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("h6",{staticClass:"mt-3"},[e._v(e._s(t.description))]),e._v(" "),s("div",{staticClass:"ml-auto"},[s("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{id:a,height:28,width:56,sync:!0,cssColors:!0,value:t.value},on:{change:function(t){return e.savePreferences(a,t.value)}}})],1)])])}),1)},gn=[],bn={render:vn,staticRenderFns:gn},yn=bn,_n=s("VU/8"),wn=S,kn=_n(hn,yn,!1,wn,"data-v-f30fa5d6",null),Cn=kn.exports,Sn={name:"Image-Fallback",props:["src","width","height","alt","fallback"],data:function(){return{imageFound:!1}},mounted:function(){var e=this;!B.a.isNull(this.src)&&!B.a.isUndefined(this.src)&&this.src.length>0?fe.a.get(""+this.src).then(function(t){var s=t.status;e.imageFound=200===s}).catch(function(t){t&&(e.imageFound=!1)}):this.imageFound=!1}},$n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.imageFound?s("b-img",{attrs:{src:e.src,width:e.width,height:e.width,alt:e.alt}}):s("span",{staticClass:"icon-holder p-2 d-flex bg-light border rounded"},[s("i",{class:["fa",e.fallback,"fa-lg text-dark mt-auto"]})])],1)},Dn=[],xn={render:$n,staticRenderFns:Dn},Pn=xn,Rn=s("VU/8"),An=$,qn=Rn(Sn,Pn,!1,An,"data-v-5cfc03be",null),Nn=qn.exports,Tn={name:"Trusted-Devices",components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-fallback-image":Nn},data:function(){return{devices:{},confirmDevice:{name:"",id:null}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this,t=this.$root.userStore.state.userName,s=this.getRequestService(),a=this.$root.applicationStore.state.amDataEndpoints.baseUrl+t+this.$root.applicationStore.state.amDataEndpoints.trustedDevices+"?_queryId=*";s.get(a,{withCredentials:!0}).then(function(t){e.devices=t.data.result}).catch(function(t){e.displayNotification("error",t.response.data.message)})},showConfirmationModal:function(e){this.confirmDevice.id=e.uuid,this.confirmDevice.name=e.name,this.$refs.fsModal.show()},removeDevice:function(e){var t=this,s=this.$root.userStore.state.userName,a=this.getRequestService(),i=this.$root.applicationStore.state.amDataEndpoints.baseUrl+s+this.$root.applicationStore.state.amDataEndpoints.trustedDevices+e;a.delete(i,{withCredentials:!0}).then(function(){t.displayNotification("success",t.$t("pages.profile.trustedDevices.removeSuccess",{deviceName:t.confirmDevice.name})),t.loadData(),t.$refs.fsModal.hide()}).catch(function(e){t.displayNotification("error",e.response.data.message)})}}},Fn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-group",{directives:[{name:"show",rawName:"v-show",value:e.devices,expression:"devices"}],attrs:{title:e.$t("pages.profile.trustedDevices.title"),subtitle:e.$t("pages.profile.trustedDevices.subtitle")}},[e.devices.length>0?e._l(e.devices,function(t,a){return s("fr-list-item",{key:a,attrs:{collapsible:!1,panelShown:!1}},[s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"d-flex mr-3 align-self-top"},[s("fr-fallback-image",{attrs:{src:t.logo_uri,fallback:"fa-television m-auto pt-1 pb-1"}})],1),e._v(" "),s("div",{staticClass:"flex-grow-1"},[s("div",[e._v("\n                        "+e._s(t.name)+"\n                    ")]),e._v(" "),s("small",{staticClass:"text-muted subtext"},[e._v(e._s(t.lastSelectedDate))])]),e._v(" "),s("a",{staticClass:"align-self-center flex-grow-2 text-right",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.showConfirmationModal(t)}}},[e._v(e._s(e.$t("common.form.remove")))])])])}):[s("b-list-group-item",{staticClass:"noncollapse text-center"},[e._v("\n            "+e._s(e.$t("pages.profile.trustedDevices.noDevices"))+"\n        ")])],e._v(" "),s("b-modal",{ref:"fsModal",attrs:{id:"trustedDevicesConfirmationModal","cancel-variant":"outline-secondary"}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h6",{staticClass:"my-0"},[e._v(e._s(e.$t("common.form.confirm")))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.$refs.fsModal.hide()}}},[s("i",{staticClass:"fa fa-times"})])]),e._v("\n        "+e._s(e.$t("pages.profile.trustedDevices.removeConfirmation",{deviceName:e.confirmDevice.name}))+"\n        "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$refs.fsModal.hide()}}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:function(t){return e.removeDevice(e.confirmDevice.id)}}},[e._v(e._s(e.$t("common.form.remove")))])],1)])])],2)},En=[],In={render:Fn,staticRenderFns:En},Un=In,Mn=s("VU/8"),Vn=D,jn=Mn(Tn,Un,!1,Vn,"data-v-497789d9",null),On=jn.exports,Ln={name:"Authorized-Applications",components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-fallback-image":Nn},data:function(){return{oauthApplications:{},confirmApplication:{name:"",id:null}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this,t=this.$root.userStore.state.userName,s=this.getRequestService(),a=this.$root.applicationStore.state.amDataEndpoints.baseUrl+t+this.$root.applicationStore.state.amDataEndpoints.oauthApplications+"?_queryId=*";s.get(a,{withCredentials:!0}).then(function(t){e.oauthApplications=t.data.result}).catch(function(t){e.displayNotification("error",t.response.data.message)})},showConfirmationModal:function(e){this.confirmApplication.id=e._id,this.$refs.fsModal.show()},removeApplication:function(e){var t=this,s=this.$root.userStore.state.userName,a=this.getRequestService(),i=this.$root.applicationStore.state.amDataEndpoints.baseUrl+s+this.$root.applicationStore.state.amDataEndpoints.oauthApplications+e;a.delete(i,{withCredentials:!0}).then(function(){t.displayNotification("success",t.$t("pages.profile.oauthApplications.removeSuccess",{applicationName:t.confirmApplication.id})),t.loadData(),t.$refs.fsModal.hide()}).catch(function(e){t.displayNotification("error",e.response.data.message)})}}},zn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-group",{directives:[{name:"show",rawName:"v-show",value:e.oauthApplications,expression:"oauthApplications"}],attrs:{title:e.$t("pages.profile.oauthApplications.title"),subtitle:e.$t("pages.profile.oauthApplications.subtitle")}},[e.oauthApplications.length>0?e._l(e.oauthApplications,function(t,a){return s("fr-list-item",{key:a,attrs:{collapsible:!1,panelShown:!1}},[s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"d-flex mr-3 align-self-top"},[s("img",{attrs:{src:t.logo_uri||"static/images/authorized-app.svg",width:"25"}})]),e._v(" "),s("div",{staticClass:"flex-grow-1"},[s("div",[e._v("\n                        "+e._s(t._id)+"\n                    ")]),e._v(" "),s("small",{staticClass:"text-muted subtext"},[e._v(e._s(e.$t("pages.profile.oauthApplications.expires"))+" "+e._s(new Date(t.expiryDateTime).toUTCString()))])]),e._v(" "),s("a",{staticClass:"align-self-center flex-grow-2 text-right",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.showConfirmationModal(t)}}},[e._v(e._s(e.$t("common.form.remove")))])])])}):[s("b-list-group-item",{staticClass:"noncollapse text-center"},[e._v("\n            "+e._s(e.$t("pages.profile.oauthApplications.noApplications"))+"\n        ")])],e._v(" "),s("b-modal",{ref:"fsModal",attrs:{id:"authAppConfirmationModal","cancel-variant":"outline-secondary"}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h6",{staticClass:"my-0"},[e._v(e._s(e.$t("common.form.confirm")))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.$refs.fsModal.hide()}}},[s("i",{staticClass:"fa fa-times"})])]),e._v("\n        "+e._s(e.$t("pages.profile.oauthApplications.removeConfirmation",{applicationName:e.confirmApplication.name}))+"\n        "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$refs.fsModal.hide()}}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:function(t){return e.removeApplication(e.confirmApplication.id)}}},[e._v(e._s(e.$t("common.form.remove")))])],1)])])],2)},Bn=[],Hn={render:zn,staticRenderFns:Bn},Xn=Hn,Gn=s("VU/8"),Wn=x,Qn=Gn(Ln,Xn,!1,Wn,"data-v-6553355e",null),Yn=Qn.exports,Kn=function(e,t){var s=t._c;return s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-xl-5 mb-3"},[t._v(t._s(t.parent.$t("pages.profile.consent.accountAccess")))]),t._v(" "),s("dd",{staticClass:"col-xl-7 mb-4"},[s("ul",{staticClass:"list-unstyled text-muted"},t._l(t.props.fields,function(e){return s("li",{key:e.name,staticClass:"py-1"},[s("i",{staticClass:"fa fa-check fa-fw text-success mr-2"}),t._v(t._s(e.title))])}),0)])])},Jn=[],Zn={render:Kn,staticRenderFns:Jn},el=Zn,tl=s("VU/8"),sl=tl(null,el,!0,null,null,null),al=sl.exports,il={name:"Consent",components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-access-level":al,"fr-fallback-image":Nn},props:["consentedMappings"],data:function(){return{consentableMappings:[]}},computed:{mappings:function(){var e=this;return this.consentableMappings.map(function(t){var s=B.a.find(e.consentedMappings,{mapping:t.name}),a="pages.profile.consent.";return t.showDetails=!1,B.a.isUndefined(s)?(t.consented=!1,a+="allowConsentHeader",t.subTitle=e.$t("pages.profile.consent.notAuthorized")):(t.consented=!0,t.consentDate=s.consentDate,a+="denyConsentHeader",t.subTitle=e.$t("pages.profile.consent.authorized")+" "+X()(t.consentDate).format("MMMM Do YYYY")),t.modalHeader=e.$t(a),t})}},created:function(){var e=this;this.getRequestService().post("consent?_action=getConsentMappings").then(function(t){var s=t.data;e.consentableMappings=s})},methods:{showModal:function(e){B.a.first(this.$refs[e]).show()},toggleConsentAndHideModal:function(e){this.toggleConsent(e),this.hideModal(e.name)},hideModal:function(e){B.a.first(this.$refs[e]).hide()},generatePatch:function(e){var t=e.consentDate,s=e.name,a={consentDate:t,mapping:s},i="/consentedMappings",r=void 0;return e.consented?r="remove":(a.consentDate=(new Date).toISOString(),i+="/-",r="add"),[{field:i,operation:r,value:a}]},toggleConsent:function(e,t){this.$emit("updateProfile",this.generatePatch(e))}}},rl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fr-list-group",{directives:[{name:"show",rawName:"v-show",value:e.mappings.length,expression:"mappings.length"}],attrs:{title:e.$t("pages.profile.consent.title"),subtitle:e.$t("pages.profile.consent.subtitle")}},e._l(e.mappings,function(t){return s("fr-list-item",{key:t.name,attrs:{collapsible:t.consented,panelShown:!1}},[s("template",{staticClass:"overflow:hidden;",slot:"list-item-header"},[s("fr-fallback-image",{staticClass:"mr-3",attrs:{src:t.icon,width:"24",height:"24",alt:t.name,fallback:"fa-gear"}}),e._v(" "),s("div",{staticClass:"media-body",staticStyle:{width:"100%"}},[s("div",{staticClass:"d-block"},[s("h6",{staticClass:"my-0"},[e._v(e._s(t.displayName))]),e._v(" "),s("small",{staticClass:"text-muted"},[e._v(e._s(t.subTitle))])])]),e._v(" "),s("div",{staticClass:"d-flex align-self-right"},[s("b-button",{attrs:{type:"button",variant:"link"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.showModal(t.name)}}},[e._v("\n                        "+e._s(e.$t("pages.profile.consent."+(t.consented?"deny":"allow")))+"\n                    ")]),e._v(" "),t.consented?s("div",{staticClass:"caret ml-2 my-auto"},[s("i",{staticClass:"fa fa-angle-down fa-lg pr-0 caret-down align-self-center"}),e._v(" "),s("i",{staticClass:"fa fa-angle-up fa-lg pr-0 pt-1 caret-up align-self-center"})]):e._e()],1),e._v(" "),s("b-modal",{ref:t.name,refInFor:!0,attrs:{id:t.name,size:"md","cancel-variant":"outline-secondary"}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title align-self-center text-center"},[e._v(e._s(t.modalHeader))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.hideModal(t.name)}}},[s("i",{staticClass:"fa fa-times"})])]),e._v(" "),s("b-container",[t.consented?s("p",{domProps:{innerHTML:e._s(e.$t("pages.profile.consent.confirmDeny",{mappingName:t.displayName}))}}):s("fr-access-level",{attrs:{fields:t.fields}})],1),e._v(" "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.hideModal(t.name)}}},[e._v(e._s(e.$t("common.form.cancel")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:t.consented?"danger":"primary"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.toggleConsentAndHideModal(t)}}},[e._v("\n                                "+e._s(e.$t("pages.profile.consent."+(t.consented?"deny":"allow")))+"\n                            ")])],1)])],1)],1),e._v(" "),s("div",{attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("fr-access-level",{attrs:{fields:t.fields}})],1)],2)}),1)},ol=[],nl={render:rl,staticRenderFns:ol},ll=nl,cl=s("VU/8"),ul=cl(il,ll,!1,null,null,null),dl=ul.exports,fl={name:"Social-Identity-Panel",props:["provider"],data:function(){return{profile:{}}},created:function(){var e=this;this.getRequestService().post("identityProviders?_action=normalizeProfile",this.getProfileRequestPayload()).then(function(t){var s=t.data;e.profile=B.a.first(s)})},methods:{getProfileRequestPayload:function(){var e=this,t=this.provider.propertyMap.reduce(function(t,s){return B.a.set(t,s.source,e.provider[s.source])},{});return t._refResourceCollection=this.provider._refResourceCollection,{rawProfile:t}},capitalize:B.a.capitalize},computed:{showAccountDetails:function(){var e=!B.a.isEmpty(this.profile),t=B.a.has(this.profile,"displayName"),s=B.a.has(this.profile,"email")||B.a.has(this.profile,"username");return e&&(t||s)},photoUrl:function(){return this.profile.photoUrl||"static/images/profile-default.png"},accountDisplayName:function(){return this.profile.email||this.profile.username}}},pl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showAccountDetails?s("div",{staticClass:"row mb-4"},[s("strong",{staticClass:"col fr-social-details-title"},[e._v("\n            "+e._s(e.$t("pages.profile.socialSignIn.linkedAccount"))+"\n        ")]),e._v(" "),s("div",{staticClass:"col-8"},[s("div",{staticClass:"media"},[s("b-img",{staticClass:"my-auto mr-3",attrs:{src:e.photoUrl,rounded:"circle",width:"40",height:"40",alt:"img"}}),e._v(" "),s("div",{staticClass:"media-body"},[s("strong",{staticClass:"fr-social-details-title d-block mb-0"},[e._v(e._s(e.profile.displayName))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.accountDisplayName,expression:"accountDisplayName"}],staticClass:"text-muted"},[e._v(e._s(e.accountDisplayName))])])],1)])]):e._e(),e._v(" "),s("div",{staticClass:"row"},[s("strong",{staticClass:"col fr-social-details-title"},[e._v("\n            "+e._s(e.$t("pages.profile.socialSignIn.sharing"))+"\n        ")]),e._v(" "),s("div",{staticClass:"col-8 text-muted"},e._l(e.provider.scope,function(t,a){return s("span",{staticClass:"d-block py-1"},[s("i",{staticClass:"fa fa-check text-success mr-2"}),e._v("\n                "+e._s(e.capitalize(t))+"\n            ")])}),0)])])},ml=[],hl={render:pl,staticRenderFns:ml},vl=hl,gl=s("VU/8"),bl=gl(fl,vl,!1,null,null,null),yl=bl.exports,_l={name:"Social-Identities",components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-social-identity-panel":yl},props:{clientToken:String,linkedProvider:String},data:function(){return{allAvailableProviders:[],connectedProviders:[],providers:[],toDisconnect:{}}},created:function(){var e=this;if(!B.a.isUndefined(this.clientToken)){this.getRequestService().post(this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId+"?_action=bind&provider="+this.linkedProvider,vo()(this.clientToken)).then(function(){e.getAllConnectedProviders(e.getRequestService({headers:e.getAnonymousHeaders()})),e.displayNotification("success",B.a.find(e.providers,{provider:e.linkedProvider}).uiConfig.buttonDisplayName+" has been linked"),delete e.clientToken}).catch(function(t){e.displayNotification("error",t.response.data.message)})}},mounted:function(){this.loadData()},computed:{disconnectedProvider:function(){return B.a.get(this.toDisconnect,"uiConfig.buttonDisplayName")||""}},methods:{loadData:function(){var e=this;this.providers=[];var t=this.getRequestService({headers:this.getAnonymousHeaders()});t.get("/identityProviders").then(function(s){e.allAvailableProviders=s.data.providers,e.getAllConnectedProviders(t)}).catch(function(t){e.displayNotification("error",t.response.data.message)})},getAllConnectedProviders:function(e){var t=this;e.get(this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId+"?_fields=idps/*").then(function(e){t.connectedProviders=e.data.idps,t.providers=t.setProviders()}).catch(function(e){t.displayNotification("error",e.response.data.message)})},setProviders:function(){var e=this,t=[];return B.a.each(this.allAvailableProviders,function(s){var a=!1;B.a.each(e.connectedProviders,function(e){B.a.includes(e._refResourceCollection,s.provider)&&(a=!0,t.push(B.a.extend(e,s)))}),a||t.push(s)}),t},showModal:function(e){this.toDisconnect=B.a.find(this.providers,{provider:e}),this.$refs.disconnectModal.show()},hideModal:function(){this.toDisconnect={},this.$refs.disconnectModal.hide()},connectProvider:function(e){var t=this;this.getRequestService({headers:this.getAnonymousHeaders()}).post("/identityProviders?_action=getAuthRedirect",{provider:e,landingPage:window.location.protocol+"/#/"+window.location.host+"/login?_oauthReturn=true&provider="+e+"&gotoURL=profile"}).then(function(t){localStorage.setItem("linkedProvider",e),localStorage.setItem("dataStoreToken",t.data.token),window.location.href=t.data.redirect}).catch(function(e){t.displayNotification("error",e.response.data.message)})},disconnectProvider:function(){var e=this;this.getRequestService({headers:this.getAnonymousHeaders()}).post(this.$root.userStore.state.managedResource+"/"+this.$root.userStore.state.userId+"?_action=unbind&provider="+this.toDisconnect.provider).then(function(){e.connectedProviders.splice(B.a.findIndex(e.connectedProviders,{provider:e.toDisconnect.provider}),1),e.providers=e.setProviders(),e.displayNotification("success",B.a.find(e.providers,{provider:e.toDisconnect.provider}).uiConfig.buttonDisplayName+" has been unlinked"),e.hideModal()}).catch(function(t){e.displayNotification("error",e.$t(t.response.data.message)),e.hideModal()})}}},wl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return this.providers.length>0?s("div",[s("fr-list-group",{attrs:{title:e.$t("pages.profile.socialSignIn.title"),subtitle:e.$t("pages.profile.socialSignIn.subtitle")}},e._l(e.providers,function(t,a){return s("fr-list-item",{key:a,attrs:{collapsible:void 0!==t._id,panelShown:!1,hoverItem:!0}},[s("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[s("div",{staticClass:"flex-grow-1"},[t.uiConfig.buttonImage?s("b-img",{staticClass:"mr-3",attrs:{src:"static/"+t.uiConfig.buttonImage,width:"24",height:"24"}}):s("span",{staticClass:"fr-social-icon mr-3 text-center",style:"background: "+t.uiConfig.iconBackground+"; color:"+t.uiConfig.iconFontColor+";"},[s("i",{class:["fa",t.uiConfig.iconClass]})]),e._v(" "),s("span",[e._v(e._s(t.uiConfig.buttonDisplayName))])],1),e._v(" "),s("div",{staticClass:"float-right d-flex"},[s("a",{staticClass:"align-self-center flex-grow-2 text-right",attrs:{href:"#"}},[t._refResourceId?s("span",{on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.showModal(t.provider)}}},[e._v(e._s(e.$t("pages.profile.socialSignIn.disconnect")))]):s("span",{on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.connectProvider(t.provider)}}},[e._v(e._s(e.$t("pages.profile.socialSignIn.connect")))])]),e._v(" "),t._id?s("div",{staticClass:"caret d-flex ml-3"},[s("i",{staticClass:"fa fa-angle-down fa-lg pr-0 caret-down align-self-center"}),e._v(" "),s("i",{staticClass:"fa fa-angle-up fa-lg pr-0 pt-1 caret-up align-self-center"})]):e._e()])]),e._v(" "),t._id?s("div",{attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[s("fr-social-identity-panel",{attrs:{provider:t}})],1):e._e()])}),1),e._v(" "),s("b-modal",{ref:"disconnectModal",attrs:{id:"showModal","cancel-variant":"outline-secondary"}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title align-self-center text-center"},[e._v(e._s(e.$t("pages.profile.socialSignIn.disconnect"))+" "+e._s(e.disconnectedProvider))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.hideModal}},[s("i",{staticClass:"fa fa-times"})])]),e._v(" "),s("b-container",[e._v("\n            "+e._s(e.$t("pages.profile.socialSignIn.disconnectConfirmMsg",{provider:e.disconnectedProvider}))+"\n        ")]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("common.form.close")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:e.disconnectProvider}},[e._v(e._s(e.$t("pages.profile.socialSignIn.disconnect")))])],1)])],1)],1):e._e()},kl=[],Cl={render:wl,staticRenderFns:kl},Sl=Cl,$l=s("VU/8"),Dl=P,xl=$l(_l,Sl,!1,Dl,"data-v-2c7f3a48",null),Pl=xl.exports,Rl={name:"Profile",props:{clientToken:String,linkedProvider:String,openProfile:{required:!1,default:!1}},components:{"fr-account-controls":$o,"fr-account-security":rn,"fr-edit-personal-info":mn,"fr-preferences":Cn,"fr-trusted-devices":On,"fr-authorized-applications":Yn,"fr-consent":dl,"fr-social-identities":Pl},mounted:function(){this.openProfile&&this.$refs.editProfileButton.click()},computed:{fullName:function(){var e="";return e=this.$root.userStore.state.givenName.length>0||this.$root.userStore.state.sn.length>0?B.a.startCase(this.$root.userStore.state.givenName+" "+this.$root.userStore.state.sn):this.$root.userStore.state.userId,e},email:function(){return this.$root.userStore.state.email},profile:function(){return this.$root.userStore.state.profile},schema:function(){return this.$root.userStore.state.schema}},methods:{updateProfile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.makeUpdateRequest(this.$root.userStore.state.managedResource,e,t)},updateKBA:function(e,t){this.makeUpdateRequest("selfservice/user",e,t)},makeUpdateRequest:function(e,t){var s=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.successMsg||this.$t("common.user.profile.updateSuccess"),r=this.$root.userStore.state.userId;this.getRequestService({headers:a.headers}).patch(e+"/"+r,t).then(function(e){s.$root.userStore.setProfileAction(e.data),s.displayNotification("success",i),a.onSuccess&&a.onSuccess()}).catch(function(e){var t=a.errorMsg||e.response.data.message;s.displayNotification("error",t),a.onError&&a.onError(e)})}}},Al=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("b-row",{staticClass:"my-5"},[s("b-col",{staticClass:"profileCol mb-4",attrs:{lg:"4"}},[s("b-card",{staticClass:"text-center mb-4"},[s("b-img",{staticClass:"m-1 mb-3",attrs:{src:"static/images/profile-default.png",rounded:"circle",width:"112",height:"112",alt:"img"}}),e._v(" "),s("h4",[e._v(e._s(e.fullName))]),e._v(" "),s("span",{staticClass:"text-muted"},[e._v(e._s(e.email))]),e._v(" "),!1===e.$root.userStore.state.internalUser?s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.userDetailsModal",modifiers:{userDetailsModal:!0}}],ref:"editProfileButton",staticClass:"mt-4",attrs:{variant:"primary",block:""}},[e._v("\n                    "+e._s(e.$t("pages.profile.editPersonalInfo"))+"\n                ")]):e._e()],1),e._v(" "),s("fr-edit-personal-info",{attrs:{schema:e.schema,profile:e.profile},on:{updateProfile:e.updateProfile}})],1),e._v(" "),s("b-col",{staticClass:"detailsCol",attrs:{lg:"8"}},[s("b-tabs",[s("b-tab",{attrs:{title:e.$t("pages.profile.settings"),active:""}},[s("fr-account-security",{on:{updateProfile:e.updateProfile,updateKBA:e.updateKBA}}),e._v(" "),!1===e.$root.userStore.state.internalUser?s("fr-social-identities",{attrs:{clientToken:e.clientToken,linkedProvider:e.linkedProvider}}):e._e(),e._v(" "),e.$root.applicationStore.state.amDataEndpoints&&!1===e.$root.userStore.state.internalUser?s("fr-authorized-applications"):e._e(),e._v(" "),e.$root.applicationStore.state.amDataEndpoints&&!1===e.$root.userStore.state.internalUser?s("fr-trusted-devices"):e._e(),e._v(" "),!1===e.$root.userStore.state.internalUser?s("fr-preferences",{on:{updateProfile:e.updateProfile}}):e._e(),e._v(" "),!1===e.$root.userStore.state.internalUser?s("fr-consent",{attrs:{consentedMappings:e.profile.consentedMappings},on:{updateProfile:e.updateProfile}}):e._e(),e._v(" "),s("fr-account-controls")],1)],1)],1)],1)],1)},ql=[],Nl={render:Al,staticRenderFns:ql},Tl=Nl,Fl=s("VU/8"),El=Fl(Rl,Tl,!1,null,null,null),Il=El.exports,Ul=s("dXij"),Ml=s.n(Ul),Vl={name:"KBA-Definition-Form-Group",props:{selfServiceDetails:{required:!0},inline:{required:!1,default:!1}},$_veeValidate:{validator:"new"},components:{"fr-floating-label-input":Be},inject:["$validator"],data:function(){var e=this.selfServiceDetails.requirements.properties.kba;return{kba:e,answers:B.a.times(e.minItems,function(){return{answer:null,questionId:null,customQuestion:null}}),customIndex:"custom"}},computed:{predefinedQuestionOptions:function(){var e=this;return B.a.map(this.kba.questions,function(t){return{value:t.id,text:t.question[e.$i18n.locale]||t.question[e.$i18n.fallbackLocale],disabled:!B.a.isUndefined(B.a.find(e.answers,{questionId:t.id}))}})},predefinedQuestionText:function(){return this.predefinedQuestionOptions.map(function(e){return e.text})},options:function(){var e={value:null,text:this.$t("common.user.kba.selectQuestion"),disabled:!0},t={value:"custom",text:this.$t("common.user.kba.custom"),disabled:!1};return Ml()(e,this.predefinedQuestionOptions,t)}},methods:{getData:function(){var e=this;return{kba:this.answers.map(function(t){return B.a.omit(t,t.questionId===e.customIndex?"questionId":"customQuestion")})}},getDuplicates:function(e){return B.a.clone(this.answers).map(function(e){return e.customQuestion}).filter(function(t,s){return s!==e&&t}).concat(this.predefinedQuestionText)},isValid:function(){return this.$validator.validateAll()}},created:function(){var e=this;this.$validator.extend("unique_question",{getMessage:function(t,s){return e.$t("common.user.kba.notUnique")},validate:function(e,t){var s=function(e){return B.a.trim(B.a.toLower(e))};return!B.a.includes(B.a.map(t,s),s(e))}})}},jl=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.answers,function(t,a){return s("b-form-group",{key:a,staticClass:"mb-0",attrs:{"label-text-align":"left"}},[s("b-form-select",{staticClass:"mb-3",attrs:{options:e.options},model:{value:t.questionId,callback:function(s){e.$set(t,"questionId",s)},expression:"answer.questionId"}}),e._v(" "),t.questionId===e.customIndex?s("fr-floating-label-input",{staticClass:"mb-3",attrs:{type:"text",fieldName:e.$t("common.user.kba.question").toLowerCase()+a,label:e.$t("common.user.kba.question"),validateRules:{required:!0,unique_question:e.getDuplicates(a)}},model:{value:t.customQuestion,callback:function(s){e.$set(t,"customQuestion","string"==typeof s?s.trim():s)},expression:"answer.customQuestion"}}):e._e(),e._v(" "),s("fr-floating-label-input",{staticClass:"mb-3",attrs:{type:"text",fieldName:e.$t("common.user.kba.answer").toLowerCase()+a,label:e.$t("common.user.kba.answer"),validateRules:"required"},model:{value:t.answer,callback:function(s){e.$set(t,"answer","string"==typeof s?s.trim():s)},expression:"answer.answer"}}),e._v(" "),a!==e.answers.length-1?s("hr"):e._e()],1)}),1)},Ol=[],Ll={render:jl,staticRenderFns:Ol},zl=Ll,Bl=s("VU/8"),Hl=Bl(Vl,zl,!1,null,null,null),Xl=Hl.exports,Gl={name:"KBA-Update-Stage",props:{selfServiceDetails:{required:!0},inline:{required:!1,default:!1}},components:{"fr-kba-form-group":Xl},data:function(){return{}},methods:{getData:function(){return this.$refs.kbaFormGroup.getData()},save:function(){var e=this;this.isValid().then(function(t){t&&e.$emit("advanceStage",e.getData())})},isValid:function(){return this.$refs.kbaFormGroup.isValid()}}},Wl=function(){var e=this,t=e.$createElement;return(e._self._c||t)("fr-kba-form-group",{ref:"kbaFormGroup",attrs:{selfServiceDetails:e.selfServiceDetails}})},Ql=[],Yl={render:Wl,staticRenderFns:Ql},Kl=Yl,Jl=s("VU/8"),Zl=Jl(Gl,Kl,!1,null,null,null),ec=Zl.exports,tc={name:"Conditional-User",components:{"fr-floating-label-input":Be,"fr-kba-update":ec},props:{selfServiceDetails:{required:!0}},data:function(){return{saveDetails:{},isSingleBooleanForm:!1}},mounted:function(){this.handleBooleanValues()},methods:{getData:function(){var e=B.a.clone(this.saveDetails);return B.a.each(e,function(t,s){""===t&&(e[s]=null)}),{attributes:e}},save:function(e){var t=this;!0===e?this.$emit("advanceStage",{},!0):B.a.has(this.selfServiceDetails,"requirements.terms")?this.$emit("advanceStage",{accept:"true"},!0):B.a.has(this.selfServiceDetails,"requirements.properties.kba")?this.$refs.kbaUpdate.isValid().then(function(e){e&&t.$emit("advanceStage",t.$refs.kbaUpdate.getData(),!0)}):this.$emit("advanceStage",this.getData(),!0)},handleBooleanValues:function(){var e=this;B.a.has(this.selfServiceDetails,"requirements.attributes")&&1===this.selfServiceDetails.requirements.attributes.length&&1===B.a.filter(this.selfServiceDetails.requirements.attributes,function(e){return"boolean"===e.schema.type}).length?this.isSingleBooleanForm=!0:this.isSingleBooleanForm=!1,B.a.each(this.selfServiceDetails.requirements.attributes,function(t){e.isSingleBooleanForm?e.saveDetails[t.name]=!0:"boolean"===t.schema.type&&(e.saveDetails[t.name]=t.value)})}},watch:{selfServiceDetails:{handler:function(e){B.a.isEmpty(this.selfServiceDetails.requirements)?this.save(!0):(this.saveDetails={},this.handleBooleanValues())},deep:!0}}},sc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.selfServiceDetails.requirements.uiConfig?s("b-form",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)},submit:function(e){e.preventDefault()}}},[e._l(e.selfServiceDetails.requirements.attributes,function(t){return s("b-form-group",{key:t.name,staticClass:"mb-0"},["boolean"!==t.schema.type?s("fr-floating-label-input",{attrs:{fieldName:t.name,label:t.schema.title,validateRules:t.isRequired?"required":"",type:"text",defaultValue:t.value},model:{value:e.saveDetails[t.name],callback:function(s){e.$set(e.saveDetails,t.name,"string"==typeof s?s.trim():s)},expression:"saveDetails[property.name]"}}):[e.isSingleBooleanForm?s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.saveDetails[t.name],expression:"saveDetails[property.name]"}],staticClass:"d-none",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.saveDetails[t.name])?e._i(e.saveDetails[t.name],null)>-1:e.saveDetails[t.name]},on:{change:function(s){var a=e.saveDetails[t.name],i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=e._i(a,null);i.checked?o<0&&e.$set(e.saveDetails,t.name,a.concat([null])):o>-1&&e.$set(e.saveDetails,t.name,a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.saveDetails,t.name,r)}}})]):s("div",{staticClass:"custom-control custom-checkbox mb-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.saveDetails[t.name],expression:"saveDetails[property.name]"}],ref:t.name,refInFor:!0,staticClass:"custom-control-input",attrs:{type:"checkbox",id:t.name},domProps:{checked:Array.isArray(e.saveDetails[t.name])?e._i(e.saveDetails[t.name],null)>-1:e.saveDetails[t.name]},on:{change:function(s){var a=e.saveDetails[t.name],i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=e._i(a,null);i.checked?o<0&&e.$set(e.saveDetails,t.name,a.concat([null])):o>-1&&e.$set(e.saveDetails,t.name,a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.saveDetails,t.name,r)}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:t.name}},[e._v(e._s(t.schema.title||t.schema.description))])])]],2)}),e._v(" "),e.selfServiceDetails.requirements.terms?s("div",{staticClass:"mb-4 bg-light p-3 border border-light rounded text-left tc-scrolling-display",domProps:{innerHTML:e._s(e.selfServiceDetails.requirements.terms)}}):e._e(),e._v(" "),e.selfServiceDetails.requirements.definitions?s("fr-kba-update",{ref:"kbaUpdate",attrs:{selfServiceDetails:e.selfServiceDetails}}):e._e(),e._v(" "),s("b-button",{staticClass:"mt-1",attrs:{block:!0,variant:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.selfServiceDetails.requirements.uiConfig.buttonText)+"\n    ")])],2):e._e()},ac=[],ic={render:sc,staticRenderFns:ac},rc=ic,oc=s("VU/8"),nc=R,lc=oc(tc,rc,!1,nc,"data-v-7320cd93",null),cc=lc.exports,uc={name:"Progressive-Profile",components:{"bounce-loader":ge.BounceLoader,"fr-center-card":De,conditionaluser:cc},mixins:[We],data:function(){return{selfServiceType:null,selfServiceDetails:null,loadingColor:rt.a.baseColor,apiType:null,purpose:null,displayName:null,showForm:!1}},mounted:function(){this.apiType=this.$route.params.profileProcess,this.loadData()},methods:{setChildComponent:function(e,t){this.selfServiceDetails=t,this.selfServiceType=e,B.a.isEmpty(t.requirements)&&"initial"===t.tag?this.advanceStage({input:{}}):B.a.has(t,"requirements.uiConfig")?(this.showForm=!0,this.displayName=t.requirements.uiConfig.displayName,this.purpose=t.requirements.uiConfig.purpose,this.selfServiceDetails.canSkip=!0,(B.a.has(t,"requirements.properties.kba")||B.a.has(t,"requirements.terms")||B.a.has(t.requirements,"attributes")&&B.a.filter(t.requirements.attributes,{isRequired:!0}).length>=1)&&(this.selfServiceDetails.canSkip=!1)):"end"===t.tag&&t.status.success&&(this.showForm=!1,this.setUser())},apiErrorCallback:function(e){this.displayNotification("error",e.response.data.message),this.loadData()},setUser:function(){var e=this,t=this.getRequestService({headers:this.getAnonymousHeaders()});t.post("/authentication?_action=login").then(function(s){e.progressiveProfileCheck(s,function(){fe.a.all([t.get(s.data.authorization.component+"/"+s.data.authorization.id),t.post("privilege?_action=listPrivileges"),t.get("schema/"+s.data.authorization.component)]).then(fe.a.spread(function(t,s,a){e.$root.userStore.setProfileAction(t.data),e.$root.userStore.setSchemaAction(a.data),e.$root.userStore.setAccess(s.data),e.completeLogin()})).catch(function(t){e.displayNotification("error",t.response.data.message)})},!0)}).catch(function(t){e.displayNotification("error",t.response.data.message)})}}},dc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showForm?s("fr-center-card",{attrs:{showLogo:!0}},[s("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[s("h2",{staticClass:"h2"},[e._v(e._s(e.displayName))])]),e._v(" "),s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[s("p",{staticClass:"text-center mb-4"},[e._v("\n            "+e._s(e.purpose)+"\n        ")]),e._v(" "),s(e.selfServiceType,{ref:"selfServiceStage",tag:"component",attrs:{selfServiceDetails:e.selfServiceDetails,apiType:e.apiType},on:{advanceStage:e.advanceStage}})],1),e._v(" "),null!==e.selfServiceDetails&&e.selfServiceDetails.canSkip?s("b-card-footer",{attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.advanceStage({},!0)}}},[e._v("\n            "+e._s(e.$t("pages.selfservice.progressiveProfile.skipThis"))+"\n        ")])]):e._e()],1):s("b-container",{staticClass:"h-100 px-0",attrs:{fluid:""}},[s("div",{staticClass:"h-100 d-flex"},[s("div",{staticClass:"m-auto fr-center-card"},[s("bounce-loader",{attrs:{color:e.loadingColor}})],1)])])},fc=[],pc={render:dc,staticRenderFns:fc},mc=pc,hc=s("VU/8"),vc=hc(uc,mc,!1,null,null,null),gc=vc.exports,bc={name:"User-Details",components:{"fr-floating-label-input":Be,"fr-policy-password-input":ja,"fr-social-buttons":at},$_veeValidate:{validator:"new"},props:{selfServiceDetails:{required:!0},inline:{required:!1,default:!1}},data:function(){var e={userDetails:{},saveDetails:{},userPreferences:{},isSocialReg:"initial"!==B.a.get(this.selfServiceDetails,"tag")};return this.selfServiceDetails.requirements&&this.selfServiceDetails.requirements.registrationProperties&&(e.userDetails=this.selfServiceDetails.requirements.registrationProperties.properties,B.a.has(this.selfServiceDetails,"requirements.properties.user.default")&&!B.a.isUndefined(this.selfServiceDetails,"requirements.properties.user.default")&&B.a.each(this.selfServiceDetails.requirements.properties.user.default,function(t,s){e.userDetails[s].socialValue=t}),B.a.each(this.selfServiceDetails.requirements.registrationProperties.required,function(t){e.userDetails[t].required=!0}),B.a.each(this.selfServiceDetails.requirements.registrationProperties.properties,function(t,s){e.saveDetails[s]=""})),this.selfServiceDetails.requirements&&this.selfServiceDetails.requirements.registrationPreferences&&(e.saveDetails.preferences={},e.userPreferences=this.selfServiceDetails.requirements.registrationPreferences,B.a.each(e.userPreferences,function(t,s){e.saveDetails.preferences[s]=!1})),e.saveDetails.password="",e},methods:{getData:function(){var e=B.a.clone(this.saveDetails);return delete e.confirmPassword,this.isSocialReg&&delete e.password,{user:e}},calculateValidation:function(e){var t=[];return e.required&&t.push("required"),e.policies&&B.a.each(e.policies,function(e){"valid-email-address-format"===e.policyId&&t.push("email")}),t.join("|")},save:function(){var e=this;this.isValid().then(function(t){t?e.$emit("advanceStage",e.getData()):e.displayNotification("error",e.$t("pages.selfservice.registration.pleaseComplete"))})},isValid:function(){return this.$validator.validateAll()}}},yc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form",[e.isSocialReg?e._e():s("fr-social-buttons",{attrs:{signin:!1}}),e._v(" "),e._l(e.userDetails,function(t,a){return s("b-form-group",{key:a,staticClass:"mb-0"},[s("fr-floating-label-input",{attrs:{defaultValue:t.socialValue,fieldName:a,label:t.description,validateRules:e.calculateValidation(t),type:"text"},model:{value:e.saveDetails[a],callback:function(t){e.$set(e.saveDetails,a,t)},expression:"saveDetails[key]"}})],1)}),e._v(" "),e.isSocialReg?e._e():s("fr-policy-password-input",{attrs:{policyApi:"selfservice/registration",name:"password"},model:{value:e.saveDetails.password,callback:function(t){e.$set(e.saveDetails,"password",t)},expression:"saveDetails.password"}}),e._v(" "),s("div",{staticClass:"form-group mb-4"},e._l(e.userPreferences,function(t,a){return s("div",{key:a,staticClass:"custom-control custom-checkbox mb-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.saveDetails.preferences[a],expression:"saveDetails.preferences[key]"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:a},domProps:{checked:Array.isArray(e.saveDetails.preferences[a])?e._i(e.saveDetails.preferences[a],null)>-1:e.saveDetails.preferences[a]},on:{change:function(t){var s=e.saveDetails.preferences[a],i=t.target,r=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&e.$set(e.saveDetails.preferences,a,s.concat([null])):o>-1&&e.$set(e.saveDetails.preferences,a,s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.saveDetails.preferences,a,r)}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:a}},[e._v(e._s(t.description))])])}),0),e._v(" "),!1===e.inline?s("b-button",{attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("common.form.signUp"))+"\n    ")]):e._e()],2)},_c=[],wc={render:yc,staticRenderFns:_c},kc=wc,Cc=s("VU/8"),Sc=A,$c=Cc(bc,kc,!1,Sc,"data-v-7861c754",null),Dc=$c.exports,xc={name:"Horizontal-Rule",props:["insert"]},Pc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[e._m(0),e._v(" "),s("div",{staticClass:"col-auto pt-1",domProps:{innerHTML:e._s(e.insert)}},[e._v(e._s(e.insert))]),e._v(" "),e._m(1)])},Rc=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col pr-0"},[s("hr")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col pl-0"},[s("hr")])}],Ac={render:Pc,staticRenderFns:Rc},qc=Ac,Nc=s("VU/8"),Tc=q,Fc=Nc(xc,qc,!1,Tc,"data-v-6949036b",null),Ec=Fc.exports,Ic={name:"KBA-Security-Answer-Definition-Stage",props:{selfServiceDetails:{required:!0},inline:{required:!1,default:!1}},components:{"fr-horizontal-rule":Ec,"fr-kba-form-group":Xl},data:function(){return{}},methods:{getData:function(){return this.$refs.kbaFormGroup.getData()},save:function(){var e=this;this.isValid().then(function(t){t&&e.$emit("advanceStage",e.getData())})},isValid:function(){return this.$refs.kbaFormGroup.isValid()}}},Uc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form",{staticClass:"mb-4",attrs:{id:"kbaDefinition"},on:{submit:function(e){e.preventDefault()}}},[e.inline?s("fr-horizontal-rule",{attrs:{insert:"<i class='fa fa-lock'></i>"}}):e._e(),e._v(" "),s("p",{staticClass:"text-center"},[e._v(e._s(e.$t("common.user.kba.description")))]),e._v(" "),s("fr-kba-form-group",{ref:"kbaFormGroup",attrs:{selfServiceDetails:e.selfServiceDetails}}),e._v(" "),e.inline?e._e():s("b-button",{attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("pages.selfservice.registration.completeRegistration")))])],1)},Mc=[],Vc={render:Uc,staticRenderFns:Mc},jc=Vc,Oc=s("VU/8"),Lc=N,zc=Oc(Ic,jc,!1,Lc,"data-v-25fa52d4",null),Bc=zc.exports,Hc={name:"Terms-And-Conditions",props:{selfServiceDetails:{required:!0},inline:{required:!1,default:!1}},methods:{getData:function(){return{accept:"true"}},save:function(){this.$emit("advanceStage",this.getData())},isValid:function(){return L.a.resolve(!0)}}},Xc=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.inline?s("div",[s("small",{staticClass:"form-text text-muted"},[e._v("\n        "+e._s(e.$t("pages.selfservice.registration.termsAndConditions.singlePage"))+" "),s("a",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"termsModal",expression:"'termsModal'"}],attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(e.$t("pages.selfservice.registration.termsAndConditions.title")))]),e._v(".\n    ")]),e._v(" "),s("b-modal",{attrs:{id:"termsModal","hide-footer":"",title:e.$t("pages.selfservice.registration.termsAndConditions.title")}},[s("div",{staticClass:"d-block text-center"},[s("p",{domProps:{innerHTML:e._s(e.selfServiceDetails.requirements.terms)}},[e._v(e._s(e.selfServiceDetails.requirements.terms))])])])],1):s("div",[s("h3",[e._v(e._s(e.$t("pages.selfservice.registration.termsAndConditions.title")))]),e._v(" "),s("div",{staticClass:"d-block text-center"},[s("p",{domProps:{innerHTML:e._s(e.selfServiceDetails.requirements.terms)}},[e._v(e._s(e.selfServiceDetails.requirements.terms))])]),e._v(" "),!1===e.inline?s("b-button",{attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("common.form.agree"))+"\n    ")]):e._e()],1)},Gc=[],Wc={render:Xc,staticRenderFns:Gc},Qc=Wc,Yc=s("VU/8"),Kc=T,Jc=Yc(Hc,Qc,!1,Kc,"data-v-e1a72f4a",null),Zc=Jc.exports,eu={name:"Consent",props:{selfServiceDetails:{required:!0},inline:{required:!1,default:!1}},methods:{getData:function(){return{consentGiven:"true"}},save:function(){this.$emit("advanceStage",this.getData())},isValid:function(){return L.a.resolve(!0)}}},tu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[!1===e.inline?s("h3",[e._v(e._s(e.$t("pages.selfservice.registration.consent.title")))]):e._e(),e._v(" "),s("div",{staticClass:"d-block text-center"},[s("p",[e._v(e._s(e.selfServiceDetails.requirements.consent))])]),e._v(" "),!1===e.inline?s("b-button",{attrs:{block:!0,size:"lg",variant:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("common.form.agree"))+"\n    ")]):e._e()],1)},su=[],au={render:tu,staticRenderFns:su},iu=au,ru=s("VU/8"),ou=F,nu=ru(eu,iu,!1,ou,"data-v-0ca85712",null),lu=nu.exports,cu={name:"All-In-One-Registration",props:{selfServiceDetails:{required:!0}},components:{idmUserDetails:Dc,kbaSecurityAnswerDefinitionStage:Bc,TermsAndConditions:Zc,Consent:lu,Captcha:oi,"fr-loading-button":Fo},data:function(){var e={stages:{},consentCheck:!0,loading:!1};return B.a.each(this.selfServiceDetails.requirements.stages,function(t){e.stages[t]=!0}),e},methods:{getData:function(){var e={};return B.a.each(this.$children,function(t){var s={};t.getData&&(s=t.getData()),e=B.a.merge(e,s)}),this.selfServiceDetails.requirements.consentEnabled&&(e.consentGiven="true"),e},saveCheck:function(){var e=this;this.loading=!0,this.selfServiceDetails.requirements.consentEnabled?this.isValid().then(function(){e.$refs.consentModal.show()}):this.isValid().then(function(){e.save()})},save:function(){this.$emit("advanceStage",this.getData()),this.loading=!1},isValid:function(){var e=this,t=[];return new L.a(function(s,a){e.$children&&B.a.each(e.$children,function(s,a){e.$children[a].isValid&&t.push(e.$children[a].isValid())}),L.a.all(t).then(function(t){var a=!0;B.a.each(t,function(e){!1===e&&(a=!1)}),a?s({success:!0}):(e.displayNotification("error",e.$t("pages.selfservice.registration.pleaseComplete")),e.loading=!1)})})}}},uu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fr-all-in-one-container"},[e.stages.idmUserDetails?s("idmUserDetails",{attrs:{inline:!0,selfServiceDetails:e.selfServiceDetails}}):e._e(),e._v(" "),e.stages.kbaSecurityAnswerDefinitionStage?s("kbaSecurityAnswerDefinitionStage",{attrs:{inline:!0,selfServiceDetails:e.selfServiceDetails}}):e._e(),e._v(" "),e.stages.captcha?s("Captcha",{attrs:{"self-service-details":e.selfServiceDetails}}):e._e(),e._v(" "),e.stages.consent&&e.selfServiceDetails.requirements&&e.selfServiceDetails.requirements.consent?[s("b-modal",{ref:"consentModal",attrs:{title:e.$t("pages.selfservice.registration.consent.title")},on:{hide:function(t){e.loading=!1}}},[s("Consent",{attrs:{inline:!0,selfServiceDetails:e.selfServiceDetails}}),e._v(" "),s("b-form-checkbox",{attrs:{plain:"",value:!1,"unchecked-value":!0},model:{value:e.consentCheck,callback:function(t){e.consentCheck=t},expression:"consentCheck"}},[e._v("\n                "+e._s(e.$t("pages.selfservice.registration.consent.agreement"))+"\n            ")]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-btn",{staticClass:"float-right",attrs:{disabled:e.consentCheck,size:"sm",variant:"primary"},on:{click:e.save}},[e._v("\n                    "+e._s(e.$t("common.form.okay"))+"\n                ")])],1)],1)]:e._e(),e._v(" "),s("fr-loading-button",{staticClass:"mt-2 mb-3 btn-lg btn-block",attrs:{type:"button",variant:"primary",label:e.$t("common.form.signUp"),loading:e.loading,large:!0},on:{click:e.saveCheck}}),e._v(" "),e.stages.termsAndConditions&&e.selfServiceDetails.requirements&&e.selfServiceDetails.requirements.terms?s("TermsAndConditions",{attrs:{inline:!0,selfServiceDetails:e.selfServiceDetails}}):e._e()],2)},du=[],fu={render:uu,staticRenderFns:du},pu=fu,mu=s("VU/8"),hu=E,vu=mu(cu,pu,!1,hu,"data-v-a9fd5ba8",null),gu=vu.exports,bu={name:"Email-Validation"},yu=function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-alert",{attrs:{show:""}},[e._v("\n    "+e._s(e.$t("pages.selfservice.registration.emailValidation"))+"\n")])},_u=[],wu={render:yu,staticRenderFns:_u},ku=wu,Cu=s("VU/8"),Su=Cu(bu,ku,!1,null,null,null),$u=Su.exports,Du=["captcha","consent","emailValidation","kbaSecurityAnswerDefinitionStage","termsAndConditions"],xu={name:"Registration",components:{"fr-center-card":De,AllInOneRegistration:gu,BounceLoader:ge.BounceLoader,Captcha:oi,Consent:lu,emailValidation:$u,idmUserDetails:Dc,kbaSecurityAnswerDefinitionStage:Bc,TermsAndConditions:Zc,GenericSelfService:Vi},props:["clientToken"],mixins:[We],data:function(){return{selfServiceType:null,selfServiceDetails:null,loadingColor:rt.a.baseColor,showSelfService:!1,apiType:"registration",clientTokenUsed:!1}},computed:{title:function(){return B.a.includes(Du,this.selfServiceType)?this.$t("pages.selfservice.registration.stageTitle."+this.selfServiceType):this.$t("pages.selfservice.registration.signUp")},subtitle:function(){return B.a.includes(Du,this.selfServiceType)?this.$t("pages.selfservice.registration.stageSubtitle."+this.selfServiceType):this.$t("pages.selfservice.registration.signUpMsg")}},mounted:function(){this.$route.params.queryParams?(this.selfServiceType="localAutoLogin",this.advanceStage(this.parseQueryParams(this.$route.params.queryParams))):this.loadData()},methods:{setChildComponent:function(e,t){var s=this;if(this.selfServiceDetails=t,"parameters"===e)this.selfServiceType=null,this.showSelfService=!1,this.advanceStage({input:{}});else if(this.clientToken&&!this.clientTokenUsed)this.advanceStage({clientToken:this.clientToken,oauthRegister:"true"}),this.clientTokenUsed=!0;else if("localAutoLogin"===t.type)if(B.a.has(t,"additions.oauthLogin")&&t.additions.oauthLogin){var a=this.getRequestService({headers:{"X-OpenIDM-NoSession":"false","X-OpenIDM-OAuth-Login":"true","X-OpenIDM-DataStoreToken":this.clientToken,"X-Requested-With":"XMLHttpRequest"}});a.post("/authentication?_action=login").then(function(e){s.displayNotification("success",s.$t("pages.selfservice.registration.createdAccount")),t.additions.successUrl&&t.additions.successUrl.length>0?window.location=t.additions.successUrl:s.progressiveProfileCheck(e,function(){window.history.pushState("","",window.location.pathname),s.$router.push("/")})}).catch(function(){window.history.pushState("","",window.location.pathname),s.$router.push("/login")})}else this.autoLogin(t.additions.credentialJwt,t.additions.successUrl);else if("openAMAutoLogin"===e&&t.status)B.a.has(t,"additions.successUrl")?window.location.href=t.additions.successUrl:(this.$router.push("/login"),this.displayNotification("success",this.$t("pages.selfservice.registration.createdAccount")));else{var i=!1;B.a.each(this.$options.components,function(t,s){B.a.toLower(s)===B.a.toLower(e)&&(i=!0)}),this.selfServiceType=i?e:"GenericSelfService",this.showSelfService=!0}},apiErrorCallback:function(e){var t=this.findPolicyError(e.response);this.showSelfService=!0,this.displayNotification("error",t)},findPolicyError:function(e){var t=e.data.message,s="";if(B.a.has(e,"data.detail.failedPolicyRequirements")){var a=e.data.detail.failedPolicyRequirements[0];a.policyRequirements.length>0&&(s=this.$t("common.policyValidationMessages."+a.policyRequirements[0].policyRequirement,a.policyRequirements[0].params),t=this.$t("common.policyValidationMessages.policyValidationFailed",{property:a.property})+": "+s)}return t},autoLogin:function(e,t){var s=this,a=this.getRequestService({headers:{"X-OpenIDM-Jwt":e,"X-OpenIDM-NoSession":!1,"X-OpenIDM-Password":null,"X-OpenIDM-Username":null}});this.getRequestService({headers:this.getAnonymousHeaders()}).post("/authentication?_action=logout").then(function(){a.post("/authentication?_action=login").then(function(e){s.displayNotification("success",s.$t("pages.selfservice.registration.createdAccount")),t&&t.length>0?window.location=t:s.progressiveProfileCheck(e,function(){s.$router.push("/")})}).catch(function(e){s.displayNotification("error",e.response.data.message)})})}}},Pu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-100"},[s("b-container",{directives:[{name:"show",rawName:"v-show",value:!e.showSelfService,expression:"!showSelfService"}],staticClass:"h-100 px-0",attrs:{fluid:""}},[s("div",{staticClass:"h-100 d-flex"},[s("div",{staticClass:"m-auto fr-center-card"},[s("bounce-loader",{attrs:{color:e.loadingColor}})],1)])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showSelfService,expression:"showSelfService"}]},["localAutoLogin"!==e.selfServiceType?s("fr-center-card",{attrs:{showLogo:!0}},[s("div",{attrs:{slot:"center-card-header"},slot:"center-card-header"},[s("h2",{directives:[{name:"show",rawName:"v-show",value:e.title.length>0,expression:"title.length > 0"}],staticClass:"h2"},[e._v(e._s(e.title))]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.subtitle.length>0,expression:"subtitle.length > 0"}],staticClass:"text-center mb-0"},[e._v(e._s(e.subtitle))])]),e._v(" "),s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[s(e.selfServiceType,{directives:[{name:"show",rawName:"v-show",value:e.showSelfService,expression:"showSelfService"}],ref:"selfServiceStage",tag:"component",attrs:{selfServiceDetails:e.selfServiceDetails},on:{advanceStage:e.advanceStage}})],1),e._v(" "),s("b-card-footer",{attrs:{slot:"center-card-footer"},slot:"center-card-footer"},[e._v("\n                "+e._s(e.$t("pages.selfservice.registration.haveAccount"))+"\n                "),s("router-link",{attrs:{action:"",to:{name:"Login"}}},[e._v(e._s(e.$t("pages.selfservice.registration.signIn")))])],1)],1):e._e()],1)],1)},Ru=[],Au={render:Pu,staticRenderFns:Ru},qu=Au,Nu=s("VU/8"),Tu=Nu(xu,qu,!1,null,null,null),Fu=Tu.exports,Eu={name:"Uma-Activity",components:{"fr-list-group":Ft,"fr-list-item":zt,"fr-fallback-image":Nn},props:{umaHistory:{required:!0,type:Array}},data:function(){return{}},computed:{activityGroups:function(){var e=this.umaHistory.sort(function(e,t){return e.eventTime-t.eventTime}).reverse(),t=B.a.groupBy(e,function(e){return X()(e.eventTime).format("YYYY-MM-DD")}),s=B.a.keys(t).map(function(e){return{day:e,activities:t[e]}});return B.a.sortBy(s,function(e){var t=e.day;return X()(t)}).reverse()}},methods:{formatDateTitle:function(e){return X()(e).format("dddd, MMMM DD, YYYY")},formatTime:function(e){var t=X()(e);return t.isSame(X()(),"day")?t.fromNow():t.format("LT")}}},Iu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.activityGroups,function(t){return[s("fr-list-group",[s("div",{staticClass:"card-body m-0 py-4",attrs:{slot:"list-group-header"},slot:"list-group-header"},[s("h6",{staticClass:"card-title mb-0"},[e._v(e._s(e.formatDateTitle(t.day)))])]),e._v(" "),e._l(t.activities,function(t){return s("fr-list-item",{key:t._id,attrs:{collapsible:!1,panelShown:!1,hoverItem:!1}},[s("template",{staticClass:"d-inline-flex w-100",slot:"list-item-header"},[s("div",{staticClass:"flex-grow-1 media-body"},[s("span",{staticClass:"activity-type"},[e._v(e._s(e.$t("pages.uma.activity."+t.type,{requestingParty:t.requestingPartyName})))]),e._v(" "),s("button",{staticClass:"m-0 p-0 btn btn-link text-capitalize",attrs:{type:"button"},on:{click:function(s){return e.$emit("resourceSetClick",t._id)}}},[e._v(e._s(t.resourceSetName))]),e._v(" "),s("small",{staticClass:"d-block text-muted subtext"},[e._v(e._s(e.formatTime(t.eventTime)))])]),e._v(" "),s("fr-fallback-image",{attrs:{src:t.icon_uri,height:"30",width:"30",fallback:"fa-file-o"}})],1)],2)})],2)]})],2)},Uu=[],Mu={render:Iu,staticRenderFns:Uu},Vu=Mu,ju=s("VU/8"),Ou=ju(Eu,Vu,!1,null,null,null),Lu=Ou.exports,zu={name:"Requests",components:{"fr-fallback-image":Nn},props:["requests"],filters:{formatTime:function(e){var t=X()(e);return t.isSame(X()(),"day")?t.fromNow():t.format("LT")}},methods:{finalizeAccess:function(e,t,s){var a=this;this.requests[t].decision=!0,this.$emit("finalizeResourceAccess",e._id,s,{scopes:e.permissions,onSuccess:function(){"approve"===s&&(a.requests[t].allowed=!0)}})}}},Bu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[[s("div",{attrs:{id:"listView"}},[s("b-card",{staticClass:"mt-4",attrs:{"no-body":""}},[s("b-list-group",{attrs:{flush:""}},e._l(e.requests,function(t,a){return s("b-list-group-item",{key:a},[s("div",{staticClass:"d-sm-flex"},[s("div",{staticClass:"media-body align-self-center mb-2 mb-sm-0"},[s("div",{staticClass:"mb-2"},[s("small",[s("strong",[e._v(e._s(t.user))]),e._v(" "+e._s(e.$t("pages.uma.requests.requestedAccess")))])]),e._v(" "),s("div",{staticClass:"media mb-1"},[s("div",{staticClass:"d-flex mr-2 align-self-center"},[t.icon_uri?s("fr-fallback-image",{attrs:{src:t.icon_uri,height:"30",width:"30",fallback:"fa-file-o"}}):e._e()],1),e._v(" "),s("div",{staticClass:"media-body align-self-center"},[s("div",{staticClass:"media-body align-self-center"},[e._v("\n                                            "+e._s(t.resource)+"\n                                        ")])])]),e._v(" "),s("small",{staticClass:"text-muted"},[e._v(e._s(e._f("formatTime")(t.when)))])]),e._v(" "),t.decision?e._e():s("div",{staticClass:"d-flex justify-content-start ml-sm-3 align-self-center"},[s("a",{staticClass:"pr-3",attrs:{href:"#"},on:{click:function(s){return e.finalizeAccess(t,a,"approve")}}},[e._v(e._s(e.$t("pages.uma.requests.allow")))]),e._v(" "),s("a",{staticClass:"px-2",attrs:{href:"#"},on:{click:function(s){return e.finalizeAccess(t,a,"deny")}}},[e._v(e._s(e.$t("pages.uma.requests.deny")))])]),e._v(" "),t.decision?s("div",{staticClass:"d-flex justify-content-start ml-sm-3 align-self-center"},[t.allowed?s("div",{staticClass:"allow text-success"},[s("i",{staticClass:"fa fa-check fa-fw"}),e._v(" "+e._s(e.$t("pages.uma.requests.allowed"))+"\n                                ")]):e._e(),e._v(" "),t.allowed?e._e():s("div",{staticClass:"deny text-danger"},[s("i",{staticClass:"fa fa-ban fa-fw"}),e._v(" "+e._s(e.$t("pages.uma.requests.denied"))+"\n                                ")])]):e._e()])])}),1)],1)],1)]],2)},Hu=[],Xu={render:Bu,staticRenderFns:Hu},Gu=Xu,Wu=s("VU/8"),Qu=I,Yu=Wu(zu,Gu,!1,Qu,"data-v-a8ef0b52",null),Ku=Yu.exports,Ju={name:"Resources",components:{"fr-fallback-image":Nn},data:function(){return{viewgrid:!1,showModalActions:!1,newshare:"",resourceFilter:""}},props:["resources"],methods:{renderShareModal:function(e){this.$emit("renderShareModal",e)},renderUnshareModal:function(e,t){this.$emit("renderUnshareModal",e,t)},toggleGrid:function(){this.viewgrid=!this.viewgrid}}},Zu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[[s("div",{staticClass:"btn-toolbar row mb-4",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[s("div",{staticClass:"input-group col-sm-4"},[e._m(0),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.resourceFilter,expression:"resourceFilter"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Search","aria-describedby":"btnGroupAddon",placeholder:e.$t("pages.uma.resources.search")},domProps:{value:e.resourceFilter},on:{input:function(t){t.target.composing||(e.resourceFilter=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"col"},[s("b-dropdown",{staticClass:"float-right text-muted",attrs:{variant:"link",right:"","no-caret":""}},[s("template",{slot:"button-content"},[s("span",{staticClass:"text-muted"},[this.viewgrid?e._e():s("i",{staticClass:"fa fa-list"}),e._v(" "),this.viewgrid?s("i",{staticClass:"fa fa-th"}):e._e(),e._v(" "),s("i",{staticClass:"fa fa-caret-down ml-1"})])]),e._v(" "),s("b-dropdown-header",[e._v(e._s(e.$t("pages.uma.resources.viewAs")))]),e._v(" "),s("b-dropdown-item",{attrs:{href:"#"},on:{click:e.toggleGrid}},[s("div",{staticClass:"media"},[s("div",{staticClass:"d-flex align-self-center text-center",staticStyle:{"min-width":"1.5rem"}},[this.viewgrid?e._e():s("i",{staticClass:"fa fa-check text-success"})]),e._v(" "),s("div",{staticClass:"media-body"},[e._v(e._s(e.$t("pages.uma.resources.list")))]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center text-muted"},[s("i",{staticClass:"fa fa-list"})])])]),e._v(" "),s("b-dropdown-item",{attrs:{href:"#"},on:{click:e.toggleGrid}},[s("div",{staticClass:"media"},[s("div",{staticClass:"d-flex align-self-center text-center",staticStyle:{"min-width":"1.5rem"}},[this.viewgrid?s("i",{staticClass:"fa fa-check text-success"}):e._e()]),e._v(" "),s("div",{staticClass:"media-body"},[e._v(e._s(e.$t("pages.uma.resources.grid")))]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center text-muted"},[s("i",{staticClass:"fa fa-th"})])])])],2)],1)]),e._v(" "),this.viewgrid?e._e():s("div",{attrs:{id:"listView"}},[s("b-card",{staticClass:"my-4",attrs:{"no-body":""}},[s("b-list-group",{attrs:{flush:""}},e._l(e.resources,function(t,a){return t.name.includes(e.resourceFilter)?s("b-list-group-item",{key:a},[s("div",{staticClass:"d-sm-flex"},[s("div",{staticClass:"media-body"},[s("div",{staticClass:"media mb-2 mb-sm-0"},[s("div",{staticClass:"d-flex mr-3 align-self-top"},[s("fr-fallback-image",{attrs:{src:t.icon_uri,height:40,width:40,fallback:"fa-file-o fa-2x m-auto pt-1 pb-1"}})],1),e._v(" "),s("div",{staticClass:"d-sm-flex media-body align-self-center"},[s("div",{staticClass:"media-body mb-2 mb-sm-0"},[s("div",{staticClass:"my-0"},[e._v(e._s(t.name))]),e._v(" "),t.policy?t.policy.permissions.length>1?s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.sharedWithPeople",{numberOf:t.policy.permissions.length})))]):s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.sharedWithPerson")))]):s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.resourceNotShared")))])])])])]),e._v(" "),s("div",{staticClass:"d-flex justify-content-start justify-content-sm-start ml-sm-3 align-self-center"},[s("div",{staticClass:"d-sm-none"},[s("a",{staticClass:"align-self-center pr-3",attrs:{href:"#"},on:{click:function(s){return e.renderShareModal(t)}}},[e._v(e._s(e.$t("pages.uma.resources.share")))]),e._v(" "),s("a",{staticClass:"align-self-center pr-3",attrs:{href:"#"},on:{click:function(s){return e.renderUnshareModal(t.name,t._id)}}},[e._v(e._s(e.$t("pages.uma.resources.unshare")))])]),e._v(" "),s("div",{staticClass:"d-none d-sm-flex"},[s("a",{staticClass:"align-self-center pr-3",attrs:{href:"#"},on:{click:function(s){return e.renderShareModal(t)}}},[e._v(e._s(e.$t("pages.uma.resources.share")))]),e._v(" "),t.policy&&t.policy.permissions.length>0?s("a",{staticClass:"align-self-center pr-3",attrs:{href:"#"},on:{click:function(s){return e.renderUnshareModal(t.name,t._id)}}},[e._v(e._s(e.$t("pages.uma.resources.unshare")))]):e._e()])])])]):e._e()}),1)],1)],1),e._v(" "),this.viewgrid?s("div",{attrs:{id:"gridView"}},[s("div",{staticClass:"row"},e._l(e.resources,function(t,a){return t.name.includes(e.resourceFilter)?s("div",{key:a,staticClass:"col-sm-6 col-md-3"},[s("div",{staticClass:"card text-center mb-4"},[s("div",{staticClass:"card-header py-0 px-1 border-0"},[s("b-dropdown",{staticClass:"fr-card-menu-link float-right",attrs:{variant:"link",right:"","no-caret":""}},[s("template",{slot:"button-content"},[s("span",{staticClass:"text-muted"},[s("i",{staticClass:"fa fa-ellipsis-h"})])]),e._v(" "),s("b-dropdown-item",{attrs:{href:"#"},on:{click:function(s){return e.renderShareModal(t)}}},[e._v(e._s(e.$t("pages.uma.resources.share")))]),e._v(" "),s("b-dropdown-item",{attrs:{href:"#"},on:{click:function(s){return e.renderUnshareModal(t.name,t._id)}}},[e._v(e._s(e.$t("pages.uma.resources.unshare")))])],2)],1),e._v(" "),s("div",{staticClass:"card-body pt-0"},[s("fr-fallback-image",{staticClass:"pl-5 pr-5 pt-3 mb-3",attrs:{src:t.icon_uri,width:86,height:86,fallback:"fa-file-o fa-3x m-auto pt-3 pb-3"}}),e._v(" "),s("h5",{staticClass:"card-title text-truncate"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"card-text"},[t.policy?t.policy.permissions.length>1?s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.sharedWithPeople",{numberOf:t.policy.permissions.length})))]):s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.sharedWithPerson")))]):s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.resourceNotShared")))])])],1)])]):e._e()}),0)]):e._e()]],2)},ed=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text",attrs:{id:"btnGroupAddon"}},[s("i",{staticClass:"fa fa-search"})])])}],td={render:Zu,staticRenderFns:ed},sd=td,ad=s("VU/8"),id=U,rd=ad(Ju,sd,!1,id,"data-v-7a7b2ba2",null),od=rd.exports,nd={name:"Share",components:{"fr-fallback-image":Nn},props:["resource"],data:function(){return{newShare:!1,text:"Can "+this.resource.scopes[0],newScopes:{}}},created:function(){this.setNewScopes()},watch:{resource:function(){this.setNewScopes()}},methods:{setNewScopes:function(){var e=this;B.a.each(this.resource.scopes,function(t){e.newScopes[t]=!0})},hideModal:function(){this.$refs.fsModal.hide(),this.resetModal()},resetModal:function(){this.newShare="",this.setNewScopes()},unshareOne:function(e){var t=this.resetModal.bind(this),s=this.resource.policy.permissions.filter(function(t){return t.subject!==e}),a={policyId:this.resource._id,permissions:s};this.$emit("modifyResource",this.resource._id,a,{onSuccess:t,unshare:!0}),this.hideModal()},unshareAll:function(){this.$emit("renderUnshareModal",this.resource.name,this.resource._id),this.hideModal()},validateResource:function(){var e=this;if(this.resource.policy&&this.resource.policy.permissions){-1===B.a.findIndex(this.resource.policy.permissions,function(t){return t.subject===e.newShare})?this.newShare?this.shareResource():this.displayNotification("error",this.$t("pages.uma.resources.noRequestingParty")):(this.displayNotification("error",this.$t("pages.uma.resources.sameShareError",{requestingParty:this.newShare})),this.resetModal())}else!this.resource.policy&&this.newShare&&this.shareResource()},shareResource:function(){var e=this.resetModal.bind(this),t=this.newShare,s=B.a.keys(B.a.pickBy(this.newScopes)),a={subject:t,scopes:s},i={policyId:this.resource._id,permissions:[]};this.resource.policy?(i.permissions=this.resource.policy.permissions.filter(function(e){return e.subject!==t}),i.permissions.push(a),this.$emit("modifyResource",this.resource._id,i,{onSuccess:e})):(i.permissions.push(a),this.$emit("shareResource",i,{onSuccess:e})),this.hideModal()},modifyResource:function(e,t){var s=B.a.map(this.resource.policy.permissions,function(s){if(s.subject===e){var a=s.scopes.length;s.scopes=B.a.filter(s.scopes,function(e){return e!==t}),a===s.scopes.length&&s.scopes.push(t)}return s}),a={policyId:this.resource._id,permissions:s};this.$emit("modifyResource",this.resource._id,a)}}},ld=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"fsModal",attrs:{id:"shareModal","cancel-variant":"outline-secondary"},on:{hide:e.resetModal},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.validateResource(t))}}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("div",{staticClass:"media"},[s("div",{staticClass:"d-flex mr-3 align-self-center"},[s("fr-fallback-image",{attrs:{src:e.resource.icon_uri,height:40,width:40,fallback:"fa-file-o"}})],1),e._v(" "),s("div",{staticClass:"media-body align-self-center"},[s("h6",{staticClass:"my-0"},[e._v(e._s(e.resource.name))]),e._v(" "),e.resource.policy?e.resource.policy.permissions.length>1?s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.sharedWithPeople",{numberOf:e.resource.policy.permissions.length})))]):s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.sharedWithPerson")))]):s("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("pages.uma.resources.resourceNotShared")))])])]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.hideModal}},[s("i",{staticClass:"fa fa-times"})])]),e._v(" "),s("div",{staticClass:"form-group"},[s("b-input-group",[s("b-form-input",{attrs:{placeholder:e.$t("pages.uma.resources.shareWith")},model:{value:e.newShare,callback:function(t){e.newShare=t},expression:"newShare"}}),e._v(" "),s("b-dropdown",{attrs:{slot:"append",text:e.text,variant:"outline-secondary",size:"sm"},slot:"append"},[s("form",{staticClass:"px-4 py-2",on:{click:function(e){e.stopPropagation()}}},e._l(e.resource.scopes,function(t,a){return e.resource.scopes?s("div",{key:a,staticClass:"form-check mb-1"},[s("input",{staticClass:"form-check-input mr-1",attrs:{type:"checkbox",id:"viewCheck"},domProps:{checked:e.newScopes[t]},on:{click:function(s){e.newScopes[t]=!e.newScopes[t]}}}),e._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"viewCheck"}},[e._v(e._s(t))])]):e._e()}),0)])],1)],1),e._v(" "),s("div",{class:[{"d-none":this.newShare}]},[e.resource.policy&&e.resource.policy.permissions?s("ul",{staticClass:"list-unstyled"},e._l(e.resource.policy.permissions,function(t,a){return s("li",{key:a,staticClass:"media py-2"},[s("b-img",{staticClass:"mr-3",attrs:{src:"static/images/profile-default.png",rounded:"circle",width:"34",height:"34",alt:"avatar"}}),e._v(" "),s("div",{staticClass:"media-body"},[s("h6",{staticClass:"mt-2"},[e._v(e._s(t.subject))])]),e._v(" "),s("div",{staticClass:"d-flex ml-3 align-self-center"},[s("b-dropdown",{attrs:{id:"ddown1",text:e.text,variant:"link",size:"sm",right:"","toggle-class":"dropdown-toggle"}},[s("template",{staticClass:"dropdown-toggle",slot:"button-content"},[s("span",{staticClass:"d-none d-sm-inline"},[e._v("Can "+e._s(t.scopes.join(", ")))])]),e._v(" "),s("form",{staticClass:"px-4 py-2",on:{click:function(e){e.stopPropagation()}}},e._l(e.newScopes,function(a,i){return s("div",{key:i,staticClass:"form-check mb-1"},[s("input",{staticClass:"form-check-input mr-1",attrs:{type:"checkbox",id:"viewCheck"},domProps:{checked:t.scopes.includes(i)},on:{click:function(s){return e.modifyResource(t.subject,i)}}}),e._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"viewCheck"}},[e._v(e._s(i))])])}),0),e._v(" "),s("b-dropdown-divider"),e._v(" "),s("b-dropdown-item",[s("span",{staticClass:"text-danger",attrs:{role:"button"},on:{click:function(s){return e.unshareOne(t.subject)}}},[e._v(e._s(e.$t("pages.uma.resources.unshare")))])])],2)],1)],1)}),0):e._e()]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",[s("b-button",{attrs:{type:"button",variant:"link"},on:{click:e.unshareAll}},[e._v(e._s(e.$t("pages.uma.resources.unshareAll")))]),e._v(" "),e.newShare?s("div",{staticClass:"float-right"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("pages.uma.resources.cancel")))]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.validateResource}},[e._v(e._s(e.$t("pages.uma.resources.share")))])],1):e._e()],1)])])},cd=[],ud={render:ld,staticRenderFns:cd},dd=ud,fd=s("VU/8"),pd=M,md=fd(nd,dd,!1,pd,"data-v-57a4cadc",null),hd=md.exports,vd={name:"Unshare",components:{},data:function(){return{}},props:["resourceId","resourceName"],methods:{hideModal:function(){this.$refs.fsModal.hide()},unshare:function(){this.$emit("unshareResource",this.resourceId),this.hideModal()}}},gd=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"fsModal",attrs:{id:"unshareModal","cancel-variant":"outline-secondary"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.unshare(t))}}},[s("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h6",{staticClass:"my-0"},[e._v(e._s(e.$t("pages.uma.resources.unshareResource",{resourceName:e.resourceName})))]),e._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.hideModal}},[s("i",{staticClass:"fa fa-times"})])]),e._v("\n    "+e._s(e.$t("pages.uma.resources.warningMessage"))+"\n    "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"float-right"},[s("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("pages.uma.resources.cancel")))]),e._v(" "),s("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:e.unshare}},[e._v(e._s(e.$t("pages.uma.resources.unshare")))])],1)])])},bd=[],yd={render:gd,staticRenderFns:bd},_d=yd,wd=s("VU/8"),kd=V,Cd=wd(vd,_d,!1,kd,null,null),Sd=Cd.exports,$d={name:"Sharing",components:{"fr-activity":Lu,"fr-center-card":De,"fr-requests":Ku,"fr-resources":od,"fr-share":hd,"fr-unshare":Sd},data:function(){return{requestsLoaded:!1,resource:null,resourceId:"",resourceName:"",resources:[],activity:[],requests:[],resourcesCount:0,activityCount:0,delayedUpdate:!1}},computed:{amDataEndpoints:function(){return this.$root.applicationStore.state.amDataEndpoints},umaHistory:function(){var e=this;return B.a.map(this.activity,function(t){var s=B.a.find(e.resources,{_id:t.resourceSetId});return B.a.has(s,"icon_uri")&&(t.icon_uri=s.icon_uri),t})}},beforeMount:function(){this.loadData()},methods:{loadData:function(){this.getResources(),this.getActivity(),this.getRequests()},getResources:function(){var e=this,t=this.$root.userStore.state.userName,s=this.getRequestService(),a=this.amDataEndpoints.baseUrl+t+this.amDataEndpoints.resourceSet+"?_queryId=*";s.get(a,{withCredentials:!0}).then(function(t){e.resources=t.data.result,e.requestsLoaded=!0}).catch(function(t){e.resources=[],e.requestsLoaded=!0,t.response?e.displayNotification("error",t.response.data.message):e.displayNotification("error",t.message)})},getActivity:function(){var e=this,t=this.$root.userStore.state.userName,s=this.getRequestService(),a=this.amDataEndpoints.baseUrl+t+this.amDataEndpoints.auditHistory+"?_sortKeys=-eventTime&_queryFilter=true";s.get(a,{withCredentials:!0}).then(function(t){e.activity=t.data.result}).catch(function(t){e.activity=[],t.response?e.displayNotification("error",t.response.data.message):e.displayNotification("error",t.message)})},getRequests:function(){var e=this,t=this.$root.userStore.state.userName,s=this.getRequestService(),a=this.amDataEndpoints.baseUrl+t+"/uma/pendingrequests?_sortKeys=user&_queryFilter=true";s.get(a,{withCredentials:!0}).then(function(t){e.requests=B.a.map(t.data.result,function(t){var s=B.a.find(e.resources,{name:t.resource});return B.a.has(s,"icon_uri")&&(t.icon_uri=s.icon_uri),B.a.has(s,"scopes")&&(t.scopes=s.scopes),t.allowed=!1,t.decision=!1,t})}).catch(function(t){e.requests={},t.response?e.displayNotification("error",t.response.data.message):e.displayNotification("error",t.message)})},renderShareModal:function(e){var t=this;this.resource=e,this.$nextTick(function(){t.$root.$emit("bv::show::modal","shareModal")})},renderUnshareModal:function(e,t){var s=this;this.resourceName=e,this.resourceId=t,this.$nextTick(function(){s.$root.$emit("bv::show::modal","unshareModal")})},shareResource:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.$root.userStore.state.userName,i=this.$t("common.user.sharing.shareSuccess"),r=this.getRequestService(),o=this.amDataEndpoints.baseUrl+a+"/uma/policies/"+e.policyId;r.put(o,e,{withCredentials:!0}).then(function(e){s.onSuccess&&s.onSuccess(),t.displayNotification("success",i),t.loadData()}).catch(function(e){t.displayNotification("error",e.response.data.message)})},unshareResource:function(e){var t=this,s=this.$root.userStore.state.userName,a=this.$t("common.user.sharing.unshareSuccess"),i=this.getRequestService(),r=this.amDataEndpoints.baseUrl+s+"/uma/policies/"+e;i.delete(r,{withCredentials:!0}).then(function(e){t.displayNotification("success",a),t.loadData()}).catch(function(e){t.displayNotification("error",e.response.data.message)})},modifyResource:function(e,t){var s=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.unshare?this.$t("common.user.sharing.unshareSuccess"):this.$t("common.user.sharing.modifySuccess"),r=this.$root.userStore.state.userName,o=this.amDataEndpoints.baseUrl+r+"/uma/policies/"+e,n=this.getRequestService(),l={"Accept-API-Version":"protocol=1.0,resource=1.0"};n.put(o,t,{withCredentials:!0,headers:l}).then(function(e){a.onSuccess&&a.onSuccess(),s.displayNotification("success",i),s.loadData()}).catch(function(e){s.displayNotification("error",e.response.data.message)})},finalizeResourceAccess:function(e,t){var s=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.$root.userStore.state.userName,r="approve"===t?this.$t("common.user.sharing.requestAllowedSuccess"):this.$t("common.user.sharing.requestDeniedSuccess"),o=this.getRequestService(),n={scopes:a.scopes||{}},l=""+this.amDataEndpoints.baseUrl+i+"/uma/pendingrequests/"+e+"?_action="+t;o.post(l,n,{withCredentials:!0}).then(function(e){a.onSuccess&&a.onSuccess(),s.delayedUpdate=!0,s.displayNotification("success",r)}).catch(function(e){s.displayNotification("error",e.response.data.message)})},testForReload:function(){!0===this.delayedUpdate&&(this.delayedUpdate=!1,this.loadData())}}},Dd=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{attrs:{fluid:""}},[e.requestsLoaded?[e.resources.length>0?s("b-tabs",{staticClass:"mt-4",on:{click:e.testForReload}},[s("b-tab",{attrs:{title:"Resources",active:""}},[s("fr-resources",{attrs:{resources:e.resources},on:{renderShareModal:e.renderShareModal,renderUnshareModal:e.renderUnshareModal}})],1),e._v(" "),e.activity.length>0?s("b-tab",{attrs:{title:"Activity"},on:{click:e.testForReload}},[s("fr-activity",{attrs:{umaHistory:e.umaHistory}})],1):e._e(),e._v(" "),e.requests.length>0?s("b-tab",{attrs:{title:"Requests"}},[s("template",{slot:"title"},[e._v("\n                    "+e._s(e.$t("pages.uma.notifications.requests"))+" "),s("b-badge",{attrs:{pill:"",variant:"danger"}},[e._v(e._s(e.requests.length))])],1),e._v(" "),s("fr-requests",{attrs:{requests:e.requests},on:{finalizeResourceAccess:e.finalizeResourceAccess}})],2):e._e()],1):s("div",[s("fr-center-card",{staticClass:"mt-5",attrs:{showLogo:!1}},[s("b-card-body",{attrs:{slot:"center-card-body"},slot:"center-card-body"},[s("img",{staticClass:"mb-4",staticStyle:{width:"150px"},attrs:{src:"static/images/empty-box.svg",alt:e.$t("common.form.logo")}}),e._v(" "),s("h5",{staticClass:"h5"},[e._v(e._s(e.$t("pages.uma.resources.noDataState")))])])],1)],1),e._v(" "),e.resource?s("fr-share",{attrs:{resource:e.resource},on:{shareResource:e.shareResource,renderUnshareModal:e.renderUnshareModal,modifyResource:e.modifyResource}}):e._e(),e._v(" "),s("fr-unshare",{attrs:{resourceId:e.resourceId,resourceName:e.resourceName},on:{unshareResource:e.unshareResource}})]:e._e()],2)},xd=[],Pd={render:Dd,staticRenderFns:xd},Rd=Pd,Ad=s("VU/8"),qd=j,Nd=Ad($d,Rd,!1,qd,"data-v-0e5cd26f",null),Td=Nd.exports,Fd=new ve.a({routes:[{path:"/",redirect:"/dashboard"},{path:"/handleOAuth/:amData",component:Er,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/oauthReturn",component:Er,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/login",name:"Login",alias:["/_=_"],component:br,meta:{hideToolbar:!0,bodyClass:"fr-body-image"},beforeEnter:function(e,t,s){window.location.search&&window.location.search.match(/state|oauth_token/)?s("/oauthReturn"):s()}},{path:"/profile",name:"Profile",props:!0,component:Il,meta:{authenticate:!0}},{path:"/list/:resourceType/:resourceName",name:"ListResource",component:ur,meta:{authenticate:!0}},{path:"/edit/:resourceType/:resourceName/:resourceId",name:"EditResource",component:Ja,meta:{authenticate:!0}},{path:"/dashboard",name:"Dashboard",component:wa,meta:{authenticate:!0},beforeEnter:function(e,t,s){window.location.search&&window.location.search.match(/state|oauth_token/)?s({path:"/oauthReturn"}):s()}},{path:"/registration",name:"Registration",component:Fu,meta:{hideToolbar:!0,bodyClass:"fr-body-image"},props:!0},{path:"/accountClaiming",name:"AccountClaiming",component:mt,meta:{hideToolbar:!0,bodyClass:"fr-body-image"},props:!0},{path:"/registration/:queryParams",name:"RegistrationEmailValidation",component:Fu,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/forgotusername",name:"ForgotUsername",component:Gi,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/passwordreset",name:"PasswordReset",component:mo,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/passwordreset/:queryParams",name:"PasswordResetForm",component:mo,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/profilecompletion",name:"ProgressiveProfileForm",component:gc,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/profilecompletion/:profileProcess",name:"ProgressiveProfileInitiate",component:gc,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}},{path:"/sharing",name:"Sharing",component:Td,meta:{authenticate:!0}},{path:"*",component:xr,meta:{hideToolbar:!0,bodyClass:"fr-body-image"}}]}),Ed={en:{config:{messages:{socialProviders:{cannotUnbind:"Before disabling provider create a local password"},sessionExpired:"Session expired; redirecting to login..."}},common:{form:{submit:"Submit",agree:"I Agree",logo:"logo",signUp:"Sign Up",cancel:"Cancel",saveChanges:"Save changes",edit:"Edit",save:"Save",remove:"Remove",confirm:"Confirm",close:"Close",okay:"Okay",new:"New",yes:"Yes",no:"No",delete:"Delete",reset:"Reset"},placeholders:{password:"Password",retypePassword:"Retype Password",emailAddress:"Email address"},user:{profile:{updateSuccess:"Updated your profile."},sharing:{shareSuccess:"Shared your resource.",unshareSuccess:"Unshared your resource.",modifySuccess:"Modified resource permissions",requestAllowedSuccess:"Access granted",requestDeniedSuccess:"Access denied"},kba:{description:"Select security question(s) below. These questions will help us verify your identity if you forget your password.",selectQuestion:"Select a security question...",custom:"Provide your own:",question:"Question",answer:"Answer",saveQuestions:"Save questions",submitAnswers:"Verify Answer | Verify Answers",notUnique:"Custom questions cannot be duplicates"}},policyValidationMessages:{VALID_PHONE_FORMAT:"Must be a valid phone number",VALID_NAME_FORMAT:"Must have valid name characters",CANNOT_CONTAIN_CHARACTERS:"Cannot contain characters: %{forbiddenChars}",IS_NUMBER:"Must be a number greater than or equal to zero.",IS_NUMBER_GREATER_ZERO:"Must be a number greater than or equal to 1.",REQUIRED:"Cannot be blank",VALID_DATE:"Must be a valid date",VALID_TYPE:"Must be one of the following types: %{validTypes}. Cannot be %{invalidType}",MATCH_REGEXP:"Has to match pattern: %{regexp}",PRIVILEGE_AT_LEAST_ONE_ATTRIBUTE_READONLY_FALSE:"Must set at least one attribute permission to Read/Write",PRIVILEGE_MUST_CONTAIN_CREATE_OR_UPDATE_PERMISSION:"Must have at least Create or Update Permission",MIN_LENGTH:"Must be %{minLength} characters long",AT_LEAST_X_CAPITAL_LETTERS:"Must have at least %{numCaps} capital letter(s)",AT_LEAST_X_NUMBERS:"Must have at least %{numNums} number(s)",CANNOT_CONTAIN_OTHERS:"Must not share characters with %{disallowedFields}",VALID_EMAIL_ADDRESS_FORMAT:"Invalid email format (example@example.com)",IS_NEW:"Must not be the same as the previous %{historyLength} passwords",UNIQUE:"%{property} must be unique",VALID_USERNAME:"Invalid username",test:"succeed",policyServiceError:{registration:"Unable to register. Please try again later.",reset:"Unable to reset your password. Please try again later."},successMessages:{password:"Your password is secure!"},policyValidationFailed:"Policy validation failed for '%{property}'"}},pages:{app:{profile:"Profile",dashboard:"Dashboard",sharing:"Sharing",user:"User",admin:"Admin",signOut:"Sign Out",notifications:{noNotifications:"No notifications available",title:"Notifications",clearAll:"Clear All",removedAll:"Removed all notifications",removed:"Removed notification",failedToRemove:"Failed to remove notification",failedToClear:"Failed to clear all notifications"}},notFound:{couldNotFind:"We couldn't find the page you were looking for.",returnToDashboard:"Return to dashboard"},dashboard:{noWidget:"No Widgets Available",noWidgetSubText:'Don\'t worry, you still have a <a href="/#/profile">profile</a>.',widgets:{welcome:{greeting:"Hello",welcomeMessage:"The ForgeRock End User UI helps users manage their account data, consent, workflows, and shared resources.",editProfile:"Edit Your Profile"}}},login:{username:"Username",password:"Password",signIn:"Sign In",newHere:"New here?",createAccount:"Create an account",badPassword:"Invalid username or password.",weCanHelp:"We can help you",recoverPassword:"recover your password.",recoverUsername:"recover your username.",forgotUsername:"Forgot username?",forgotPassword:"Forgot password?"},selfservice:{signIn:"Sign in",captchaError:"ReCaptcha configured improperly - contact your administrator.",headers:{username:{title:"Recover Your Username",description:"You can recover your username with the email address associated with your account."},reset:{title:"Reset Password",description:"Verify You're Human",emailSent:"An email has been sent to your inbox with instructions on how to reset your password."}},registration:{signUp:"Sign Up",haveAccount:"Already have an account?",signIn:"Sign in",signUpMsg:"Signing up is fast and easy.",createdAccount:"User account has been created.",pleaseComplete:"Please complete the registration form",termsAndConditions:{title:"Terms & Conditions",singlePage:'By clicking "Sign Up" you agree to our '},consent:{title:"Privacy & Consent",agreement:"I agree"},emailValidation:"An email has been sent to the address you entered. Click the link in that email to proceed.",completeRegistration:"Complete Registration",stageTitle:{captcha:"Verify You're Human",consent:"",emailValidation:"",kbaSecurityAnswerDefinitionStage:"Create Security Questions",termsAndConditions:""},stageSubtitle:{captcha:"No robots allowed",consent:"",emailValidation:"",kbaSecurityAnswerDefinitionStage:"",termsAndConditions:""}},accountClaiming:{title:"You have an existing account",passwordDesc:"To continue, please sign in with you email <strong>{account}</strong> to link accounts.",socialDesc:"To continue, please sign in to your {providers} account to link accounts.",link:"Link Accounts",return:"Back to sign in",linked:"Accounts linked",error:"Unable to link accounts"},forgotUsername:{advanceStageButtonText:"Recover Username",yourUsername:"Your username is",unableToRetrieve:"Unable to retrieve your username",tryAgain:"Try finding your username again",emailSent:"An email containing your username has been sent to your account."},passwordReset:{userQuery:"Enter email to retrieve account details",advanceStageButtonText:"Retrieve Account",tryAgain:"Try resetting your password again",errorMessage:"Error resetting your password",successMessage:"Your password has been reset.",newPassword:"New password",changePassword:"Change Password",kbaVerificationStageDescription:"Verify your identity by answering security questions"},progressiveProfile:{skipThis:"Skip this"},social:{signIn:"Sign in with",signUp:"Sign up with",or:"or"}},profile:{editPersonalInfo:"Edit personal info",settings:"Settings",activity:"Activity",accountControls:{title:"Account Controls",subtitle:"Download your account data or delete your account.",deleteTitle:"Delete your account",deleteSubtitle:"Permanently delete your account.",deleteAccount:"Delete Account",deleteModalTitle:"Delete your account",deleteModalHeader:"Please read this carefully.",deleteModalDetails:"You're trying to delete your account, which provides access to various services. You'll\n no longer be able to use any of those services, and your account and data will be lost.",deleteModalDownload1:"You can",deleteModalDownload2:"download your data",deleteModalDownload3:"before deleting your account.",deleteModalContentList:"The following content will be deleted.",deleteModalContentListItem:"Access to your profile",deleteModalAcceptMessage:"Yes, I want to permanently delete my account",deleteModalButton:"Delete Account",deleteAccountSuccessful:"Successfully deleted your account.",downloadTitle:"Download your data",downloadSubtitle:"Download your account data.",downloadLink:"Download"},preferences:{title:"Preferences",subtitle:"Set your communications preferences."},oauthApplications:{title:"Authorized Applications",subtitle:"These apps can access your account.",removeConfirmation:'Are you sure you want to remove "{applicationName}" from your list of authorized applications?',removeSuccess:'"{applicationName}" successfully removed.',expires:"Expires: ",noApplications:"No Authorized Applications"},trustedDevices:{title:"Trusted Devices",subtitle:"Devices you have signed in with.",removeConfirmation:'Are you sure you want to remove "{deviceName}" from your list of trusted devices?',removeSuccess:'"{deviceName}" successfully removed.',noDevices:"No Trusted Devices"},editProfile:{userDetailsTitle:"Edit your personal info",failedProfileSave:"Failed to save profile changes",optional:"(optional)",noFields:"No profile fields available"},accountSecurity:{title:"Account Security",invalidPassword:"Invalid password form",subtitle:"Update your username, password or security questions to secure your account.",password:"Password",securityQuestions:"Security Questions",rememberPassword:"Can't remember your current password?",resetPassword:"Reset your password",savePassword:"Save password",custom:"Custom",currentPassword:"Current password",newPassword:"New password"},consent:{allow:"Allow",allowConsentHeader:"Allow Access",accessType:"Access Type",accountAccess:"Account Access",authorized:"Authorized",confirmDeny:"<strong>{mappingName}</strong> will no longer have access to your data.",deny:"Deny",denyConsentHeader:"Deny Access",notAuthorized:"Not Authorized",subtitle:"Control how your data is shared with third parties.",title:"Personal Data Sharing"},socialSignIn:{title:"Social Sign-in",subtitle:"Sign into your account using social identity providers.",disconnect:"Disconnect",disconnectConfirmMsg:"If you disconnect, you will not be able to log in with {provider}.",connect:"Connect",sharing:"You are sharing",linkedAccount:"Linked account"}},uma:{activity:{Authorisation_Granted:"You created",Authorisation_Requested:"{requestingParty} requested access to",Authorisation_Request_Denied:"You denied the request from {requestingParty} to access",Authorisation_Request_Approved:"You approved the request from {requestingParty} to access",Policy_Created:"You shared",Policy_Updated:"You updated sharing setting for"},resources:{noDataState:"You haven't shared anything yet.",search:"Search...",viewAs:"View as",list:"List",grid:"Grid",cancel:"Cancel",share:"Share",unshare:"Unshare",unshareAll:"Unshare all",shareWith:"Share with...",resourceNotShared:"Resource not shared",sharedWithPeople:"Shared with {numberOf} people",sharedWithPerson:"Shared with 1 person",warningMessage:"Sharing disabled. You'll still keep a copy.",unshareResource:'Unshare "{resourceName}" ?',sameShareError:"Cannot reshare resource with {requestingParty}.  Unshare with requesting party before changing permissions",noRequestingParty:"No requesting party defined."},requests:{allow:"Allow",deny:"Deny",allowed:"Allowed",denied:"Denied",requestedAccess:"requested access to:"},notifications:{requests:"Requests"}},access:{password:"Password",noFields:"No Fields Available",successCreate:"{resource} successfully created",typeSearch:"Type to Search",invalidCreate:"Invalid create form",deleteResource:"Successfully deleted user",deleteConfirm:"Are you sure you want to delete this",deleteModalTitle:"Confirm Deletion",noAvailableProperties:"No available properties for editing",unableToEditResource:"Unable to edit {resource}",invalidEdit:"Invalid edit form",successEdited:"{resource} successfully edited",details:"Details",resetPassword:"Reset password",failedSavePassword:"Failed to save password",successSavePassword:"Successfully saved password"},workflow:{assign:"Assign",assignTo:"Assign to",assignmentSuccess:"{taskName} successfully assigned to {assignee}",details:"Details",myTasks:"My Tasks",noProcess:"No processes at this time",noAssignedTasks:"No assigned tasks at this time",noGroupTasks:"Your group has no tasks at this time",notAssigned:"Not assigned",processStartSuccessMessage:"Process started",me:"Me",requeue:"Requeue",start:"Start",startProcess:"Start a Process",taskSuccessfullyCompleted:"Task successfully completed",taskSuccessfullyRequeued:"{taskName} successfully requeued",taskNoLongerAvailable:"{taskName} task deleted by admin",unassignedTasks:"Unassigned Tasks"}}}},Id={state:{userId:null,managedResource:null,roles:null,internalUser:!1,adminUser:!1,profile:null,schema:null,access:[],givenName:"",sn:"",email:"",userName:""},getUserState:function(){return B.a.clone(this.state)},setProfileAction:function(e){e.givenName?this.state.givenName=e.givenName:this.state.givenName="",e.sn?this.state.sn=e.sn:this.state.sn="",e.mail?this.state.email=e.mail:this.state.email="",e.userName?this.state.userName=e.userName:this.state.userName="",this.state.profile=e},clearProfileAction:function(){this.state.profile=null,this.state.givenName="",this.state.sn="",this.state.email="",this.state.userName=""},setSchemaAction:function(e){this.state.schema=e},clearSchemaAction:function(){this.state.schema=null},setUserIdAction:function(e){this.state.userId=B.a.clone(e)},clearUserIdAction:function(){this.state.userId=null},setManagedResourceAction:function(e){this.state.managedResource=B.a.clone(e),"internal/user"===e&&(this.state.internalUser=!0)},clearManagedResourceAction:function(){this.state.managedResource=null},setRolesAction:function(e){this.state.roles=B.a.clone(e),B.a.includes(this.state.roles,"internal/role/openidm-admin")&&(this.state.adminUser=!0)},clearRolesAction:function(){this.state.roles=null},setAccess:function(e){this.state.access=B.a.clone(e)},clearAccess:function(){this.state.access=[]},clearStoreAction:function(){this.state.userId=null,this.state.managedResource=null,this.state.roles=null,this.state.profile=null,this.state.schema=null,this.state.givenName="",this.state.sn="",this.state.email="",this.state.userName="",this.state.internalUser=!1,this.state.adminUser=!1,this.state.access=[]}},Ud={state:{workflow:!1,passwordReset:!1,usernameRecovery:!1,registration:!1,authHeaders:null,amDataEndpoints:null,loginRedirect:null},setAmDataEndpointsAction:function(e){this.state.amDataEndpoints=e},clearAmDataEndpointsAction:function(){this.state.amDataEndpoints=null},setWorkflowAction:function(e){this.state.workflow=e},clearWorkflowAction:function(){this.state.workflow=!1},setPasswordResetAction:function(e){this.state.passwordReset=e},clearPasswordResetAction:function(){this.state.passwordReset=!1},setUsernameRecoveryAction:function(e){this.state.usernameRecovery=e},clearUsernameRecoveryAction:function(){this.state.usernameRecovery=!1},setRegistrationAction:function(e){this.state.registration=e},clearRegistrationAction:function(){this.state.registration=!1},setEnduserSelfservice:function(e){var t=this;B.a.each(e,function(e){"retrieveUsername"===e.name&&B.a.find(e.endpoints,function(e){return"selfservice/username"===e})?t.setUsernameRecoveryAction(e.enabled):"passwordReset"===e.name&&B.a.find(e.endpoints,function(e){return"selfservice/reset"===e})?t.setPasswordResetAction(e.enabled):"registration"===e.name&&B.a.find(e.endpoints,function(e){return"selfservice/registration"===e})?t.setRegistrationAction(e.enabled):"workflow"===e.name&&t.setWorkflowAction(e.enabled)})},setAuthHeadersAction:function(e){this.state.authHeaders=e},clearAuthHeadersAction:function(){this.state.authHeaders=null},setLoginRedirect:function(e){this.state.loginRedirect=e},clearLoginRedirect:function(){this.state.loginRedirect=null},clearEnduserSelfservice:function(){this.state.workflow=!1,this.state.passwordReset=!1,this.state.usernameRecovery=!1,this.state.registration=!1,this.state.authHeaders=null,this.state.amDataEndpoints=null,this.state.loginRedirect=null}},Md=s("sUu7"),Vd=s("7+uW"),jd=s("TXmL"),Od=s("nkUn"),Ld=s.n(Od),zd=s("hKoQ"),Bd=s.n(zd);Vd.default.config.productionTip=!1,Bd.a.polyfill(),Vd.default.use(jd.a),Vd.default.use(ve.a),Fd.beforeEach(function(e,t,s){if(document.body.className="",B.a.has(e,"meta.bodyClass")&&(document.body.className=(document.body.className+e.meta.bodyClass).trim()),B.a.has(e,"meta.authenticate"))if(B.a.isNull(Id.state.userId)){var a=B.a.extend({"content-type":"application/json","cache-control":"no-cache","x-requested-with":"XMLHttpRequest"},Ud.state.authHeaders||{}),i=!1,r=void 0;sessionStorage.getItem("resubmitDataStoreToken")&&sessionStorage.getItem("amToken")&&(a={"X-OpenIDM-NoSession":"false","X-OpenIDM-OAuth-Login":"true","X-OpenIDM-DataStoreToken":sessionStorage.getItem("amToken"),"X-Requested-With":"XMLHttpRequest"},i=!0),r=fe.a.create({baseURL:Xd,timeout:5e3,headers:a}),r.post("/authentication?_action=login").then(function(e){if(i&&Ud.setAuthHeadersAction({"X-OpenIDM-OAuth-Login":"true","X-OpenIDM-DataStoreToken":sessionStorage.getItem("amToken"),"X-Requested-With":"XMLHttpRequest"}),Id.setUserIdAction(e.data.authorization.id),Id.setManagedResourceAction(e.data.authorization.component),Id.setRolesAction(e.data.authorization.roles),B.a.has(e,"data.authorization.requiredProfileProcesses")&&!B.a.isNull(e.data.authorization.requiredProfileProcesses)&&e.data.authorization.requiredProfileProcesses.length>0){var t=e.data.authorization.requiredProfileProcesses[0].split("/")[1];s("/profileCompletion/"+t)}else fe.a.all([r.get(e.data.authorization.component+"/"+e.data.authorization.id),r.post("privilege?_action=listPrivileges"),r.get("schema/"+e.data.authorization.component)]).then(fe.a.spread(function(e,t,a){Id.setProfileAction(e.data),Id.setSchemaAction(a.data),Id.setAccess(t.data),s()}))},function(){document.body.className="",B.a.has(t,"meta.bodyClass")&&(document.body.className=(document.body.className+t.meta.bodyClass).trim()),"Login"!==e.name&&Ud.setLoginRedirect({name:e.name,params:e.params}),s({name:"Login"})})}else s();else s()});var Hd=new jd.a({locale:"en",fallbackLocale:"en",messages:Ed}),Xd=window.context||"/openidm";Vd.default.use(pe.a),Vd.default.use(Md.a,{inject:!1,fastExit:!1}),Vd.default.use(he.a),Vd.default.use(Ld.a),Vd.default.mixin({methods:{getRequestService:function(e){var t=this,s=Xd,a=5e3,i={"content-type":"application/json","cache-control":"no-cache","x-requested-with":"XMLHttpRequest"},r=void 0;return e&&(e.baseURL&&(s=e.baseURL),e.timeout&&(a=e.timeout),e.headers&&!B.a.isEmpty(e.headers)&&(i=e.headers)),i=B.a.extend(i,this.$root.applicationStore.state.authHeaders||{}),r=fe.a.create({baseURL:s,timeout:a,headers:i}),r.interceptors.response.use(function(e){return e},function(e){return e.response&&e.response.data&&401===e.response.data.code?("Login"!==t.$route.name&&Ud.setLoginRedirect({name:t.$route.name,params:t.$route.params}),B.a.has(t.$root.applicationStore.state,"amDataEndpoints")&&null!==t.$root.applicationStore.state.amDataEndpoints&&t.logoutUser(!0),L.a.reject(e)):B.a.isUndefined(e.response)?L.a.reject(new Error(e.message)):L.a.reject(e)}),r},getAnonymousHeaders:function(){return this.$root.applicationStore.state.authHeaders||{"X-OpenIDM-NoSession":!0,"X-OpenIDM-Password":"anonymous","X-OpenIDM-Username":"anonymous"}},displayNotification:function(e,t){this.$notify({group:"IDMMessages",type:e,text:t,ignoreDuplicates:!0})},logoutUser:function(e){var t=this;this.getRequestService({headers:this.getAnonymousHeaders()}).post("/authentication?_action=logout").then(function(e){t.$root.userStore.clearStoreAction(),sessionStorage.removeItem("amToken"),sessionStorage.removeItem("resubmitDataStoreToken"),t.$root.applicationStore.clearAuthHeadersAction(),t.$root.applicationStore.clearLoginRedirect(),t.$router.push({name:"Login"})},function(){if(e){var s=t.$root.applicationStore.state.amDataEndpoints.baseUrl.replace(/realms\/[a-zA-Z0-9]*\/users\//,""),a=fe.a.create({baseURL:s,timeout:5e3,headers:{"Content-type":"application/json","Accept-API-Version":"protocol=1.0,resource=2.0"}}),i=function(){t.displayNotification("error",t.$t("config.messages.sessionExpired")),B.a.delay(function(){window.location.reload(!0)},4e3)};a.post("sessions?_action=logout",{},{withCredentials:!0}).then(function(){t.amLogoutSuccess=!0,i()},function(){t.amLogoutSuccess||(t.amLogoutSuccess=!0,i())})}else window.location.reload(!0)})},progressiveProfileCheck:function(e,t,s){if(B.a.has(e,"data.authorization.requiredProfileProcesses")&&!B.a.isNull(e.data.authorization.requiredProfileProcesses)&&e.data.authorization.requiredProfileProcesses.length>0){var a=e.data.authorization.requiredProfileProcesses[0].split("/")[1];s&&(this.apiType=a),this.$router.push("/profileCompletion/"+a),s&&this.loadData()}else t()},completeLogin:function(){B.a.isNull(this.$root.applicationStore.state.loginRedirect)?this.$router.push("/"):(this.$router.push(this.$root.applicationStore.state.loginRedirect),this.$root.applicationStore.clearLoginRedirect())}}});var Gd=function(){return new Vd.default({el:"#app",router:Fd,i18n:Hd,template:"<App/>",components:{App:ue},data:{userStore:Id,applicationStore:Ud}})};!function(){var e=fe.a.create({baseURL:Xd,timeout:5e3,headers:{"X-OpenIDM-NoSession":!0,"X-OpenIDM-Password":"anonymous","X-OpenIDM-Username":"anonymous"}});fe.a.all([e.get("/info/uiconfig"),e.get("info/features?_queryFilter=true")]).then(fe.a.spread(function(e,t){return e.data.configuration.lang&&(Hd.locale=e.data.configuration.lang),e.data.configuration.amDataEndpoints&&Ud.setAmDataEndpointsAction(e.data.configuration.amDataEndpoints),Ud.setEnduserSelfservice(t.data.result),Gd()})).catch(function(){return Gd()})}()},OQCq:function(e,t){},OdVq:function(e,t){},Pm6F:function(e,t){},WBI6:function(e,t){},WbnT:function(e,t){},WyKF:function(e,t){},Xik2:function(e,t){},Zwlf:function(e,t){},bPQa:function(e,t){},cQcz:function(e,t){},fqPU:function(e,t){},g26s:function(e,t){},hvFc:function(e,t){e.exports={baseColor:"#007bff"}},jlhQ:function(e,t){},lC5l:function(e,t){},nUOa:function(e,t){},pw9W:function(e,t){},rOwt:function(e,t){},sHWB:function(e,t){},sQ5Y:function(e,t){},uiDc:function(e,t){},un7B:function(e,t){},uslO:function(e,t,s){function a(e){return s(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id="uslO"},wGgA:function(e,t){},weCJ:function(e,t){},wntQ:function(e,t){},xIO3:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e65b9df11825bc8798b1.js.map